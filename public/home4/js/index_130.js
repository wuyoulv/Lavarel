/**
 * @modified $Author: 牟少峰 $
 * @version $Rev: 7eb8daeb3627476441fcffe1a5417d7fb7145cb5 $
 */
!function($,require,define){require.config({enable_ozma:true});define("page/find/play/interaction/dramaTab",["tui/event"],function(e){var t=function(e){return $("#"+e)};var i=null;var n=e.extend({tab:null,tabLis:{},showTabLis:{},tabLisCb:{},current:"Drama",tabId:"#DramaTab",pointEle:{},maxTabs:4,initialize:function(){n.superClass.initialize.call(this);this.tab=$(this.tabId);var e=$("li",this.tab);if(!e||e.length<=0)return false;if(e.length>0)for(var t=0,i=e.length;t<i;t++){var a=e[t].getAttribute("_to");this._addItem(a,e[t]);this._turn(this.current)}},addTab:function(e,t,i,n){if(!this._checkShowTabLen())return false;if(this._checkTab(e)){this._activeTab(e,t,i,n);return true}var a=document.createElement("LI");var r="<span>"+t+"</span>";a.innerHTML=r;a.setAttribute("_to",e);this.tab.append(a);this._addItem(e,a,n);this.addShowTablis(e,a);if(i)this.toggle(e,n)},addShowTablis:function(e,t){if(!this._checkShowTabLen())return false;if(e){if(this.showTabLis[e])return true;this.showTabLis[e]=t}},toggle:function(e,t){if(!this._checkTab(e))return false;if(e!=this.current)this._turn(e);if("function"==typeof t)t();else if("function"==typeof this.tabLisCb[e])this.tabLisCb[e]()},showPoint:function(e,t){if(!this._checkTab(e))return false;if(!this.pointEle[e]){this.pointEle[e]=document.createElement("i");this.pointEle[e].className="icon-currentdot"}t=t||1;this.pointEle[e].innerHTML=t;var i=this._getItem(e).getElementsByTagName("span")[0];i.appendChild(this.pointEle[e])},hidePoint:function(e){if(!this._checkTab(e))return false;if(this.pointEle[e]&&null!=this.pointEle[e].parentNode){var t=this._getItem(e).getElementsByTagName("span")[0];t.removeChild(this.pointEle[e]);return false}},isCurrent:function(e){if(!this._checkTab(e))return false;return this._getItem(e).className.indexOf("current")!==-1?true:false},_activeTab:function(e,t,i,n){var a=this._getItem(e);if(a.length){a.html(a.html().replace("%s",t));a.show();a.onclick=this._getListener(e,n);if(i)this.toggle(e,n);this.addShowTablis(e,a)}},_checkTab:function(e){if(this._getItem(e).length)return true;return false},_checkShowTabLen:function(){if(this._getTabsLen(this.showTabLis)<this.maxTabs)return true;return false},_getTabsLen:function(e){var t,i=0;for(t in e)if(e.hasOwnProperty(t))i++;return i},_addItem:function(e,t,i){if(e){this.tabLisCb[e]=i;this.tabLis[e]=t;this.tabLis[e].onclick=this._getListener(e,i)}},_getItem:function(e){return $(this.tabLis[e])||null},_getListener:function(e,t){var i=this;return function(){i.toggle(e,t)}},_turn:function(e){for(var i in this.tabLis){var n=this._getItem(i),a=t(i);n[0].className="";if(a.length)a.hide()}this._setCurrent(e);if(t(e).length){t(e).show();this.addShowTablis(e,$(e));this.trigger("tab:show",[e])}},_setCurrent:function(e){this.current=e;this._getItem(e).addClass("current")}});n.getInstance=function(){if(i)return i;else return i=new n};return n.getInstance()});define("tui/encrypt/md5",[],function(){function e(e,t){var o=e[0],s=e[1],l=e[2],u=e[3];o=i(o,s,l,u,t[0],7,-680876936);u=i(u,o,s,l,t[1],12,-389564586);l=i(l,u,o,s,t[2],17,606105819);s=i(s,l,u,o,t[3],22,-1044525330);o=i(o,s,l,u,t[4],7,-176418897);u=i(u,o,s,l,t[5],12,1200080426);l=i(l,u,o,s,t[6],17,-1473231341);s=i(s,l,u,o,t[7],22,-45705983);o=i(o,s,l,u,t[8],7,1770035416);u=i(u,o,s,l,t[9],12,-1958414417);l=i(l,u,o,s,t[10],17,-42063);s=i(s,l,u,o,t[11],22,-1990404162);o=i(o,s,l,u,t[12],7,1804603682);u=i(u,o,s,l,t[13],12,-40341101);l=i(l,u,o,s,t[14],17,-1502002290);s=i(s,l,u,o,t[15],22,1236535329);o=n(o,s,l,u,t[1],5,-165796510);u=n(u,o,s,l,t[6],9,-1069501632);l=n(l,u,o,s,t[11],14,643717713);s=n(s,l,u,o,t[0],20,-373897302);o=n(o,s,l,u,t[5],5,-701558691);u=n(u,o,s,l,t[10],9,38016083);l=n(l,u,o,s,t[15],14,-660478335);s=n(s,l,u,o,t[4],20,-405537848);o=n(o,s,l,u,t[9],5,568446438);u=n(u,o,s,l,t[14],9,-1019803690);l=n(l,u,o,s,t[3],14,-187363961);s=n(s,l,u,o,t[8],20,1163531501);o=n(o,s,l,u,t[13],5,-1444681467);u=n(u,o,s,l,t[2],9,-51403784);l=n(l,u,o,s,t[7],14,1735328473);s=n(s,l,u,o,t[12],20,-1926607734);o=a(o,s,l,u,t[5],4,-378558);u=a(u,o,s,l,t[8],11,-2022574463);l=a(l,u,o,s,t[11],16,1839030562);s=a(s,l,u,o,t[14],23,-35309556);o=a(o,s,l,u,t[1],4,-1530992060);u=a(u,o,s,l,t[4],11,1272893353);l=a(l,u,o,s,t[7],16,-155497632);s=a(s,l,u,o,t[10],23,-1094730640);o=a(o,s,l,u,t[13],4,681279174);u=a(u,o,s,l,t[0],11,-358537222);l=a(l,u,o,s,t[3],16,-722521979);s=a(s,l,u,o,t[6],23,76029189);o=a(o,s,l,u,t[9],4,-640364487);u=a(u,o,s,l,t[12],11,-421815835);l=a(l,u,o,s,t[15],16,530742520);s=a(s,l,u,o,t[2],23,-995338651);o=r(o,s,l,u,t[0],6,-198630844);u=r(u,o,s,l,t[7],10,1126891415);l=r(l,u,o,s,t[14],15,-1416354905);s=r(s,l,u,o,t[5],21,-57434055);o=r(o,s,l,u,t[12],6,1700485571);u=r(u,o,s,l,t[3],10,-1894986606);l=r(l,u,o,s,t[10],15,-1051523);s=r(s,l,u,o,t[1],21,-2054922799);o=r(o,s,l,u,t[8],6,1873313359);u=r(u,o,s,l,t[15],10,-30611744);l=r(l,u,o,s,t[6],15,-1560198380);s=r(s,l,u,o,t[13],21,1309151649);o=r(o,s,l,u,t[4],6,-145523070);u=r(u,o,s,l,t[11],10,-1120210379);l=r(l,u,o,s,t[2],15,718787259);s=r(s,l,u,o,t[9],21,-343485551);e[0]=f(o,e[0]);e[1]=f(s,e[1]);e[2]=f(l,e[2]);e[3]=f(u,e[3])}function t(e,t,i,n,a,r){t=f(f(t,e),f(n,r));return f(t<<a|t>>>32-a,i)}function i(e,i,n,a,r,o,s){return t(i&n|~i&a,e,i,r,o,s)}function n(e,i,n,a,r,o,s){return t(i&a|n&~a,e,i,r,o,s)}function a(e,i,n,a,r,o,s){return t(i^n^a,e,i,r,o,s)}function r(e,i,n,a,r,o,s){return t(n^(i|~a),e,i,r,o,s)}function o(t){if(/[\x80-\xFF]/.test(t))t=unescape(encodeURI(t));txt="";var i=t.length,n=[1732584193,-271733879,-1732584194,271733878],a;for(a=64;a<=t.length;a+=64)e(n,s(t.substring(a-64,a)));t=t.substring(a-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(a=0;a<t.length;a++)r[a>>2]|=t.charCodeAt(a)<<(a%4<<3);r[a>>2]|=128<<(a%4<<3);if(a>55){e(n,r);for(a=0;a<16;a++)r[a]=0}r[14]=8*i;e(n,r);return n}function s(e){var t=[],i;for(i=0;i<64;i+=4)t[i>>2]=e.charCodeAt(i)+(e.charCodeAt(i+1)<<8)+(e.charCodeAt(i+2)<<16)+(e.charCodeAt(i+3)<<24);return t}var l="0123456789abcdef".split("");function u(e){var t="",i=0;for(;i<4;i++)t+=l[15&e>>8*i+4]+l[15&e>>8*i];return t}function c(e){for(var t=0;t<e.length;t++)e[t]=u(e[t]);return e.join("")}function d(e){return c(o(e))}function f(e,t){return 4294967295&e+t}return d});define("tui/easing2",[],function(e,t){jQuery.easing["jswing"]=jQuery.easing["swing"];jQuery.extend(jQuery.easing,{easeOutCubic:function(e,t,i,n,a){t/=a;t--;return n*(t*t*t+1)+i},easeOutQuart:function(e,t,i,n,a){t/=a;t--;return-n*(t*t*t*t-1)+i},easeOutQuint:function(e,t,i,n,a){t/=a;t--;return n*(t*t*t*t*t+1)+i},easeOutCirc:function(e,t,i,n,a){t/=a;t--;return n*Math.sqrt(1-t*t)+i},easeOutSine:function(e,t,i,n,a){return n*Math.sin(t/a*(Math.PI/2))+i},easeOutExpo:function(e,t,i,n,a){return n*(-Math.pow(2,-10*t/a)+1)+i},mcsEaseOut:function(e,t,i,n,a){var r=(t/=a)*t,o=r*t;return i+n*(.499999999999997*o*r+-2.5*r*r+5.5*o+-6.5*r+4*t)},draggerRailEase:function(e,t,i,n,a){t/=a/2;if(t<1)return n/2*t*t*t+i;t-=2;return n/2*(t*t*t+2)+i}})});define("tui/scrollbar2",["tui/event","tui/drag","tui/art","tui/easing2"],function(e,t,i){var n=e.extend({initialize:function(e,a){a=a||{};n.superClass.initialize.apply(this,arguments);var r=this;var o={horizontalScroll:false,horizontalMaxSize:1e5,prefix:"",autoHide:true,targetNode:null,renderMethod:"after",barContainerNode:null,animate:false,duration:950,easing:"mcsEaseOut",arrowEnable:false,arrowDelta:60,arrowPrevNode:null,arrowNextNode:null,draggerNode:null,draggerMaxLength:null,draggerMinLength:60,draggerAutoLength:true,trackEnable:true,trackNode:null,mouseWheelEnable:true,mouseWheelDelta:30,keyPressEnable:false,keyPressDelta:60};$.extend(true,r,o,a);$.extend(true,r,{arrowAnimate:{enable:r.animate,duration:r.duration,easing:r.easing},mouseWheelAnimate:{enable:r.animate,duration:r.duration,easing:r.easing},draggerAnimate:{enable:r.animate,duration:r.duration,easing:r.easing},trackAnimate:{enable:r.animate,duration:r.duration,easing:r.easing},keyPressAnimate:{enable:r.animate,duration:r.duration,easing:r.easing}},a);var s=$(e);var l=r.prefix&&""!=r.prefix?r.prefix+"_":"";var u=r.barContainerNode?$(r.barContainerNode):$(i.compile(a.template||'<div class="<%=prefix%>scrollbar_container"><a class="<%=prefix%>scrollbar_prev" href="#"><i></i></a><div class="<%=prefix%>scrollbar_track"><span class="<%=prefix%>scrollbar_dragger"></span></div><a class="<%=prefix%>scrollbar_next" href="#"><i></i></a></div>')({prefix:l}));var c=r.draggerNode?$(r.draggerNode):u.find("."+l+"scrollbar_dragger");var d=r.trackNode?$(r.trackNode):u.find("."+l+"scrollbar_track");var f=r.arrowPrevNode?$(r.arrowPrevNode):u.find("."+l+"scrollbar_prev");var p=r.arrowNextNode?$(r.arrowNextNode):u.find("."+l+"scrollbar_next");var h=r.targetNode||s;if(!r.barContainerNode)h[r.renderMethod](u);var m=new t(c,{limit:true});m.bind("drag:move",function(e,t){r.scrollTo(r.horizontalScroll?e:t,true,r.draggerAnimate)});s.bind("scroll",function(e){var t=s[r.horizontalScroll?"scrollLeft":"scrollTop"]();r.trigger("scroll",[t]);if(0==t)r.trigger("scroll:head",[t]);else if(t>=r._contentSize-r._containerSize)r.trigger("scroll:end",[t])});if(!r.arrowEnable){f.hide();p.hide()}else{var v;f.mousedown(function(e){e.preventDefault();r.scrollTo(r.getScrollPosition()-r.arrowDelta,false,r.arrowAnimate);v=setTimeout(function(){if(v)clearInterval(v);v=setInterval(function(){r.scrollTo(r.getScrollPosition()-r.arrowDelta,false,r.arrowAnimate)},30)},500)}).mouseleave(function(){if(v)clearInterval(v)}).mouseup(function(){if(v)clearInterval(v)}).click(function(e){e.preventDefault()});p.mousedown(function(e){e.preventDefault();r.scrollTo(r.getScrollPosition()+r.arrowDelta,false,r.arrowAnimate);v=setTimeout(function(){if(v)clearInterval(v);v=setInterval(function(){r.scrollTo(r.getScrollPosition()+r.arrowDelta,false,r.arrowAnimate)},30)},500)}).mouseleave(function(){if(v)clearInterval(v)}).mouseup(function(){if(v)clearInterval(v)}).click(function(e){e.preventDefault()})}if(r.mouseWheelEnable&&/firefox/.test(navigator.userAgent.toLowerCase()))s[0].addEventListener("DOMMouseScroll",function(e){if(r._contentSize>r._containerSize){e.preventDefault();var t=e.detail>0?r.mouseWheelDelta:-r.mouseWheelDelta;r.scrollTo(r.getScrollPosition()+t,false,r.mouseWheelAnimate)}},false);else if(r.mouseWheelEnable)s[0].onmousewheel=function(e){if(r._contentSize>r._containerSize){e=e||window.event;var t=e.wheelDelta>0?-r.mouseWheelDelta:r.mouseWheelDelta;if(0==e.wheelDelta)t=0;r.scrollTo(r.getScrollPosition()+t,false,r.mouseWheelAnimate);e.returnValue=false;return false}else return true};if(r.trackEnable){c.mousedown(function(e){e.stopPropagation()});d.mousedown(function(e){e.preventDefault();r.scrollTo(e[r.horizontalScroll?"pageX":"pageY"]-d.offset()[r.horizontalScroll?"left":"top"]-r._draggerSize/2,true,r.trackAnimate)})}if(r.keyPressEnable)s.css("outline","none").attr("tabindex","-1").keydown(function(e){var t=e.keyCode;var i=r.getScrollPosition();if(~"INPUT,TEXTAREA".indexOf(e.target.nodeName.toUpperCase()))return;if(!~"38,39,36,40,37,35".indexOf(t))return;if([38,39,36].indexOf(t)!=-1&&0!=i)e.preventDefault();else if([40,37,35].indexOf(t)!=-1&&i!=r._contentSize-r._containerSize)e.preventDefault();switch(t){case 37:case 38:r.scrollTo(i-r.keyPressDelta,false,r.keyPressAnimate);break;case 39:case 40:r.scrollTo(i+r.keyPressDelta,false,r.keyPressAnimate);break;case 36:r.scrollTo(0,false,r.keyPressAnimate);break;case 35:r.scrollTo(r._contentSize-r._containerSize,false,r.keyPressAnimate)}});r.container=s;r.barContainerNode=u;r.trackNode=d;r.arrowPrevNode=f;r.arrowNextNode=p;r.draggerNode=c;r._contentSize=0;r._containerSize=0;r._trackSize=0;r._draggerSize=0;r.update()},getScrollPosition:function(){return this.container[0][this.horizontalScroll?"scrollLeft":"scrollTop"]},scrollTo:function(e,t,i){var n=this;var a=n.horizontalScroll;var r=t?e:e*(n._trackSize-n._draggerSize)/(n._contentSize-n._containerSize);var o=!t?e:(e*n._contentSize-e*n._containerSize)/(n._trackSize-n._draggerSize);r=Math.min(n._trackSize-n._draggerSize,Math.max(0,r));if(a)o=Math.min(o,n.horizontalMaxSize-n._containerSize);if(true===i||i&&false!==i.enable){var s={};var l={};s[a?"scrollLeft":"scrollTop"]=o?o:0;l[a?"left":"top"]=r;if(true===i)i={duration:n.duration,easing:n.easing};n.container.stop().animate(s,i);n.draggerNode.stop().animate(l,i)}else{n.container[a?"scrollLeft":"scrollTop"](o?o:0);n.draggerNode.css(a?"left":"top",r)}},scrollToElement:function(e,t){e=$(e);t=t||{};var i=void 0!=t.animate?t.animate:this.animate;var n=this.horizontalScroll;if(e.length){var a=this.container[n?"scrollLeft":"scrollTop"]()+e.offset()[n?"left":"top"]-this.container.offset()[n?"left":"top"];if(t.pos)a-=t.pos;this.scrollTo(a,false,i)}},update:function(){this.show();var e=this.horizontalScroll;this._trackSize=this.trackNode[e?"innerWidth":"innerHeight"]();this._containerSize=this.container[e?"innerWidth":"innerHeight"]();this._contentSize=this.container[0][e?"scrollWidth":"scrollHeight"];this._draggerSize=this.draggerNode[e?"innerWidth":"innerHeight"]();e&&(this._contentSize=Math.min(this._contentSize,this.horizontalMaxSize));if(this._contentSize>this._containerSize){if(this.draggerAutoLength){this._draggerSize=Math.floor(this._containerSize*this._trackSize/this._contentSize);if(this.draggerMinLength)this._draggerSize=Math.max(this._draggerSize,this.draggerMinLength);if(this.draggerMaxLength)this._draggerSize=Math.min(this._draggerSize,this.draggerMaxLength);this.draggerNode.css(e?"width":"height",this._draggerSize)}this.scrollTo(this.getScrollPosition(),false,self.animate)}else if(this.autoHide)this.hide()},show:function(){this.barContainerNode.show();this.trigger("show")},hide:function(){this.barContainerNode.hide();this.trigger("hide")}});return n});define("page/find/play/bspool",["tui/view","tui/art","tui/scrollbar2","tui/encrypt/md5","page/find/play/interaction/dramaTab","module/login/login","module/responsive"],function(e,t,i,n,a,r,o){$.support.cors=true;document.domain="youku.com";var s=false;var l='<div class="del-frame"><ul><li data-descp="delone">删除此弹幕</li><li data-descp="delall">删除该用户所有弹幕</li><li data-descp="checkall">查看该用户所有弹幕</li></ul></div>';var u='<div class="del-frame"><ul><li data-descp="delone">删除此弹幕</li><li data-descp="delall">删除该用户所有弹幕</li></ul></div>';var c='<div class="comp-frame"><ul><li data-type="nosen">刷屏/无意义</li><li data-type="nohor">辱骂/不和谐</li><li data-type="spoiler">剧透/误导</li><li data-type="adver">广告/其他</li></ul></div>';if(!!window.XDomainRequest)var d=new XDomainRequest;var f=e.extend({initialize:function(e){var t=this;this.isdz=PageConfig.videoOwner==r.uid()?true:false;$("body").bind("appearBspool",function(){var i=a.addTab("bspoolBox","弹幕列表",false);a.bind("tab:show",function(){if(!s){s=true;t.render(e)}t.$el.trigger("list:update")})})},afterAsnycHandler:function(e){var t=this;this.hoverEventHandler(e);this.addBSinfo();this.labelClickHandler(e);this.scroll=new i($(".scroller",this.el),{draggerMinLength:30});this.scroll.bind("scroll:end",function(){if(!!$("#bspoolBox").data("mat"))t.bsListHandler(e,$("#bspoolBox").data("mat"),function(i){var n;for(var a=0;a<i.onePageBslen;a++){n='<div class="item-one clearfix label'+i.uids[a]+'" data-uid="'+i.uids[a]+'" data-objid="'+i.objId[a]+'">'+'<div class="list_len"><a class="time" href="javascript:ykPlyr.PlayerSeek('+i.seekTime[a]+')" title="点击空降到'+i.timePoint[a]+'">'+i.timePoint[a]+'</a><span class="idoln"></span><span class="afterDelTxt">已删除</span><span class="item bsp-list-limitArea">'+i.listBsCont[a]+"</span></div>"+'<div class="details"><p>'+i.listBsCont[a]+'</p></div><div class="btnsframe"><span class="comp-bs" onselectstart="return false;">举报</span><span class="del-bs" onselectstart="return false;">删除</span></div></div>';$("#bsp-alllist-wrap").append(n)}$("#bspoolBox").data("mat",i.Varnext);t.hoverEventHandler(e);t.addBSinfo();t.$el.trigger("list:update")})});this.$el.bind("list:update",function(){t.scroll.update()});o.bind("player:responsive",function(){t.scroll.update()})},render:function(e){var i=this,n;n='<div class="bspoolTit">\n<div class="bs_data" id="bs_data">\n<span class="name">弹幕数</span>\n<span><%=totalCounts%>发</span>\n</div>\n<div id="bs_selected_label_layer" onselectstart="return false">\n<div class="bs_idol_l clearfix" id="bs_idol">\n<%for(var i = 0; i < idols.length; i++){%>\n<span data-id="label<%=idols[i].uid%>" data-uid="<%=idols[i].uid%>" data-idolimg="<%=idols[i].headImg%>" onselectstart="return false" title="<%=idols[i].name%>"><%=idols[i].name%></span>\n<%}%>\n</div>\n<%if(idols.length > 3){%>\n<div class="label_arw_updown">\n<span class="arw-up"></span>\n<span class="arw-down active"></span>\n</div>	\n<%}%>	\n</div>\n</div>\n<div class="scroll-area<%if(idols.length == 0){%> hasNoneLabel<%}%> scroll-resize-height">\n<div class="scroller bsp-cont scroll-resize-height" id="scrollMatNext">\n<div class="scroller-container">\n<div class="bsp-all-list hoverOneItem" id="bsp-all-list">\n<div id="bsp-alllist-wrap">\n<%for(var i = 0; i < onePageBslen; i++){%>\n<div class="item-one clearfix label<%=uids[i]%>" data-uid="<%=uids[i]%>" data-objid="<%=objId[i]%>">\n<div class="list_len clearfix">\n<a class="time" href="javascript:ykPlyr.PlayerSeek(\'<%=seekTime[i]%>\');" title="点击空降到<%=timePoint[i]%>"><%=timePoint[i]%></a>\n<span class="idoln"></span>\n<span class="afterDelTxt">已删除</span>\n<span class="item bsp-list-limitArea"><%=listBsCont[i]%></span>\n</div>\n<div class="details"><p><%=listBsCont[i]%></p></div>\n<div class="btnsframe"><span class="comp-bs" onselectstart="return false;">举报</span><span class="del-bs" onselectstart="return false;">删除</span>\n</div>\n</div>\n<%}%>\n</div>\n<div class="bs_loadImg_box"></div>\n</div>\n<div class="bsp-label-list hoverOneItem" id="bsp-label-list"></div>\n</div>\n<%if(totalCounts == 0){%>\n<div class="zerodm_show_bg"></div>\n<%}%>\n</div>\n</div>\n';i.bsListHandler(e,0,function(a){i.labelListHandler(e,function(r){var o=$.extend({},a,r);insData=t.compile(n)(o);$("#bspoolBox").html(insData);i.afterAsnycHandler(e)})})},xdrFn:function(e){if(!window.XDomainRequest)$.ajax({url:e.url,type:"POST",dataType:"json",success:e.loadfun,error:e.errfn});else{d=new XDomainRequest;d.open("POST",e.url);d.onload=e.loadfun;d.onerror=e.errfn;d.send()}},bsListHandler:function(e,t,i){var n=[],a=[],r=[],o=[],s,l,u,c,f,p,h=this;$(".bs_loadImg_box").addClass("bs_loadImg");var m=function(e){if(!!window.XDomainRequest)e=$.parseJSON(d.responseText);if(e.data.length>0){for(var t=0;t<e.data.length;t++){n.push(e.data[t].content);a.push(e.data[t].playat);r.push(e.data[t].uid);o.push(e.data[t].id)}l=h.timeConver(a);c=a.map(function(e){return parseInt(e/1e3)});p=e.next;f=e.data.length;$("#bspoolBox").data("mat",p)}$(".bs_loadImg_box").removeClass("bs_loadImg");i({onePageBslen:f,uids:r,objId:o,timePoint:l,seekTime:c,listBsCont:n,Varnext:p})};this.xdrFn({url:"http://service.danmu.youku.com/pool?"+$.param({iid:e.iid,begin:t||0,type:1,ct:e.ct,cid:e.cid,ouid:e.ouid,lid:e.lid,aid:e.aid}),loadfun:m,errfn:function(e,t){console.log("弹幕列表刷新失败",t)}})},labelListHandler:function(e,t){var i,n=[],a=this;var r=function(e){if(!!window.XDomainRequest)e=$.parseJSON(d.responseText);if(1==e.code){i=e.count;for(var a=0;a<e.utag.length;a++)n.push(e.utag[a])}else console.log("iid错误");t({totalCounts:i,idols:n})};this.xdrFn({url:"http://service.danmu.youku.com/pool/info?"+$.param({iid:e.iid,ct:e.ct,cid:e.cid,ouid:e.ouid,lid:e.lid,aid:e.aid}),loadfun:r,errfn:function(e,t){console.log("弹幕标签刷新失败",t)}})},userlistRequest:function(e,t,i,n,a){var r=[],o=[],s=[],l=[],u,c,f,p=this;var h=function(e){if(!!window.XDomainRequest)e=$.parseJSON(d.responseText);for(var t=0;t<e.result.length;t++){r.push(e.result[t].content);o.push(e.result[t].playat);s.push(e.result[t].uid);l.push(e.result[t].id)}c=p.timeConver(o);sguSeekTime=o.map(function(e){return parseInt(e/1e3)});f=e.result.length;a({singleUserBsCont:r,singleUserTp:c,singleUserBslen:f,labelUids:s,sguSeekTime:sguSeekTime,lobjids:l,imgsrc:i,idolame:n})};this.xdrFn({url:"http://service.danmu.youku.com/ulist?"+$.param({uid:t,iid:e.iid,ct:e.ct}),loadfun:h,errfn:function(e,t){console.log("获取单用户弹幕列表失败",t)}})},delEventHandler:function(e,t,i){var n=this;var a=function(e){if("1"==e.code){n.toast("删除成功",2e3);$("#bsp-all-list,#bsp-label-list").find(".item-one").each(function(e){if(!!i){if($(this).data("objid")==i){$(this).addClass("afterDelSty");$(this).off("mouseenter").off("mouseleave")}}else if($(this).data("uid")==t){$(this).addClass("afterDelSty");$(this).off("mouseenter").off("mouseleave")}})}else if("-101"==e.code)r.login();else n.toast("删除失败",2e3);setTimeout(function(){$(".bs_maskCover").remove()},500)};$.ajax({url:"http://service.danmu.youku.com/delDmByOwner?"+$.param({uid:t,iid:e.iid,ct:e.ct,objId:i||0}),type:"GET",dataType:"jsonp",jsonp:"jsoncallback",jsonpCallback:"callbackData",success:a,error:function(e,t){n.toast("删除失败,请稍后再试"+t,2e3)}})},compEventHandler:function(e){var t=this;$.ajax({url:"http://service.danmu.youku.com/report?ct=1001&ver=1",type:"GET",dataType:"jsonp",data:e,jsonp:"jsoncallback",jsonpCallback:"callbackData",success:function(e){if("1"==e.code)t.toast("举报成功",2e3);else if("-102"==e.code)r.login();else t.toast("举报失败,错误代码"+e.code,2e3)},error:function(e,i){t.toast("举报失败,请稍后再试"+i,2e3)}})},labelClickHandler:function(e){var i=this,n=parseInt($("#bs_idol").height()/37),a=1,r=$("#bs_selected_label_layer");$("#bs_idol span").on("click",function(n){if(!$(this).hasClass("active")){var a=$(this).data("uid");var r=$(this).data("idolimg");var o=$(this).text();i.userlistRequest(e,a,r,o,function(n){var a='<div class="list-head">\n<p>找到该用户弹幕<b><%=singleUserBslen%></b>发</p>\n<span onselectstart="return false" class="closer">X</span>\n</div>\n<%for(var i = 0; i < singleUserBslen; i++){%>\n<div class="item-one clearfix item-one-label" data-uid="<%=labelUids[i]%>" data-objid="<%=lobjids[i]%>">\n<div class="list_len clearfix">\n<a class="time" href="javascript:ykPlyr.PlayerSeek(\'<%=sguSeekTime[i]%>\');" title="点击空降到<%=singleUserTp[i]%>"><%=singleUserTp[i]%></a>\n<span class="idoln">\n<a href="http://i.youku.com/i/id_<%=labelUids[i]%>" target="_blank">\n<%if(!!imgsrc){%><img src="<%=imgsrc%>" class="idol-img"/><%}%>\n<%if(!!idolame){%><b class="idolname" title="<%=idolame%>"><%=idolame%></b><%}%>\n</a>\n</span>\n<span class="afterDelTxt">已删除</span>\n<span class="item bsp-list-limitArea <%if(!!idolame || !!imgsrc){%>oneIdolList<%}%>"><%=singleUserBsCont[i]%></span>\n</div>\n<div class="details"><p><%=singleUserBsCont[i]%></p></div>\n<div class="btnsframe"><span class="comp-bs" onselectstart="return false;">举报</span><span class="del-bs" onselectstart="return false;">删除</span>\n</div>\n</div>\n<%}%>\n';var r=n||{};var o=t.compile(a)(r);$(".bsp-label-list","#bspoolBox").html(o);i.hoverEventHandler(e);i.addBSinfo();i.$el.trigger("list:update");i.scroll.scrollTo(0,true,i.scroll.keyPressAnimate);i.sinUserListEvent(true)});$(this).addClass("active").siblings("span").removeClass("active");$("#bsp-all-list").hide().siblings("#bsp-label-list").show()}else{$(this).removeClass("active");$("#bsp-label-list").hide().siblings("#bsp-all-list").show();$(".bsp-label-list","#bspoolBox").empty();i.$el.trigger("list:update");i.scroll.scrollTo(0,true,i.scroll.keyPressAnimate)}});r.find(".arw-up").on("click",function(){if(!!$(this).hasClass("active")&&!$("#bs_idol").is(":animated")){var e=parseInt($("#bs_idol").css("top"));r.find(".arw-down").addClass("active");if(a>2)a--;else{a--;$(this).removeClass("active")}$("#bs_idol").animate({top:e+37},400)}});r.find(".arw-down").on("click",function(){if(!!$(this).hasClass("active")&&!$("#bs_idol").is(":animated")){var e=parseInt($("#bs_idol").css("top"));r.find(".arw-up").addClass("active");if(a<n-1)a++;else{a++;$(this).removeClass("active")}$("#bs_idol").animate({top:e-37},400)}})},sinUserListEvent:function(e){var t=this;var i=this.$el.find(".bsp-label-list .item-one");var n=this.$el.find(".bsp-label-list .list-head");if(i)i.each(function(e,t){$(t).hover(function(){$(t).find(".details").show()},function(){$(t).find(".details").hide()})});n.find(".closer").on("click",function(i){if(e&$("#bs_idol span").hasClass("active"))$("#bs_idol span").removeClass("active");$(".bsp-label-list","#bspoolBox").empty();$(".bsp-label-list","#bspoolBox").empty();$("#bsp-label-list").hide().siblings("#bsp-all-list").show();t.$el.trigger("list:update");t.scroll.scrollTo(0,true,t.scroll.keyPressAnimate)})},hoverEventHandler:function(e){var i=this,a=true,o=true;var s=i.$el.find(".item-one");s.each(function(s,d){$(d).hover(function(){var s=!!$(this).hasClass("item-one-label");if($("body").find(".del-frame").length>0)$("body").find(".del-frame").remove();if($("body").find(".comp-frame").length>0)$("body").find(".comp-frame").remove();if(!$(d).hasClass("showBtnsframe")){$(d).addClass("showBtnsframe");if(i.isdz)$(d).find(".del-bs").show()}$(d).find(".details").show();$(d).find(".del-bs").on("click",function(){var n=$(this).offset().top,a=$(this).offset().left,r=0==$(this).closest(".item-one").data("objid")?true:false;var c=$(this).closest(".item-one").clone(true).removeClass("showBtnsframe");if(o)!s?$(l).appendTo($("body")[0]):$(u).appendTo($("body")[0]);o=false;$("body").find(".del-frame").css({top:n-(!s?95:70),left:a-80}).mouseleave(function(){$(this).remove();o=true});$("body").find(".del-frame").hover(function(){$(d).addClass("showBtnsframe bsplayerIn");if(i.isdz)$(d).find(".btnsframe .del-bs").show()},function(){if(i.isdz)$(d).find(".btnsframe .del-bs").hide();$(d).removeClass("showBtnsframe");$(this).remove();o=true});$("body").find(".comp-bs,.list_len").mouseenter(function(){$("body").find(".del-frame").remove();o=true});$("body").find(".del-frame").find("li").on("click",function(n){var a=$(this).data("descp"),s=$(d).data("objid"),l=0==s?0:$(d).data("uid"),u=$(".showBtnsframe").find(".idol-img").attr("src"),f=$(".showBtnsframe").find(".idolname").text();var p='<div class="bs_maskCover"></div>';$(p).appendTo($("#bspoolBox"));if("delone"==a)i.delEventHandler(e,l,s);else if("delall"==a)i.delEventHandler(e,l);else if("checkall"==a){$(".bs_maskCover").remove();l=$(d).data("uid");i.userlistRequest(e,l,u,f,function(n){var a='<div class="list-head">\n<p>找到该用户弹幕<b><%=singleUserBslen%></b>发</p>\n<span onselectstart="return false" class="closer">X</span>\n</div>\n<%for(var i = 0; i < singleUserBslen; i++){%>\n<div class="item-one clearfix item-one-label" data-uid="<%=labelUids[i]%>" data-objid="<%=lobjids[i]%>">\n<div class="list_len clearfix">\n<a class="time" href="javascript:ykPlyr.PlayerSeek(\'<%=sguSeekTime[i]%>\');" title="点击空降到<%=singleUserTp[i]%>"><%=singleUserTp[i]%></a>\n<span class="idoln">\n<a href="http://i.youku.com/i/id_<%=labelUids[i]%>" target="_blank">\n<%if(!!imgsrc){%><img src="<%=imgsrc%>" class="idol-img"/><%}%>\n<%if(!!idolame){%><b class="idolname" title="<%=idolame%>"><%=idolame%></b><%}%>\n</a>\n</span>\n<span class="afterDelTxt">已删除</span>\n<span class="item bsp-list-limitArea <%if(!!idolame || !!imgsrc){%>oneIdolList<%}%>"><%=singleUserBsCont[i]%></span>\n</div>\n<div class="details"><p><%=singleUserBsCont[i]%></p></div>\n<div class="btnsframe"><span class="comp-bs" onselectstart="return false;">举报</span><span class="del-bs" onselectstart="return false;">删除</span>\n</div>\n</div>\n<%}%>\n';var o=n||{};var s=t.compile(a)(o);$(".bsp-label-list","#bspoolBox").html(s);if(r){c.find(".details").hide();c.appendTo("#bsp-label-list");$("#bsp-label-list").find(".list-head b").text("1")}i.addBSinfo();i.hoverEventHandler(e);i.$el.trigger("list:update");i.sinUserListEvent(false)});$("#bsp-all-list").hide().siblings("#bsp-label-list").show();i.$el.trigger("list:update")}$("body").find(".del-frame").remove();$(d).trigger("mouseleave");o=true})});$(d).find(".comp-bs").on("click",function(t){var o=$(this).offset().top,s=$(this).offset().left;if(a)$(c).appendTo($("body")[0]);a=false;$("body").find(".comp-frame").css({top:o-120,left:s-70});$("body").find(".comp-frame").hover(function(){$(d).addClass("showBtnsframe bsplayerIn");if(i.isdz)$(d).find(".btnsframe .del-bs").show()},function(){if(i.isdz)$(d).find(".btnsframe .del-bs").hide();$(d).removeClass("showBtnsframe");$("body").find(".comp-frame").remove();$(this).remove();a=true});$("body").find(".del-bs,.list_len,.scrollbar_track").mouseenter(function(e){$("body").find(".comp-frame").remove();a=true});$("body").find(".comp-frame").find("li").on("click",function(t){var o=$(this).data("type"),s,l;if(!window.XDomainRequest){sendBack={dmid:$(d).data("objid"),uid:parseInt(r.uid()),iid:parseInt(e.iid),reportUid:$(d).data("uid"),dmContent:$(d).find(".details").text(),status:-5,time:(new Date).getTime(),sign:n("Ef9/4e4d^@g9a2M3g"+(new Date).getTime()+r.uid()+r.uid()+$(d).data("objid"))};if("nosen"==o){s={reason:"刷屏无意义",type:1};sendBack=$.extend({},sendBack,s)}else if("nohor"==o){s={reason:"辱骂不和谐",type:2};sendBack=$.extend({},sendBack,s)}else if("spoiler"==o){s={reason:" 剧透误导",type:3};sendBack=$.extend({},sendBack,s)}else{s={reason:"广告其他",type:4};sendBack=$.extend({},sendBack,s)}}else{l="dmid="+$(d).data("objid")+"&uid="+parseInt(r.uid())+"&iid="+parseInt(e.iid)+"&reportUid="+$(d).data("uid")+"&dmContent="+$(d).find(".details").text()+"&status=-5"+"&time="+(new Date).getTime()+"&sign="+n("Ef9/4e4d^@g9a2M3g"+(new Date).getTime()+r.uid()+r.uid()+$(d).data("objid"));if("nosen"==o)sendBack=l+"&reason=刷屏无意义&type=1";else if("nohor"==o)sendBack=l+"&reason=辱骂不和谐&type=2";else if("spoiler"==o)sendBack=l+"&reason=剧透误导&type=3";else sendBack=l+"&reason=广告其他&type=4"}i.compEventHandler(sendBack);$(this).trigger("mouseleave");a=true})})},function(){if(i.isdz)$(d).find(".btnsframe .del-bs").hide();$(d).removeClass("showBtnsframe");o=true;a=true;$(d).find(".details").hide().end().find(".del-bs,.comp-bs").off("click")});if($(this).hasClass("afterDelSty"))$(this).off("mouseenter").off("mouseleave")})},toast:function(e,t){var i=document.createElement("div"),n=document.createElement("p");i.className="bspool_toast";i.id="bspool_toast";n.innerHTML=e;i.appendChild(n);document.getElementById("bspoolBox").appendChild(i);setTimeout(function(){var e=document.getElementById("bspool_toast");e.parentNode.removeChild(e)},t)},limitedCount:function(e,t){var i=e.replace(/[^\x00-\xff]/g,"__").length,n=e.split(""),a=0,r=0;if(i<=t)return e;else{for(var o=0;o<n.length;o++)if(a<=t){if(!!n[o].match(/[\u4e00-\u9fa5]/g))a+=2;else a++;r++}else break;return e.substring(0,r-1)+"......"}},timeConver:function(e){return e.map(function(e){var t=e/1e3;if(t<3600){var i=parseInt(t/60),n=Math.floor(t%60);return(i>=10?i:"0"+i)+":"+(n>=10?n:"0"+n)}else{var a=parseInt(t/3600),r=parseInt(t%3600/60),o=Math.floor(t%3600%60);return(a>=10?a:"0"+a)+":"+(r>=10?r:"0"+r)+":"+(o>=10?o:"0"+o)}})},addBSinfo:function(){$("#bs_idol").find("span").each(function(e,t){var i=$(t).data("idolimg");var n=$(t).text();var a="http://i.youku.com/i/id_"+$(t).data("uid");var r;if(!!i)r='<a href="'+a+'" target="_blank"><img src="'+i+'" class="idol-img"/><b class="idolname">'+n+"</b></a>";else r='<a href="'+a+'" target="_blank"><b class="idolname">'+n+"</b></a>";var o="."+$(t).data("id");$(o,"#bsp-all-list").find(".idoln").empty().append(r).siblings(".bsp-list-limitArea").addClass("oneIdolList")})}});return f});define("page/find/play/model/interaction/dramaModel",["tui/event","tui/net","module/login/login"],function(e,t,i){var n=e.extend({initialize:function(){var e=this;n.superClass.initialize.call(e);this.domain=PageConfig.homeHost;e.op={callbackName:"callback",charset:"utf-8"}},getPageData:function(e,i){var n=this;t.getJSON(this.domain+e+"?beta",i,function(e){if(1==e.error)n.trigger("getPageData:success",[e])},n.op)},getEpisodeRelations:function(e){var i=this;t.getJSON(this.domain+"page/relate"+"?beta",e,function(e){if(1==e.error)i.trigger("getEpisodeRelations:success",[e])},i.op)},getTVPoint:function(e){var i=this;t.getJSON(this.domain+"page/tvpoint"+"?beta",e,function(e){if(1==e.error)i.trigger("getTVPoint:success",[e])},i.op)},checkInteract:function(e){var i=this;t.getJSON(this.domain+"action/checkInteract?beta",e,function(e){if(1==e.error)i.trigger("checkInteract:sucess",[e.data])},i.op)
}});return n});define("page/find/play/interac",["tui/event","page/find/play/interaction/dramaTab","page/find/play/model/interaction/dramaModel"],function(e,t,i){var n=e.extend({initialize:function(){this.mod=new i;this.mod.bind("checkInteract:sucess",this.init.bind(this));this.mod.checkInteract({showid:PageConfig.showid,vid:PageConfig.videoId})},init:function(e){var t=this;if(e.interact){var i={1:"103",2:"101",3:"100",4:"104",5:"102"};this.log={pvid:PageConfig.videoId,showId:PageConfig.showid,pageType:i[PageConfig.playmode]};require.async(["playerPlugins"],function(i){if(1==PageConfig.playmode)t.initCard(i);else{t.initTimeLine(i);var n=new Date;var a=n.getTime();if(a>1476979203141&&a<1478793563275)if(e.first)$("li[_to=timeline]").trigger("click")}})}},initTimeLine:function(e){var i=e(PageConfig.videoId,"timeline",$("#timeline"),$("#movie_player")[0],this.log,function(){t.addTab("timeline","互动",false);ykPlyr.bind("player:timelineFadeStart",function(e){t.addTab("timeline","互动",true,function(){i.showPlugin(e.id)})})});var n=e(PageConfig.videoId,"pk",$("#actionInfo"),$("#movie_player")[0],this.log,function(){t.addTab("actionInfo","PK榜",false)})},initCard:function(e){var t=$("#module_basic_interact");var i=e(PageConfig.videoId,"cards",t,$("#movie_player")[0],this.log,function(){t.css({"margin-bottom":"20px"});ykPlyr.bind("player:timelineFadeStart",function(e){i.showPlugin(e.id)})})}});return n});define("tui/switchTab",["tui/event"],function(e){var t=function(t){this.op=t||{};this.op.slide=t.slide||false;this.op.linktab=t.linktab||false;this.op.clicktab=t.clicktab||false;if(!t.box)return;var a=this;var r=this.box=$(t.box);var o=this.tab=$(t.tab||".tab li",r);var s=this.panel=$(t.panel||".c",r);this.event=new e;this.size=o.length||s.length;this.loop=t.loop||0;this.current=i(o.filter(".current")[0]);if(t.slide){this.scroll=s.parent().parent();this.scroll.scrollLeft(0);s.eq(this.current).find(".lazyImg").loadImgSrc();s.parent().append(s.eq(0).clone());this.panel=$(t.panel||".c",r);this.width=s.width();this.delay=t.delay||700;this.loop=(this.loop||5e3)+this.delay;this.anilock=false}if(this.size<2)return;if(t.clicktab)o.click(function(e){e.preventDefault();a.go(i(this))});else{if(!t.linktab)o.click(function(e){e.preventDefault()});o.mouseenter(function(){n(a.timer,a.looptimer);var e=this;a.timer=setTimeout(function(){a.go(i(e))},200)}).mouseleave(function(){n(a.timer,a.looptimer);a.start()})}if(a.loop){a.check(t.clicktab?o:null);a.start()}};t.prototype={on:function(e,t){this.box.eventProxy(e,t);return this},bind:function(e,t){this.event.bind(e,t);return this},go:function(e,t){e=t?e:Math.min(Math.max(e,0),this.size-1);this.event.fire("before",[this.current,e,this]);if(this.op.slide){if(this.anilock){this.nextstep=function(){this.animate(e,t)};return}this.animate(e,t)}else{this.current=e%this.size;this.event.fire("change",[this.current,this]);this.tab.removeClass("current").eq(this.current).addClass("current");this.panel.hide().eq(this.current)[this.op.fade?"fadeIn":"show"](this.op.duration?this.op.duration:0);this.event.fire("after",[this.current,this])}},prev:function(e){this.go(this.current-1,e)},next:function(e){this.go(this.current+1,e)},start:function(e){var t=this;if(t.loop){n(t.looptimer);if(e)t.start();t.looptimer=setTimeout(function(){t.start();t.next(true)},t.loop)}},stop:function(){n(this.looptimer)},check:function(e){var t=this;(e||t.panel).mouseenter(function(){n(t.looptimer)}).mouseleave(function(){n(t.looptimer);t.start()})},animate:function(e,t){var i=this;var a=i.current;if(i.anilock||a==e)return;n(i.looptimer);var r=i.size,o=i.width,s=i.panel,l=i.scroll;var u=a>e?0:o;var c=a>e?o:0;e%=t?r+1:r;s.eq(e).show().find(".lazyImg").loadImgSrc();l.scrollLeft(c);i.tab.removeClass("current").eq(e%r).addClass("current");l.animate({scrollLeft:u},i.delay,"easeInOutQuad",function(){s.eq(a).hide();if(t&&e==r){e%=r;s.eq(0).show().find(".lazyImg").loadImgSrc();s.eq(r).hide()}l.scrollLeft(0);i.current=e;i.anilock=false;i.event.fire("after",[i.current,i]);if(i.nextstep){i.nextstep();i.nextstep=null}if(t)i.start()});i.anilock=true}};function i(e){if(e&&e.tagName){var t="a"==e.tagName.toLowerCase()?$(e):$(e).find("a");t=t.length?t:$(e);return(t.attr("rel")||t.attr("href").replace(/.*#(\d+)$/,"$1")||1)-1}else return 0}function n(e){var t=arguments;for(var i=0,n=t.length;i<n;i++){var e=t[i];if(e)clearTimeout(e)}return null}return t});define("page/find/play/model/listall",["tui/event","tui/net","tui/cookie","module/login/login"],function(e,t,i,n){var a=e.extend({initialize:function(){var e=this;a.superClass.initialize.call(e);this.domain=PageConfig.homeHost;e.op={callbackName:"callback",charset:"utf-8"}},getStatRank:function(e){var i=this;t.getJSON(this.domain+"related/statRank"+"?beta"+"&t="+(new Date).getTime(),e,function(e){if(1==e.error)i.trigger("getStatRank:success",[e])},i.op)},getSubRank:function(e){var t=this;$.ajax({type:"get",url:this.domain+"related/subRank"+"?beta"+"&t="+(new Date).getTime(),data:e,dataType:"jsonp",success:function(e){if(0==e.error)t.trigger("getSubRank:success",[e]);else t.trigger("getSubRank:fail",["module_basic_subrank"])},error:function(e){t.trigger("getSubRank:fail",["module_basic_subrank"])}})},getInfo:function(e){var t=this;$.ajax({type:"get",url:this.domain+"related/info"+"?beta"+"&t="+(new Date).getTime(),data:e,dataType:"jsonp",success:function(e){if(0==e.error)t.trigger("getInfo:success",[e]);else t.trigger("getInfo:fail",["module_basic_info"])},error:function(e){t.trigger("getInfo:fail",["module_basic_info"])}})},getStar:function(e){var i=this;t.getJSON(this.domain+"related/star"+"?beta"+"&t="+(new Date).getTime(),e,function(e){if(0==e.error)i.trigger("getStar:success",[e.data]);else i.trigger("getStar:fail",["module_basic_star"])},i.op)},getSubInfo:function(e){var t=this;$.ajax({type:"get",url:this.domain+"action/sub"+"?beta",data:e,dataType:"jsonp",beforeSend:function(e){var t=$.trim(i("_zpdtk"));if(t)return e.setRequestHeader("X-CSRF-TOKEN",t)},success:function(e){if(0==e.error)t.trigger("getSubInfo:success",[e.data]);else t.trigger("getSubInfo:fail",["module_basic_sub"])}})},createSub:function(e){var t=this;$.ajax({type:"get",url:this.domain+"action/createSub"+"?beta",data:e,beforeSend:function(e){var t=$.trim(i("_zpdtk"));if(t)return e.setRequestHeader("X-CSRF-TOKEN",t)},success:function(e){if(e.data)t.trigger("createSub:success",[]);else t.trigger("sub:error",[])}})},destroySub:function(e){var t=this;$.ajax({type:"get",url:this.domain+"action/destroySub"+"?beta",data:e,beforeSend:function(e){var t=$.trim(i("_zpdtk"));if(t)return e.setRequestHeader("X-CSRF-TOKEN",t)},success:function(e){if(e.data)t.trigger("destroySub:success",[]);else t.trigger("sub:error",[])}})},getChannels:function(e){var t=this;$.ajax({type:"get",url:"//x.youku.com/api/channel/getChannels",data:e,dataType:"jsonp",success:function(e){if(0==e.error_code){var i=[];for(var n in e.data)i.push(e.data[n]);t.trigger("getChannels:success",[i])}else t.trigger("getChannels:error",[i])},error:function(e){t.trigger("getChannels:fail",[])}})},getTopic:function(e){var t=this;$.ajax({type:"get",url:"//gh.youku.com/community/getTopicIds",data:e,dataType:"jsonp",success:function(e){if(0==e.errno)t.trigger("getTopic:success",[e.data]);else t.trigger("getTopic:fail",[])}})},getInfoM:function(e){var t=this;$.ajax({type:"get",url:this.domain+"related/videoinfo?t="+(new Date).getTime(),data:e,dataType:"jsonp",success:function(e){if(1==e.error)t.trigger("getInfoM:success",[e.data]);else t.trigger("getInfoM:fail",["module_basic_infom"])},error:function(e){t.trigger("getInfoM:fail",["module_basic_infom"])}})}});return a});define("page/find/play/relationlist/interest",["tui/view","tui/art","tui/net","tui/browser","module/login/login","module/global","page/find/play/model/listall","tui/switchTab","tui/slide2","tui/lazyImageLoader","tui/util/num"],function(e,t,i,n,a,r,o,s,l,u,c){t.helper("$Num",function(e){return c.field(e)});var d=e.extend({initialize:function(){var e=this;this.$wrap=$("#module_basic_interest");this.mod=new o;this.modelEvents(this.mod);if(this.$wrap.length>0)this.mod.getChannels({vcate_id:PageConfig.catId})},"{mod} getChannels:success":function(e){var i,n,a;i='<div class="play_wrapper modSwitch ">\n<div class="play_header clearfix">\n<h2>兴趣频道</h2>\n<ul class="t_tab">\n<% data.forEach(function(t, i){ %>           \n<li class="<%if(i==0){%> current <%}%>">\n<a href="<%=t[0].channel_url%>" rel="<%=i+1%>"  target="_blank"><img src="<%=t[0].icon_url%>"><%=t[0].channel_name%></a>\n</li>\n<% }); %>  	\n</ul>\n</div>\n<div class="play_content">\n<% data.forEach(function(t, i){ %> \n<div class="tab-c" <%if(i!=0){%> style="display:none;" <%}%>>\n<%if(i!=0){%>  \n<textarea class="lazyContent">\n<%}%>\n<div class="modPSlide mod_pslide " id="mdinst<%=i%>">\n<div class="mbtn prev" style="display: none;">\n<a href="#" class="iconfont" title="上一组"></a>\n</div>\n<div class="mbtn next" style="display: block;">\n<a href="#" class="iconfont" title="下一组"></a>\n</div>\n<ul class="panel">\n<% t.forEach(function(m, n){ %> \n<li class="yk-col4">\n<div class="yk-pack p-list ">\n<div class="p-thumb">\n<a href="<%=m.video_url%>" title="<%=m.video_title%>"  target="video"></a>\n<i class="bg"></i>\n<img class="quic"  src="<%=m.video_icon_url%>">\n</div>\n<ul class="p-info pos-bottom">\n<li class="status hover-hide">\n<span class="p-time">\n<i class="ibg"></i>\n<span><%=m.video_seconds%></span>\n</span>\n</li>\n</ul>\n<ul class="info-list">\n<li class="title short-title">\n<a href="<%=m.video_url%>" title="<%=m.video_title%>"  target="video"><%=m.video_title%></a>\n</li>\n<li>\n<span><%=$Num(m.video_vv)%>次播放</span>\n</li>\n</ul>\n</div>\n</li>	\n<% }); %> \n</ul>\n</div>\n<%if(i!=0){%>  \n</textarea>\n<%}%>	\n</div>\n<% }); %> 	\n</div>\n</div>';n=t.compile(i)({data:e});this.$wrap.html(n);a=new s({box:this.$wrap,tab:".t_tab li",panel:".tab-c",linktab:true});a.bind("change",function(e){var t=a.panel.eq(e);var i=t.children().eq(0);if(i.hasClass("lazyContent")){t.html(i.val());l(t)}});l(this.$wrap)},"{mod} getChannels:error":function(){this.$wrap.remove()}});return d});define("page/find/play/sub",["tui/view","tui/art","module/login/login","page/find/play/model/listall","module/subscribe/curvefly","tui/util/num"],function(e,t,i,n,a,r){var o=e.extend({el:$("#module_basic_sub"),initialize:function(e){var t=this;if(!this.$el.length||"4098051"==PageConfig.videoOwner)return;this.mod=new n;this.mod.bind("getSubInfo:success",this.render.bind(this));this.mod.bind("sub:error",this.subError.bind(this));this.mod.bind("createSub:success",this.subedcb.bind(this));this.mod.bind("destroySub:success",this.unSubedcb.bind(this));t.locked=false;window.ykPlyr.bind("player:onPlayerStartUpdate",function(){t.status()});$(document).bind("logchange",function(){if(t.locked)return;setTimeout(function(){t.status()},200)});this.status()},events:{"click .v-sub-action":"subed","click .v-sub-done":"unsub","mouseenter .v-sub-done":"enter","mouseleave .v-sub-done":"leave"},status:function(){this.mod.getSubInfo({vid:PageConfig.videoId,ownerid:PageConfig.videoOwner,showid:0,addtion:"1_1",pm:PageConfig.playmode})},subed:function(e){var t=this;var n='<a class="create-center" target="_blank" href="//i.youku.com/u/creative_center">创作中心</a>';if(t.locked)return;t.$subBtn=$(e.currentTarget);t.avatar=t.$subBtn.attr("data-img");i.login(function(){t.locked=true;i.checkLogin(function(){if(i.uid()==PageConfig.videoOwner)t.$subBtn.replaceWith(n);else t.mod.createSub({follow:PageConfig.videoOwner,addtion:"1_1"})})})},unsub:function(){var e=this;if(e.locked)return;i.login(function(){e.locked=true;e.mod.destroySub({follow:PageConfig.videoOwner,addtion:"1_1"})})},subedcb:function(){var e=this.$el.find(".sub-num");e.html(r.field(++this.subcount));this.animate(this.avatar,this.$subBtn);this.locked=false;this.$sub.removeClass("v-sub-action").addClass("v-sub-done").html("已订阅")},unSubedcb:function(){var e=this.$el.find(".sub-num");this.locked=false;e.html(r.field(--this.subcount));this.$sub.removeClass("v-sub-done").addClass("v-sub-action").html("订阅")},subError:function(){this.locked=false},enter:function(){this.$sub.html("取消订阅")},leave:function(){this.$sub.html("已订阅")},render:function(e){e.subnum=r.field(e.subcount);var n=this,a;var o='<%data.thumb=data.thumb||\'//static.youku.com/v1.0.153/user/img/head/64/999.jpg\'%>\n<dl id="subscription_wrap">\n<dt><a href="<%=data.url%>" target="_blank"><img src="<%=data.thumb%>"></a></dt>\n<dd>\n<a href="<%=data.url%>" class="sub-name" target="_blank" ><%=data.title%>\n<%if(data.verified==1&&data.disable){%>\n<img  class="dyh-icon" width="16" height="16" title="大鱼号" src="<%=data.icon%>"/>\n<%}%>\n</a>\n<%if(data.ischannel==1){%>\n<%if(!data.disable){%>\n<span class="channel-label">来自频道：\n<a target="_blank" href="<%=data.channelurl%>"><%=data.channelname%>\n<%if(data.verified==1){%>				\n<img width="14" class="dyh-icon" height="14" title="大鱼号" src="<%=data.icon%>"/>\n<%}%>	\n</a>\n</span>\n<%}%>\n<%}else{%>\n<a href="//zipindao.youku.com/zpd/strategy/" target="_blank" title="自频道等级：<%=data.level%>"><i class="lvl<%=data.level%>"></i></a>\n<%}%>\n</dd>	\n<%if(!data.description){%>\n<dd title="该频道虽然没有简介，但内容说不定特别精彩哦~">\n该频道虽然没有简介，但内容说不定特别精彩哦~\n</dd>\n<%}else{%>\n<dd title="<%=data.description%>">\n<%=data.description%>\n</dd>\n<%}%>\n<dd class="sub-des">\n<%if(data.subcount!=\'0\'){%>\n<span class="sub-num-wrap"><span data-num="<%=data.subcount%>" class="sub-num"><%=data.subnum%></span>粉丝</span>\n<%}%>\n<%if(data.isSelf){%>\n<a class="create-center" target="_blank" href="//i.youku.com/u/creative_center">创作中心</a>\n<%}else{%>\n<%if(data.subscribed){%>\n<a class="v-sub-btn v-sub-done"  data-img="<%=data.thumb%>"  href="javascript:void(0);">已订阅</a>\n<%}else{%>\n<a class="v-sub-btn v-sub-action" data-img="<%=data.thumb%>" href="javascript:void(0);">订阅</a>\n<%}%>\n<%}%>\n</dd>\n</dl>\n';e.isSelf=false;if(i.uid()==PageConfig.videoOwner)e.isSelf=true;e.disable=2==PageConfig.playmode||1==PageConfig.playmode;a=t.compile(o)({data:e});this.$el.html(a);n.subcount=e.subcount;this.$sub=this.$el.find(".v-sub-btn")},animate:function(e,t){var i=$("#qheader_sub_num").parent().offset();var n=i.left+8;var r=i.top;var o=t.offset();var s=o.left+8;var l=o.top-4;a.create(s,l,n,r,e,18).start()}});return o});define("module/stat/log",[],function(){var e={};e.logCookieKey="logCookieKey";e._addScript=function(e){var t=document.createElement("script");t.type="text/javascript";t.src=e;document.getElementsByTagName("head")[0].appendChild(t)};e.addScript=function(t){var i=new RegExp("@"+3+"@","g");var n=new RegExp("@"+4+"@","g");var a=new RegExp("@"+5+"@","g");var r=new RegExp("@"+6+"@","g");var o=new RegExp("@"+7+"@","g");var s=new RegExp("@"+8+"@","g");t=t.replace(i,"//lstat.youku.com/nstay.php").replace(n,"//e.stat.youku.com/hot/click").replace(a,"//r.l.youku.com/recclick").replace(r,"//p.l.youku.com/ugctagclick").replace(o,"//r.l.youku.com/rec_at_click").replace(s,"//r.l.youku.com/recpclick");t+="&="+Math.floor(1e6*Math.random());e._addScript(t)};e.log=function(t,i,n){if("number"!=typeof t)return;var a=n?n:0;var r="";if(0==a){var o=document.cookie;var s=o.split("; ");for(var l=0;l<s.length;l++){var u=s[l].split("=");if(e.logCookieKey==u[0]){if("invalid"!=u[1])r=unescape(s[l].substring(e.logCookieKey.length+1,s[l].length));break}}}r+="@"+t+"@";if("object"==typeof i){argUrl="";for(arg in i)argUrl+="&"+arg+"="+i[arg];if(4==t)document.cookie="__utmarea="+i.charset+";path=/;domain=youku.com";r+="?"+argUrl.substring(1,argUrl.length)+"^"}else{if(4==t)document.cookie="__utmarea="+i.substring(8,i.length)+";path=/;domain=youku.com";r+="?"+i+"^"}if(0==a)document.cookie=e.logCookieKey+"="+escape(r)+";path=/;domain=youku.com";else e.addScript(r)};e.readLogCookie=function(){var t=document.cookie;var i=t.split("; ");var n="";found=0;for(var a=0;a<i.length;a++){var r=i[a].split("=");if(e.logCookieKey==r[0]){found=1;if("invalid"==r[1])break;n=unescape(i[a].substring(e.logCookieKey.length+1,i[a].length));requestUrl=n.substring(0,n.length-1).split("^");for(var a=0;a<requestUrl.length;a++)e.addScript(requestUrl[a]);document.cookie=e.logCookieKey+"=invalid"+";path=/;domain=youku.com";break}}};return e});define("page/find/play/model/interaction/interactionBottom",["tui/event","tui/net","tui/cookie","module/login/login"],function(e,t,i,n){var a=e.extend({initialize:function(){var e=this;a.superClass.initialize.call(e);this.domain=PageConfig.homeHost;e.op={callbackName:"callback",charset:"utf-8"}},getVideoPlayInfo:function(e){var i=this;t.getJSON(this.domain+"action/getVideoPlayInfo"+"?beta"+"&timestamp="+(new Date).getTime(),e,function(e){if(1==e.error)i.trigger("getVideoPlayInfo:success",[e])},i.op)},updown:function(e){var t=this;e.timestamp=+new Date;$.ajax({type:"post",url:this.domain+"action/updown?beta",data:e,beforeSend:function(e){var t=$.trim(i("_zpdtk"));if(t)return e.setRequestHeader("X-CSRF-TOKEN",t)},success:function(e){if(0==e.error||e.error==-1||2==e.error)t.trigger("updown:success",[e.data]);else t.trigger("updown:error",[])}})},addFav:function(e){var t=this;e.timestamp=+new Date;$.ajax({type:"post",url:this.domain+"action/addFav?beta",data:e,beforeSend:function(e){var t=$.trim(i("_zpdtk"));if(t)return e.setRequestHeader("X-CSRF-TOKEN",t)},success:function(e){if(0==e.error||e.error==-1||2==e.error)t.trigger("addFav:success",[e.error]);else t.trigger("addFav:error",[])}})}});return a});define("page/find/play/interaction/iku",["tui/class","tui/cookie"],function(e,t){var i="";var n=PageConfig.homeHost;function a(){$.ajax({url:n+"user/authCode",dataType:"jsonp",success:function(e){if(!e.error&&e.data&&e.data.authCode)i=e.data.authCode+"|"}})}setTimeout(function(){a()},1e3);$(document).on("logchange",function(){a()});var r=e.extend({initialize:function(){this.loadIkuJs("auto")},loadIkuJs:function(e,t){if("undefined"==typeof window.ikuNewExecute||"undefined"==typeof window.getP2PStateFromIku)$.getScript("//static.youku.com/index/js/ikuAdapterNew.js",function(){t&&t();setTimeout(function(){if("function"==typeof window.getP2PStateFromIku)getP2PStateFromIku()},500)});return true},ikuExecuteFrompc:function(e){var n=true;if(!e.from||!e.action||"video"!=e.from&&"video"==e.action&&!e.sid||"video"!=e.from&&"show"!=e.from&&"show"==e.action&&!e.sid){n=0;if("function"===typeof callback){callback(n);return false}else return n}if("undefined"==typeof window.ikuNewExecute)this.loadIkuJs("click");setTimeout(function(){var n=0;var a=!e.callback?"":e.callback;var r=!e.secne?"":e.secne;var o=e.from;var s=e.action;var l="";var u=!t("ykss")?"":t("ykss");if("video"==s){var c="";var d="";if("video"==o){if(window.ykPlyr&&"function"==typeof window.ykPlyr.PlayerInfo){var f=window.ykPlyr.PlayerInfo();if(f){c=null!=f.langVid?f.langVid:f.vidEncoded;d=!f.quality?"mp4":f.quality}}c=""!=c?c:window.videoId2}if(!c&&e.sid)c=e.sid;if(c){d=!d?"mp4":d;var p="//v.youku.com/v_show/id_"+c+".html";l="iku://|video|"+p+"|quality="+d+"|ykss="+u+"|"+i}else n=0}else if("show"==s){var h="";var d="";if("video"==o){if(window.ykPlyr&&"function"==typeof window.ykPlyr.PlayerInfo){var f=window.ykPlyr.PlayerInfo();if(f)d=!f.quality?"mp4":f.quality}h="undefined"!=typeof PageConfig.showid_en?"z"+PageConfig.showid_en:""}else if("show"==o)h="undefined"!=typeof window.g_config.id?window.g_config.id:"";if(e.sid)h=e.sid;if(h){d=!d?"mp4":d;l="iku://|vshow|download|"+h+"|quality="+d+"|ykss="+u+"|"+i}else n=0}else if("play"==s){var c="";if("video"==o){if(window.ykPlyr&&"function"==typeof window.ykPlyr.PlayerInfo){var f=window.ykPlyr.PlayerInfo();if(f)c=null!=f.langVid?f.langVid:f.vidEncoded}c=""!=c?c:window.videoId2}if(e.sid)c=e.sid;if(c)l="iku://|play|web|videoid|playerror|"+c+"|ykss="+u+"|"+i;else n=0}else if("adddesktop"==s){var h="";var d="";if("video"==o){if(window.ykPlyr&&"function"==typeof window.ykPlyr.PlayerInfo){var f=window.ykPlyr.PlayerInfo();if(f)d=!f.quality?"mp4":f.quality}h="undefined"!=typeof PageConfig.showid_en?"z"+PageConfig.showid_en:""}if(e.sid)h=e.sid;if(h){d=!d?"mp4":d;l="iku://|vshow|shortcut|"+h+"|quality="+d+"|ykss="+u+"|"+i}else n=0}var m=function(e){n=-1;var t="//iku.youku.com/pc/index?tp=v&ori=ykplay&id="+window.videoId2;if(d)t+="&q="+d;var i="";if("undefined"==typeof e||false==e||""==e||e.indexOf("//iku.youku.com")==-1)i=t;else i=e;var a=document.createElement("iframe");a.width=0;a.height=0;a.src=i;document.body.appendChild(a);setTimeout(function(){document.body.removeChild(a)},1e4)};var v=function(e){n=1};if("Microsoft Internet Explorer"==window.navigator.appName&&("MSIE 6."==navigator.appVersion.match(/MSIE 6./i)||"MSIE 7."==navigator.appVersion.match(/MSIE 7./i)))ikuNewExecute(l,r,v,m);else{var g=ikuNewExecute(l,r);if("ok"!=g)m(g);else v(g)}if("function"===typeof a)a(n);else return n},200)}});var o=new r;return o});define("tui/common",[],function(){var e={speed:400,init:function(e){if(jQuery){var t=this;var i=jQuery(".scroll-"+e);var n=parseInt(i.offset().top)-65;if(i.length)jQuery("html, body").stop().animate({scrollTop:n},t.speed,function(){location.hash=e})}}};var t=function(){var e=document.createElement("div");return function(t){var i=t.charAt(0).toUpperCase()+t.slice(1),n="Webkit Moz O ms",a=n.split(" "),r=(t+" "+a.join(i+" ")+i).split(" ");for(var o in r){var t=r[o];if(!!!~(""+t).indexOf("-")&&void 0!==e.style[t])return true}return false}}();function i(e){switch(typeof e){case"undefined":return true;case"string":if(0==$.trim(e).length)return true;break;case"boolean":if(!e)return true;break;case"number":if(0===e)return true;break;case"object":if(null===e)return true;if(void 0!==e.length&&0==e.length)return true;for(var t in e)return false;return true}return false}var n={init:function(){var e="vv";if(1==window.paid)e+=",permission";nova_request(getVideoPageInfoCallback,"/QVideo/~ajax/getVideoPlayInfo",{id:videoId,sid:showid,type:e,catid:catId})},callback:function(){if(null==info)return;try{if("object"!=typeof info)info=JSON.parse(info)}catch(e){return}if(1==window.paid&&info.permission)if(info.permission==-1)Interact.disableUpDowned();else Interact.initUpDowned();else Interact.initUpDowned()}};var a=function(e){num=e.toString();var t=Math.abs(num).toString();if(t.length<4)return num;var i="";if(num.indexOf(".")!=-1)var i="."+num.split(".")[1];var n=t.length;var a=n%3;var r=[];var o=0==a?3:a;r[0]=t.slice(0,o);var s=1;while(o+3<=n){r[s++]=t.slice(o,o+3);o+=3}r=r.join(",");if(0===num.indexOf("-"))r="-"+r;return r+i};var r={url:"Bad url, watch browser console error.",Local:window.Local,err:function(e){if(!window["console"])window["console"]={log:function(){},clear:function(){},debug:function(){},error:function(){},info:function(){},count:function(){},time:function(){},trace:function(){},warn:function(){}};if(window.console&&window.console.error)window.console.error("[cdn function error] "+e+".")},cdn:function(e,t){if("/"!=e.charAt(0)){this.err("@param path: relative to root start by /");return this.url}if(!this.Local){this.err("@see BETA-18932: template funciton {nova->globaJS}");return this.url}var i="RELEASE_TAG",n=this.Local[i];if(!n){this.err("@see local: "+i+" not defined");return this.url}i=t.toUpperCase()+"SERVER",server=this.Local[i];if(!server){this.err("@see local: "+i+" not defined.");return this.url}if(!server.match(/^(http|https)/)){this.err("@see local: "+i+" is server, add protocol");return this.url}if(server.match(/\/$/)){this.err("@see local: "+i+" is server, not ending by /");return this.url}this.url=server+"/"+n+e;return this.url},cdn_jsurl:function(e){return this.cdn(e,"js")},cdn_cssurl:function(e){return this.cdn(e,"css")},cdn_imgurl:function(e){return this.cdn(e,"img")}};var o=function(e){if("undefined"==typeof e||null==e||"null"==e||0==e.length)return"";return e.replace(/[<>&"]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[e]})};var s=function(e){var t,i,n;var a,r;var o=[];i=e.length;t=0;while(t<i){n=e.charCodeAt(t++);switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o.push(e.charAt(t-1));break;case 12:case 13:a=e.charCodeAt(t++);o.push(String.fromCharCode((31&n)<<6|63&a));break;case 14:a=e.charCodeAt(t++);r=e.charCodeAt(t++);o.push(String.fromCharCode((15&n)<<12|(63&a)<<6|(63&r)<<0))}}return o.join("")};var l=function(e){if(!e)return"";var t="ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789+/"+"=";var i="";var n,a,r;var o,l,u,c;var d=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{o=t.indexOf(e.charAt(d++));l=t.indexOf(e.charAt(d++));u=t.indexOf(e.charAt(d++));c=t.indexOf(e.charAt(d++));n=o<<2|l>>4;a=(15&l)<<4|u>>2;r=(3&u)<<6|c;i+=String.fromCharCode(n);if(64!=u)i+=String.fromCharCode(a);if(64!=c)i+=String.fromCharCode(r)}while(d<e.length);return s(i)};var u=function(e){if(!e)return"";e=e.toString();var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var i=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);var n,a,r;var o,s,l;r=e.length;a=0;n="";while(a<r){o=255&e.charCodeAt(a++);if(a==r){n+=t.charAt(o>>2);n+=t.charAt((3&o)<<4);n+="==";break}s=e.charCodeAt(a++);if(a==r){n+=t.charAt(o>>2);n+=t.charAt((3&o)<<4|(240&s)>>4);n+=t.charAt((15&s)<<2);n+="=";break}l=e.charCodeAt(a++);n+=t.charAt(o>>2);n+=t.charAt((3&o)<<4|(240&s)>>4);n+=t.charAt((15&s)<<2|(192&l)>>6);n+=t.charAt(63&l)}return n};var c=function(e){if(!e)return"";if(e<<2>0)var t="U"+u(e<<2);else var t="U"+u(4*e);return t};var d=function(){var e="";var t=document.cookie.split(";");var i=arguments.length;for(var n=0;n<t.length;n++){var a=t[n];while(" "==a.charAt(0))a=a.substring(1,a.length);if(0==a.indexOf("u=")||0==a.indexOf("k="))var r=a;if(0==a.indexOf("_l_lgi="))var o=a;if(0==a.indexOf("yktk=")){var s=l(decodeURIComponent(a).split("|")[3]);if(s.indexOf(",")>-1&&s.indexOf("nn:")>-1&&s.indexOf("id:")>-1){var e=s.split(",")[1].split(":")[1];var u=s.split(",")[0].split(":")[1];if(""!=e)break}}}if(""==e||""==u){if(r){var e=r.substring(2,r.length);if("__LOGOUT__"==e)e="";else e=decodeURIComponent(e)}if(o)var u=o.substring(7,o.length)}if(0==i)return""==e?"":e;else if(1==i&&"all"==arguments[0])return{username:e,userid:u}};var f=function(){var e=$("#div_login");if(e.length>0)e[0].innerHTML="";var t=$("#login_div");if(t.length>0)t.hide();if("undefined"!=typeof PageConfig.paid&&"1"==PageConfig.paid)window.top.location.reload()};var p=function(e,t){var i=$("#"+e)[0];i.select();try{therange=void 0;if(1==PageConfig.copytoclip){if(i.createTextRange)therange=i.createTextRange();therange=therange?therange:document;if(therange.execCommand("Copy")){if(false!=t)alert("复制成功。现在您可以粘贴（Ctrl+v）到Blog 或BBS中了。");return}}}catch(n){}alert("您使用的浏览器不支持此复制功能，请使用Ctrl+C或鼠标右键。")};var h=function(e){return t(e);function t(e){var t="";var n="";n=i(e);return n}function i(e){var t=false;var i="";while(!t){i=n(20);hstr=e+i;hashcash=a(hstr);if("00"==hashcash.substring(0,2))t=true}return i}function n(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";var i="";for(var n=0;n<e;n++){var a=Math.floor(Math.random()*t.length);i+=t.substring(a,a+1)}return i}function a(e){function t(e,t){var i=e<<t|e>>>32-t;return i}function i(e){var t="";var i;var n;var a;for(i=0;i<=6;i+=2){n=15&e>>>4*i+4;a=15&e>>>4*i;t+=n.toString(16)+a.toString(16)}return t}function n(e){var t="";var i;var n;for(i=7;i>=0;i--){n=15&e>>>4*i;t+=n.toString(16)}return t}function a(e){e=e.replace(/\r\n/g,"\n");var t="";for(var i=0;i<e.length;i++){var n=e.charCodeAt(i);if(n<128)t+=String.fromCharCode(n);else if(n>127&&n<2048){t+=String.fromCharCode(192|n>>6);t+=String.fromCharCode(128|63&n)}else{t+=String.fromCharCode(224|n>>12);t+=String.fromCharCode(128|63&n>>6);t+=String.fromCharCode(128|63&n)}}return t}var r;var o,s;var l=new Array(80);var u=1732584193;var c=4023233417;var d=2562383102;var f=271733878;var p=3285377520;var h,m,v,g,y;var b;e=a(e);var _=e.length;var w=new Array;for(o=0;o<_-3;o+=4){s=e.charCodeAt(o)<<24|e.charCodeAt(o+1)<<16|e.charCodeAt(o+2)<<8|e.charCodeAt(o+3);w.push(s)}switch(_%4){case 0:o=2147483648;break;case 1:o=8388608|e.charCodeAt(_-1)<<24;break;case 2:o=32768|(e.charCodeAt(_-2)<<24|e.charCodeAt(_-1)<<16);break;case 3:o=128|(e.charCodeAt(_-3)<<24|e.charCodeAt(_-2)<<16|e.charCodeAt(_-1)<<8)}w.push(o);while(14!=w.length%16)w.push(0);w.push(_>>>29);w.push(4294967295&_<<3);for(r=0;r<w.length;r+=16){for(o=0;o<16;o++)l[o]=w[r+o];for(o=16;o<=79;o++)l[o]=t(l[o-3]^l[o-8]^l[o-14]^l[o-16],1);h=u;m=c;v=d;g=f;y=p;for(o=0;o<=19;o++){b=4294967295&t(h,5)+(m&v|~m&g)+y+l[o]+1518500249;y=g;g=v;v=t(m,30);m=h;h=b}for(o=20;o<=39;o++){b=4294967295&t(h,5)+(m^v^g)+y+l[o]+1859775393;y=g;g=v;v=t(m,30);m=h;h=b}for(o=40;o<=59;o++){b=4294967295&t(h,5)+(m&v|m&g|v&g)+y+l[o]+2400959708;y=g;g=v;v=t(m,30);m=h;h=b}for(o=60;o<=79;o++){b=4294967295&t(h,5)+(m^v^g)+y+l[o]+3395469782;y=g;g=v;v=t(m,30);m=h;h=b}u=4294967295&u+h;c=4294967295&c+m;d=4294967295&d+v;f=4294967295&f+g;p=4294967295&p+y}var b=n(u)+n(c)+n(d)+n(f)+n(p);return b.toLowerCase()}};return{smoothScroll:e,getVideoPageInfo:n,numberFormat:a,cdn:r,html2Escape:o,supportStyle:t,get_username:d,decode64:l,encodeUid:c,videoLogin:f,hcbt:h,empty:i,copyToClipboard:p}});define("page/find/play/interaction/interactionBottom",["tui/view","tui/event","tui/common","page/find/play/interaction/iku","tui/cookie","module/login/login","page/find/play/model/interaction/interactionBottom","module/stat/log"],function(e,t,i,n,a,r,o,s){var l=e.extend({faved:false,fav_process:false,curpanel:"",updowntimeischange:false,tcode:"",scode:"",fn:{updown:"fn_updown",up:"fn_up",down:"fn_down",share:"fn_share",share2:"fn_share2",download:"fn_download",phone_see:"fn_phone_see",download_disable:"fn_download_disabled",pcdown:"fn_pc_download",pcdown_show:"fn_pc_show_download",favorite:"fn_favorite",favo:"fn_favo",jump_allcomment:"fn_comment"},panel:{share:"panel_share",down:"panel_down",phone_see:"panel_phone_see",favorite:"panel_favorite",favo:"panel_favo",handle_share:"handle_share",handle_stat:"handle_stat",handle_down:"handle_down",handle_phone:"handle_phone",handle_favorite:"handle_favorite"},el:$("#vpactionv5_wrap"),self:this,initialize:function(){this._model=new o;this.modelEvents(this._model,"model");this._model.bind("getVideoPlayInfo:success",this.getVideoPageInfoCallback.bind(this));this._model.bind("updown:success",this.updownCallback.bind(this));this._model.bind("addFav:success",this.addFavCallBack.bind(this));window.ykPlyr.bind("player:onPlayerStartUpdate",this._update.bind(this));this.bind();this.initMoudle()},events:{},_update:function(){this._updateUpdownvv();this._updateShareUrl()},_updateShareUrl:function(){},_updateUpdownvv:function(){var e={vid:PageConfig.videoId,showid:PageConfig.showid,param:[]};$("#module-interact").find("div[id^='module_basic_']").each(function(t){var i=$(this).attr("id").replace("module_basic_","");e["param"][t]=i});this._model.getVideoPlayInfo(e)},initMoudle:function(){this._updateUpdownvv();this._setQRCode();this._addQQShareParam()},_addQQShareParam:function(){var e=i.get_username("all");var t=e.userid>0?e.userid:0;var n="//mini.cron.youku.com/web/www/qq_share/qq_cback.php?userId="+t;var a=$("#s_qq_haoyou1").attr("href");$("#s_qq_haoyou1").attr("href",a+"&callback="+n)},_setQRCode:function(){$("#panel_phone_see .panel-con .ps-title").eq(0).after('<div class="ps-twocode" id="phone_dimcode_pic"><i class="ico_play_dimcode"></i><img id="phone_qrcode_img" src="'+this._getQRCodeURL()+'"></div>');$("#dimcode_pic .ico_play_dimcode ").eq(0).after('<img id="qrcode_img" src="'+this._getQRCodeURL()+'">')},_getQRCodeURL:function(){return"//qr.youku.com/qr?sc=video_play&ac=open&ps={vid:'"+PageConfig.videoId2+"',spot:"+this.getWatchTime()+",tp:1,cp:0,cpp:100049}&size=123"},getVideoPageInfoCallback:function(e){var t=e.data;var n=$("#fn_favorite");if(1==PageConfig.paid&&t.permission||1==t.disableUpDown)if(t.permission==-1)this.disableUpDowned();
else{this.initUpDowned();if($("#upVideoTimes").length>0)$("#upVideoTimes").html(t.updown.up);if($("#downVideoTimes").length>0)$("#downVideoTimes").html(t.updown.down)}else{this.initUpDowned();if($("#upVideoTimes").length>0)$("#upVideoTimes").html(t.updown.up);if($("#downVideoTimes").length>0)$("#downVideoTimes").html(t.updown.down)}if(n.length&&t.favo){n.addClass("fn").addClass("fn-return");n.find(".label").html("已收藏")}if($("#videoTotalPV").length>0)$("#videoTotalPV").html('<em class="num">'+t.stat.vv+"</em>");this.tcode=t.ss;this.scode=i.hcbt(this.tcode)},bind:function(){var e=this;if($("#"+this.fn.favo).length>0)$("#"+this.fn.favo).click(function(){s.log(1,"tp=1&cp=4007354&cpp=1000217");if(e.faved||e.fav_process)return;var t="1_1";switch(PageConfig.playmode){case 1:t="1_1";break;case 2:t="1_3";break;case 3:t="1_2";break;case 4:t="1_5";break;case 5:t="1_4"}var i="";if("undefined"!=typeof PageConfig.folderId)i=PageConfig.folderId;var n="1";var a="";if("undefined"!=typeof PageConfig.catId)a=PageConfig.catId;var r=0;if("undefined"!=typeof showid)r=showid;e.favParams={vid:PageConfig.videoId,fid:i,showid:PageConfig.showid,deviceid:n,addition:t,channelId:a};e._model.addFav(e.favParams);e.fav_process=true});if($(".form_btnsub_s").length>0)$(".form_btnsub_s").each(function(e){$(this).click(function(){var t=$($(".panel-share input")[e]).attr("id");i.copyToClipboard(t)})});if($("#"+this.fn.share2).length>0)$("#"+this.fn.share2).click(function(){s.log(1,"tp=1&cp=4004713&cpp=1000217");if(""==e.curpanel){e.showSharePanel();i.smoothScroll.init("paction")}else if("share"==e.curpanel)e.hideSharePanel();else if("down"==e.curpanel){e.hideDownloadPanel();e.showSharePanel();i.smoothScroll.init("paction")}else if("phone"==e.curpanel){e.hidePhoneSeePanel();e.showSharePanel();i.smoothScroll.init("paction")}if($("#"+e.panel.handle_share))$("#"+e.panel.handle_share).click(function(){e.hideSharePanel()})});var t=$("#"+this.fn.download);if(t.length>0){var a=navigator.userAgent;var r="";if(a.indexOf("iPad")!=-1){r="iPad";t[0].onclick=function(){window.open("//mobile.youku.com/index/wireless","target=_blank");return false}}else if(a.indexOf("iPhone")!=-1){r="iPhone";t[0].onclick=function(){window.open("//mobile.youku.com/index/wireless","target=_blank");return false}}else if(a.indexOf("Android")!=-1){r="Android";t[0].onclick=function(){window.open("//mobile.youku.com/index/wireless","target=_blank");return false}}if(""==r){t.click(function(){s.log(1,"tp=1&cp=4009345&cpp=1000217");if(""==e.curpanel){e._checkDownState();e.showDownloadPanel();i.smoothScroll.init("paction")}else if("share"==e.curpanel){e.hideSharePanel();e.showDownloadPanel();i.smoothScroll.init("paction")}else if("down"==e.curpanel)e.hideDownloadPanel();else if("phone"==e.curpanel){e.hidePhoneSeePanel();e.showDownloadPanel();i.smoothScroll.init("paction")}});if($("#"+e.panel.handle_down).length>0)$("#"+e.panel.handle_down).click(function(){e.hideDownloadPanel()});var o=true;if($("#"+e.fn.pcdown).length>0)$("#"+e.fn.pcdown).click(function(){e._downPCLoading();var t={from:"video",action:"video",secne:"ywebplayerbottom",callback:e._downPCCallback};n.ikuExecuteFrompc(t)});if($("#"+e.fn.pcdown_show))$("#"+e.fn.pcdown_show).click(function(){e._downPCLoading();var t={from:"video",action:"show",secne:"ywebplayerbottom",callback:e._downPCCallback};n.ikuExecuteFrompc(t)})}}if($("#"+this.fn.jump_allcomment).length>0)$("#"+this.fn.jump_allcomment).click(function(){if("ico-fn-new-comment"==$("#video_comment_number .ico i").attr("class"))alert("starComming.redPointClick()");else alert("Common.smoothScroll.init('comment');loadCommentNew(true);")});if($("#"+this.fn.phone_see).length>0)$("#"+this.fn.phone_see).click(function(){if(""==e.curpanel){e.showPhoneSeePanel();i.smoothScroll.init("paction")}else if("phone"==e.curpanel)e.hidePhoneSeePanel();else if("share"==e.curpanel){e.hideSharePanel();e.showPhoneSeePanel();i.smoothScroll.init("paction")}else if("down"==e.curpanel){e.hideDownloadPanel();e.showPhoneSeePanel();i.smoothScroll.init("paction")}});if($("#"+this.panel.phone_see).length>0)if($("#"+e.panel.handle_phone))$("#"+e.panel.handle_phone).click(function(){e.hidePhoneSeePanel()})},updown:function(){var e=$("#"+this.fn.updown).attr("disable");if("true"==e)return false;var t="1_1";switch(PageConfig.playmode){case"1":t="1_1";break;case"2":t="3_1";break;case"3":t="2_1";break;default:t="1_1"}var i="1_2";switch(PageConfig.playmode){case"1":i="1_2";break;case"2":i="3_2";break;case"3":i="2_2";break;default:i="1_2"}if("up"==this.updownType)var n=t;else var n=i;if(""!=this.tcode&&""!=this.scode)this._model.updown({vid:PageConfig.videoId,type:this.updownType,t:this.tcode,s:this.scode,addtion:n});else this._model.updown({vid:PageConfig.videoId,type:this.updownType,addtion:n})},updownCallback:function(e,t){var i=this;var n="顶";if("down"==i.updownType)n="踩";var r=0;if(e==-1)r=0;else if("down"==i.updownType)r=-1;else r=1;if(i.updowntimeischange)a("updown_"+PageConfig.videoId2,r,{expires:1});else i.showUpDowned(r)},disableUpDowned:function(e,t){$("#fn_updown").addClass("fn-disabled");$("#fn_updown").attr("disabled",true);$("#fn_updown").html('<div class="fn-up disableup" disabled="true">\n<div>\n<span class="icon">\n<i class="ico-fn-up"></i>\n</span>\n</div>\n<div class="updown-forbid-tips">该视频暂不支持顶踩</div>\n</div>\n<div class="fn-up disabledown" disabled="true">\n<div>\n<span class="icon">\n<i class="ico-fn-down"></i>\n</span>\n</div>\n<div class="updown-forbid-tips">该视频暂不支持顶踩</div>\n</div>\n')},initUpDowned:function(){var e=this;if(false!==(act=a("updown_"+PageConfig.videoId2))&&null!=act)return e.showUpDowned(act);else{var t=$("#fn_updown");var i=$("#fn_up");var n=$("#fn_down");if(i.length>0&&n.length>0){var o="";var l="";if(r.isLogin()){o="tp=1&cp=4009818&cpp=1000217";l="tp=1&cp=4009820&cpp=1000217"}else{o="tp=1&cp=4009817&cpp=1000217";l="tp=1&cp=4009819&cpp=1000217"}i.click(function(){s.log(1,o);e.updownType="up";e.showUpDownedNoResult(1,e);e.updown(e)});n.click(function(){s.log(1,l);e.updownType="down";e.showUpDownedNoResult(-1,e);e.updown(e)})}}},showUpDowned:function(e){if(0==e||e==-1||1==e){var t=$("#"+this.fn.updown);var n=0;if($("#upVideoTimes"))n=parseInt($("#upVideoTimes")[0].innerHTML.replace(/\,/g,""));var r=0;if($("#downVideoTimes"))r=parseInt($("#downVideoTimes")[0].innerHTML.replace(/\,/g,""));if(e==-1){r=i.numberFormat(r+1).substring(0,10);t[0].innerHTML='<div class="fn-up" id="fn_up"><div title="顶:'+n+'"><span class="ico" data-stat-role="ck"><i class="ico-fn-up"></i></span><span class="num" id="upVideoTimes" data-stat-role="ck">'+n+"</span></div></div>"+'<div class="fn-down fn-return" id="fn_down"><div title="踩:'+r+'"><span class="ico" data-stat-role="ck"><i class="ico-fn-down"></i></span><span class="num" id="downVideoTimes" data-stat-role="ck">'+r+"</span></div></div>"}else if(1==e){n=i.numberFormat(n+1).substring(0,10);t[0].innerHTML='<div class="fn-up fn-return" id="fn_up"><div title="顶:'+n+'"><span class="ico" data-stat-role="ck"><i class="ico-fn-up"></i></span><span class="num" id="upVideoTimes" data-stat-role="ck">'+n+"</span></div></div>"+'<div class="fn-down" id="fn_down"><div title="踩:'+r+'"><span class="ico" data-stat-role="ck"><i class="ico-fn-down"></i></span><span class="num" id="downVideoTimes" data-stat-role="ck">'+r+"</span></div></div>"}$("#"+this.fn.updown).attr("disabled","true");a("updown_"+PageConfig.videoId2,e,{expires:1})}},showUpDownedNoResult:function(e,t){if((0==e||e==-1||1==e)&&!$("#"+this.fn.updown).hasClass("fn-return")){var n=$("#"+this.fn.updown);var a=0;if($("#upVideoTimes").length>0)a=parseInt($("#upVideoTimes")[0].innerHTML.replace(/\,/g,""));var r=0;if($("#downVideoTimes"))r=parseInt($("#downVideoTimes")[0].innerHTML.replace(/\,/g,""));if(e==-1){r=i.numberFormat(r+1).substring(0,10);n[0].innerHTML='<div class="fn-up" id="fn_up"><div title="顶:'+a+'"><span class="ico" data-stat-role="ck"><i class="ico-fn-up"></i></span><span class="num" id="upVideoTimes" data-stat-role="ck">'+a+"</span></div></div>"+'<div class="fn-down fn-return" id="fn_down"><div title="踩:'+r+'"><span class="ico" data-stat-role="ck"><i class="ico-fn-down"></i></span><span class="num" id="downVideoTimes" data-stat-role="ck">'+r+"</span></div></div>"}else if(1==e){a=i.numberFormat(a+1).substring(0,10);n[0].innerHTML='<div class="fn-up fn-return" id="fn_up"><div title="顶:'+a+'"><span class="ico" data-stat-role="ck"><i class="ico-fn-up"></i></span><span class="num" id="upVideoTimes" data-stat-role="ck">'+a+"</span></div></div>"+'<div class="fn-down" id="fn_down"><div title="踩:'+r+'"><span class="ico" data-stat-role="ck"><i class="ico-fn-down"></i></span><span class="num" id="downVideoTimes" data-stat-role="ck">'+r+"</span></div></div>"}t.updowntimeischange=true}},addFavCallBack:function(e,t){var n=this;n.fav_process=false;favoriteHtml='<a href="//faxian.youku.com/favorite" target="_blank" charset="hz-4007613-1000217"><span class="ico"><i class="ico-fn-collect"></i></span><span class="label">已收藏</span></a>';var a=$("#"+n.fn.favo);if(e==-1){r.login(function(){n._model.addFav(n.favParams);i.videoLogin()});return}if("down"==n.curpanel)n.hideDownloadPanel();if(e==-2){n.faved=true;$("#"+n.fn.favorite)[0].className+=" fn-return";a[0].innerHTML=favoriteHtml;return}else if(e==-3)return;else if(e==-4)return;n.faved=true;$("#"+n.fn.favorite)[0].className+=" fn-return";a[0].innerHTML=favoriteHtml;var o=[4000477,4000491,4000484,4007645,4007644];var l=parseInt(PageConfig.playmode);if(l>0&&l<=o.length)s.log(1,"tp=1&cp="+o[l-1]+"&cpp=1000217")},showSharePanel:function(){this.addExpand(this.fn.share);if($("#share_dimcode_pic").length>0)$("#share_dimcode_pic").html('<img id="share_qrcode_img" src="'+this._getQRCodeURL()+'">');$("#"+this.panel.share).css("display","block");this.curpanel="share"},hideSharePanel:function(){$("#"+this.fn.share).removeClass("fn-expand");$("#"+this.panel.share).css("display","none");this.curpanel=""},showDownloadPanel:function(){$("#"+this.fn.download).addClass("fn-expand");$("#"+this.fn.download).addClass("fn-return");$("#"+this.panel.down).css("display","block");this.curpanel="down";this.showDimcode(4007653,1000217,"pc-qr-1");$("#qrcode_img").attr("src",this._getQRCodeURL())},hideDownloadPanel:function(){$("#"+this.fn.download).removeClass("fn-expand");$("#"+this.fn.download).removeClass("fn-return");$("#"+this.panel.down).css("display","none");this.curpanel=""},showPhoneSeePanel:function(){this.curpanel="phone";this.showDimcode(4010588,1000957,"pc-qr-1","phone");if($("#phone_dimcode_pic").length>0)$("#phone_dimcode_pic").html('<img id="phone_qrcode_img" src="'+this._getQRCodeURL()+'">');$("#"+this.fn.phone_see).addClass("fn-expand");$(".panel-phone-see").css("display","block")},hidePhoneSeePanel:function(){$("#"+this.fn.phone_see).removeClass("fn-expand");this.curpanel="";$(".panel-phone-see").css("display","none")},addHover:function(e){if(e.className.indexOf("fn-hover")==-1)e.className+=" fn-hover";return this},removeHover:function(e){e.className=e.className.replace(/ fn-hover/,"");return this},addExpand:function(e){return $("#"+e).addClass("fn-expand")},removeExpand:function(e){e.className=e.className.replace(/ fn-expand/,"");return this},_addEvent:function(e,t,i){if(window.addEventListener)if("mouseenter"==t||"mouseleave"==t){function n(e){var t=e.currentTarget,n=e.relatedTarget;if(!a(t,n)&&t!=n)i.call(e.currentTarget,e)}function a(e,t){try{return e.contains?e!=t&&e.contains(t):!!(16&e.compareDocumentPosition(t))}catch(i){}}if("mouseenter"==t)e.addEventListener("mouseover",n,false);else e.addEventListener("mouseout",n,false)}else e.addEventListener(t,i,false);else if(window.attachEvent)e.attachEvent("on"+t,i)},_delEvent:function(e,t,i){if(window.addEventListener)e.removeEventListener(t,i,true);else if(window.attachEvent)e.detachEvent("on"+t,i)},moduleId:"",ModuleShowVR:function(e){if(!e)return false;this.moduleId=e;var t="//index.youku.com/dataapi/getData?num=100006&sid="+window.showid_en+"&jsoncallback=Interact.ModuleShowVRCallback";Nova.addScript(t)},ModuleShowVRCallback:function(e){if(e&&e.result&&Interact.moduleId&&e.result.index)document.getElementById(Interact.moduleId).innerHTML='<span class="ico__VR"></span><span class="num" >'+numberFormat(e.result.index)+"</span>";else{document.getElementById(Interact.moduleId).parentNode.innerHTML+='<span class="vr"><span class="ico__VR"></span>暂无</span>';document.getElementById(Interact.moduleId).parentNode.removeChild(document.getElementById(Interact.moduleId))}},showDimcode:function(e,t,i,n){var a=this.getWatchTime();this.parseWatchTime(a)},getWatchTime:function(){var e=0;try{var t=window.ykPlyr.PlayerInfo();e=t["time"]?parseInt(t["time"]):0}catch(i){}return e},parseWatchTime:function(e){if(!e)return;var t=parseInt(e/3600);e%=3600;var i=parseInt(e/60);var n=e%60;var a="";if(t)a+=t+"小时";if(i)a+=i+"分";a+=n+"秒";document.getElementById("dimcode_watch_time").innerHTML="已观看到 "+a;document.getElementById("phone_dimcode_watch_time").innerHTML="已观看到 "+a},genPhoneQRCodeToPage:function(e){document.getElementById("phone_dimcode_pic").innerHTML='<i class="ico_play_dimcode"></i><img id="phone_qrcode_img" src="">';var t=$("phone_qrcode_img");t.onload=function(){};t.src="//qrcode.ykimg.com/qr?t="+e+"&size=135"},genShareQRCodeToPage:function(e){document.getElementById("share_dimcode_pic").innerHTML='<i class="ico_play_dimcode"></i><img id="share_qrcode_img" src="">';var t=$("share_qrcode_img");t.onload=function(){};t.src="//qrcode.ykimg.com/qr?t="+e+"&size=135"},_downPCLoading:function(){var e=document.getElementById("panel_down_notice");e.innerHTML='<i class="download-app-loading"></i>';var t=document.getElementById("panel_down_btns");t.style.visibility="hidden";if(null==document.getElementById("loading_notice")){var i=document.createElement("span");i.setAttribute("id","loading_notice");i.innerHTML="正在检测客户端..."}e.parentNode.insertBefore(i,t)},_downPCCallback:function(e){var t=document.getElementById("panel_down_notice");var i=document.getElementById("loading_notice");if(e>=0)t.innerHTML='<i class="download-app-pc"></i>';else document.getElementById("panel_down_notice").innerHTML="<div><p>您尚未安装客户端，我们正在为您下载</p><p>请您成功安装后，再点击下方按钮下载视频</p></div>";document.getElementById("panel_down_btns").style.visibility="visible";t.parentNode.removeChild(i)},_checkDownState:function(){if("undefined"!=typeof isshowacess&&"undefined"!=typeof isdownload)if(isshowacess||!isdownload){var e=document.getElementById("panel_down_notice");if(null!=e){e.innerHTML='<i class=" download-app-bq"></i>';var t=document.getElementById("panel_down_btns");if(null==document.getElementById("disable_notice")){var i=document.createElement("span");i.setAttribute("id","disable_notice");i.innerHTML="本视频因版权问题，很抱歉无法提供下载";i.setAttribute("class","grey");e.parentNode.removeChild(t);e.parentNode.appendChild(i)}}}},_scrollToDown:function(){var e=document.getElementById("vpactionv5");if(null!=e)if("block"==$(this.panel.down).style.display)e.scrollIntoView(false)}});return l});define("page/find/play/model/cms/cms",["tui/event","tui/net","module/domain"],function(e,t,i){var n=e.extend({initialize:function(){var e=this;n.superClass.initialize.call(e);this.domain="//cmstool.youku.com/";e.op={callbackName:"callback",charset:"utf-8"}},getCmstool:function(e){var i=this;t.getJSON(this.domain+"cms/tool/pub/get_putdata.json?securemode=2",e,function(e){i.trigger("getCmstool:success",[e])},i.op)}});return n});define("page/find/play/cms/cms",["tui/view","tui/common","tui/cookie","module/login/login","page/find/play/model/cms/cms","tui/net","tui/slide2","module/stat/common"],function(e,t,i,n,a,r,o,s){var l=e.extend({initialize:function(){var e=this;e._model=new a;e.modelEvents(e._model,"cmsmodel");window.cmsModuleHtmlCallback=function(t,i){e.cmsModuleHtmlCallback(t,i)};e.init();window.Nova={Cookie:{get:i,set:function(e,t,n){i(e,t)}}}},cmsVote:{questionID:0,request:0,seq:0,position:null},CMSDataStore:{set:function(e){if(this.CMSDataIsEmpty()){this.Storage=e;return 1}return 0},get:function(){return this.Storage},CMSDataIsEmpty:function(){return $.isEmptyObject(this.Storage)},CMSURLHaveAsked:false,Storage:{}},cmsModuleHtmlCallback:function(e,t){var i=this;if(t){var n=$("#module_cms_"+e);if(n.length>0)try{n.html(t);this.initCms(n)}catch(a){n.html("")}}},initCms:function(e){if(e.find(".cms-slider").length)o(e)},operateCallback:function(e){if(e){CMSDataStore.set(e);CMSOperation.doEachOperation()}},doEachOperation:function(){var e=this.CMSDataStore.get();if(!e.data)return-1;$(document).bind("show:broadcast",this.officiallistOperation.bind(this));$(document).trigger("show:broadcast");if(e.data.question.hasOwnProperty("link"))$(document).trigger("show:question",[e.data.question]);this.diswindowOperation()},leftOperation:function(){$("div[id^='module_cms_']").each(function(){var e=$(this).attr("id").replace("module_cms_","");var t="//module.youku.com/"+e+".html";r.getScript(t)})},diswindowOperation:function(){var e=this.CMSDataStore.get();if("undefined"==typeof e||"undefined"==typeof e.data||!e.data.diswindow)return-1;var t=e.data.diswindow;if(t.show&&t.topic&&t.video){if(t.show.createtime>=t.topic.createtime&&t.show.createtime>=t.video.createtime)t=t.show;else if(t.video.createtime>=t.topic.createtime&&t.video.createtime>t.show.createtime)t=t.video;else if(t.topic.createtime>t.video.createtime&&t.topic.createtime>t.show.createtime)t=t.topic}else if(t.show&&t.topic)if(t.show.createtime>=t.topic.createtime)t=t.show;else t=t.topic;else if(t.show&&t.video)if(t.show.createtime>=t.video.createtime)t=t.show;else t=t.video;else if(t.topic&&t.video)if(t.video.createtime>=t.topic.createtime)t=t.video;else t=t.topic;else if(t.show)t=t.show;else if(t.topic)t=t.topic;else if(t.video)t=t.video;var i=(new Date).valueOf();var n=1e3*t.begintime;var a=1e3*t.expiretime;var r=window.screen.width||document.body.clientWidth;if(i>=n&&i<=a&&$("#yk-player-curtain").length>0){$("#yk-player-curtain").html('<img src="'+t.windowicon+'">');if(r<1366&&r>1240||r<1200)$("#yk-player-curtain").hide();else $("#yk-player-curtain").show();if(t.buttonicon)window.ykPlyr.bind("player:loaded",function(){if("function"==typeof window.ykPlyr.setPlayHeadSkin)window.ykPlyr.setPlayHeadSkin({url:t.buttonicon})})}else $("#yk-player-curtain").hide()},officiallistOperation:function(){var e=this.CMSDataStore.get();if("undefined"==typeof e||"undefined"==typeof e.data||!e.data.broadcast)return-1;var i=e.data.broadcast;var n=$("#show_vv_broadcast");if(!n.length||!i.content)return;var a=i.content;i.content=t.html2Escape(i.content);var r="";if(97==PageConfig.catId){if(a.length>9)a=a.substring(0,9)+"...";r='<a class="sn drama_operation" target="_blank" title="'+i.content+'"  href="'+i.link+'">'+'<span class="sn_num">'+a+"</span></a>"}else{if(a.length>15)a=a.substring(0,15)+"...";r='<div class="inner">'+'<div class="program">'+'<a class="A" title="'+i.content+'" target="_blank" href="'+i.link+'">'+'<div class="serial"><span class="drama_recommend"></span></div>'+'<div class="headline">'+"<span>推荐：</span>"+a+"</div>"+"</a></div></div>"}n.html(r).show();n.parents("#Drama").trigger("list:update")},init:function(){this.leftOperation();if(this.CMSDataStore.CMSDataIsEmpty()){var e="//cmstool.youku.com/cms/tool/pub/get_putdata.json";this.CMSDataStore.CMSURLHaveAsked=true;this._model.getCmstool({showid:PageConfig.showid,videoid:PageConfig.videoId,folderid:PageConfig.folderId,topicid:PageConfig.catId,client:"pc"})}else this.doEachOperation()},"{cmsmodel} getCmstool:success":function(e){if(e){this.CMSDataStore.set(e);this.doEachOperation()}}});return l});define("page/find/play/relationlist/stars",["tui/view","tui/art","tui/common","tui/lazyImageLoader","page/find/play/model/listall","tui/slide2","tui/util/str"],function(e,t,i,n,a,r,o){"use strict";return e.extend({initialize:function(e){this._model=new a;this.modelEvents(this._model,"model");this._model.getStar({vid:PageConfig.videoId,showid:PageConfig.showid,cid:PageConfig.catId})},events:{"mouseenter .head_tab>li":"switchTab","click .tab-h ul>li":"switchTab2"},switchTab2:function(e){var t=$(e.currentTarget);if(t.hasClass("current"))return;t.addClass("current").siblings("li").removeClass("current");this.toggleTabc(t.attr("personid"),t.attr("index"))},switchTab:function(e){var t=this;var i=$(e.currentTarget);if(i.hasClass("current"))return;var n=i.attr("personid");i.addClass("current").siblings("li").removeClass("current");var a=t.find('.tab-h ul[personid="'+n+'"]');a.show().siblings(".tab-h ul").hide();a.find("li").removeClass("current").eq(0).addClass("current");t.toggleTabc(n)},toggleTabc:function(e,t){var i=this.find('.tab-c[personid="'+e+'"]');i.eq(t||0).show().siblings(".tab-c").hide();i.find(".modPSlide").trigger("slider:show")},"{model} getStar:success":function(e){var a=this;var s='\n<div class="mod modSwitch mod-new">\n<div class="h">\n<!-- 演员 -->\n<ul class="head_tab">\n<% data.forEach(function(t, i){%> \n<li class="<%=(i=== 0 ? \'current\': \'\')%>" personid="<%=t.personid%>">\n<div class="pic">\n<a href="<%=t.starUrl%>" target="_blank"><img class="lazyImg" alt="<%=t.thumburl%>" src="http://static.youku.com/v1.0.1098/index/img/sprite.gif"></a>\n</div>\n<ul class="info">\n<li class="name">\n<a href="<%=t.starUrl%>" target="_blank"><%=t.personname%></a>\n</li>            \n<li class="area">\n<span><%=t.character%></span>\n</li>\n</ul>\n</li>\n<%})%>  \n</ul>\n<div class="clear"></div>\n</div>\n<div class="c">\n<div class="tab-h">\n<% data.forEach(function(t, i){ %> \n<ul personid="<%=t.personid%>" style="<%=(i == 0 ? \'\' : \'display:none\')%>">\n<% t.cates.forEach(function(value,index){ %> \n<li personid="<%=t.personid%>" index="<%=index%>" class="<%=(index== 0 ? \'current\': \'\')%>">\n<a><%=value.category%></a>\n</li>\n<%})%>  \n</ul>\n<%})%>  \n<div class="clear"></div>\n</div>\n<% data.forEach(function(star,i1){ %> \n<% star.showes.forEach(function(ul, i2){ %> \n<%if(i1==0 && i2==0) {%>\n<div class="tab-c" style="display: block;"  personid="<%=star.personid%>">\n<%}else {%>\n<div class="tab-c" style="display: none;"  personid="<%=star.personid%>">\n<%}%>\n<div name="m_pos" id="m_star<%=i1%><%=i2%>" modshow="1">\n<div class="yk-row yk-row-sm">\n<div class="modPSlide mod_pslide " id="mdstar<%=i1%><%=i2%>">\n<div class="mbtn prev" style="display: none;">\n<a href="#" class="iconfont" title="上一组"></a>\n</div>\n<div class="mbtn next" style="display: block;">\n<a href="#" class="iconfont" title="下一组"></a>\n</div>\n<ul class="panel" style="left: 0px;">   \n<% ul.forEach(function(t, i){ %> \n<li class="yk-col4 mr1">\n<div class="yk-pack pack-film">\n<div class="p-thumb">\n<a href="<%=t.url%>"  title="<%=t.name%>"  target="_blank"></a>\n<i class="bg"></i>\n<%if(i< 6){%>\n<img class="lazyImg" alt="<%=t.thumburl%>" src="http://static.youku.com/v1.0.1098/index/img/sprite.gif">\n<%}else{%>\n<img class="lazyLoad" alt="<%=t.thumburl%>" src="http://static.youku.com/v1.0.1098/index/img/sprite.gif">\n<%}%>\n<!-- 会员用券 -->\n<%if ((t.paid == "1" || t.paid == "2" ) && t.showid != \'60327\') {%>\n<%var rttext = t.paid == "1" ? "会员免费" : "会员用券";%>\n<div class="p-thumb-tagrt">\n<span class="vip-free"><%=rttext%></span>\n</div>\n<%}%>\n</div>  \n<!-- 标题 -->\n<ul class="info-list">\n<li class="title short-title">\n<%  var title = t.name;\nif (title.length > 17) \ntitle = title.substring(0, 17) + \'...\';%>\n<a href="<%=t.url%>" target="_blank" ><%=title%></a>\n</li>\n<% if (t.desc){ %>                \n<li class="subtitle">\n<%  var subtitle = t.desc;\nif (subtitle.length > 17) \nsubtitle = subtitle.substring(0, 17) + \'...\';%>\n<span><%=subtitle%></span>\n</li>\n<%}%>\n</ul>\n</div>\n</li>\n<%})%> \n</ul>\n</div>\n</div>\n</div>\n</div>\n<%})%> \n<%})%> \n</div>\n</div>';var l=t.compile(s)({data:e.stars,searchDomain:a.searchDomain,youku_homeurl:PageConfig.youku_homeurl,encodeUid:i.encodeUid,str:o,encodeURI:encodeURI,numberFormat:i.numberFormat});if(l){a.$el.html(l);r(a.$el);setTimeout(function(){n({imgs:a.find(".lazyImg"),size:150})},500)}},"{model} getStar:fail":function(){this.trigger("getStar:fail")}})});define("page/find/play/relationlist/infom",["tui/view","tui/art","page/find/play/model/listall"],function(e,t,i){return e.extend({initialize:function(){var e=this;this.$wrap=$("#module_basic_infom");this.mod=new i;this.modelEvents(this.mod);if(this.$wrap.length>0)this.mod.getInfoM({vid:PageConfig.videoId})},"{mod} getInfoM:success":function(e){var i=this;tpl='<div class="play_wrapper">\n<div class="ykplay_modulebasic_infom_wrapper">\n<div class="play_header">\n<h2>视频信息</h2>\n</div>\n<div class="play_content">\n<ul>\n<li class="cut" title="<%=data.title%>">标题：\n<%if(data.title){%>\n<%=data.title%>\n<%}else{%>\n--\n<%}%>\n</li>\n<li>分类：<a class="blue" target="_blank" href="<%=data.channelUrl%>">\n<%if(data.channelName){%>\n<%=data.channelName%>\n<%}else{%>\n--\n<%}%>\n</a></li>\n<li class="cut">标签：\n<%if(data.tags.length == 1){%>\n<%if(data.tags[0]){%>\n<%data.tags.forEach(function(item,index){%> \n<%if(index < 3){%>\n<span class="round" title="<%=item%>"> <%=item%> </span>\n<%}%>\n<%})%>\n<%}else{%>\n--\n<%}%>\n<%}else{%>\n<%data.tags.forEach(function(item,index){%> \n<%if(index < 3){%>\n<span class="round" title="<%=item%>"> <%=item%> </span>\n<%}%>\n<%})%>\n<%}%>\n</li>\n<li title="<%=data.description%>">简介：\n<%if(des){%>\n<%=des%>\n<%}else{%>\n--\n<%}%>\n</li>\n</ul>\n</div>\n</div>\n</div>';var n=i.titleformate(e.description,80);html=t.compile(tpl)({data:e,des:n});this.$wrap.html(html)},titleformate:function(e,t){var i=0;var n=0;for(var a=0;a<e.length;a++){if(e.charCodeAt(a)<0||e.charCodeAt(a)>255)i+=2;else i+=1;if(i>=t){n=a;break}}if(0!=n)e=e.substring(0,n)+"...";return e}})});define("page/find/play/relationlist/topic",["tui/view","tui/art","page/find/play/model/listall","tui/slide2"],function(e,t,i,n){return e.extend({initialize:function(){var e=this;this.$wrap=$("#module_basic_topic");this.mod=new i;this.modelEvents(this.mod);if(this.$wrap.length>0)this.mod.getTopic({type:"pc",vids:"["+PageConfig.videoId+"]"})},"{mod} getTopic:success":function(e){var i,a,r;var o=PageConfig.videoId,s=[];if(e[o])$.each(e[o],function(e,t){s.push(t)});s=s.splice(0,10);if(s.length){i='<div class="play_wrapper">\n<div class="topic-wrapper">\n<h2><i></i>话题</h2>\n<%var k=0;%>\n<div class="modPSlide mod_pslide " id="mdtopic">\n<div class="mbtn prev" style="display: none;">\n<a href="#" class="iconfont" title="上一组"><i></i></a>\n</div>\n<div class="mbtn next" style="display: block;">\n<a href="#" class="iconfont" title="下一组"><i></i></a>\n</div>\n<ul class="panel">\n<% data.forEach(function(t, i){ %> \n<%k=i%> \n<li>\n<div class="topic-item clearfix">\n<a href="//gh.youku.com/topic_page/detail?id=<%=t.topicId%>" target="_blank" class="banner"><img src="<%=t.banner%>"></a>\n<h3><a href="//gh.youku.com/topic_page/detail?id=<%=t.topicId%>"  target="_blank"  class="title">#<%=t.topicName%>#</a></h3>\n<p title="<%=t.desc%>"><%=t.desc%></p>\n</div>\n</li>\n<% }); %> \n<%if (k%2==0){%> \n<li>\n<div class="topic-item topic-guid clearfix">\n更多<a href="//gh.youku.com/topic_page/topic_list"  target="_blank" >话题</a>等你发现...\n</div>\n</li>\n<%}%>\n</ul>\n</div>			\n</div>\n</div>';a=t.compile(i)({data:s});this.$wrap.html(a);n(this.$wrap,{patchWidth:25})}else this.mod.trigger("getTopic:fail")},"{mod} getTopic:fail":function(e){this.$wrap.remove()}})});define("page/find/play/relationlist/listall",["tui/view","tui/art","tui/common","tui/cookie","module/login/login","tui/net","page/find/play/interaction/iku","tui/lazyImageLoader","page/find/play/model/listall","tui/slide2","tui/util/num","page/find/play/relationlist/topic","page/find/play/relationlist/infom","page/find/play/relationlist/stars"],function(e,t,i,n,r,o,s,l,u,c,d,f,p,h){var m=e.extend({initialize:function(){var e=this;window.userSubRankCallback=function(t){e.userSubRankCallback(t,e)};this._model=new u;this.modelEvents(this._model,"model");this._model.bind("getStatRank:success",this.statRankCallback.bind(this));this._model.bind("getInfo:success",this.infoCallback.bind(this));this._model.bind("getStar:success",this.starShowCallback.bind(this));this._model.bind("getInfo:fail",this.listCallbackFail.bind(this));this._model.bind("getStar:fail",this.listCallbackFail.bind(this));new p;$("#module_basic_topic").length&&new f({el:"#module_basic_topic"});if($("#module_basic_relation").length>0)r.one("checklogin",function(){if(1==PageConfig.playmode||2==PageConfig.playmode)e.video();else e.show()});if($("#module_basic_relationleft").length>0)r.one("checklogin",function(){e.likeShow()});$("#module_basic_star").length&&new h({el:"#module_basic_star"});if($("#module_basic_info").length>0)this.infoShow()},searchDomain:"//www.soku.com",landscapeDault:"/index/img/2013/video/video_default_145x80.png",portraitDefault:"/index/img/2013/video/video_default_200x300.png",clickLogSender:function(e,t){$(e).on("mousedown","a",function(){var e=$(this);var i=[e.attr("_ck"),e.attr("_reck")];if(1==t&&e.attr("_recFeedbackLogUrlbfy"))i.push(e.attr("_recFeedbackLogUrlbfy")+"&type=7");i.forEach(function(e){if(e)o.getRequest(e)})})},statRank:function(){this._model.getStatRank({cid:PageConfig.catId})},statRankCallback:function(e){if("undefined"!=typeof e.html)$("#vpofficialrankingv5").html(e.html);this.statRankbind()},statRankbind:function(){var e=$("#vpofficialrankingv5 ul li").length;$("#vpofficialrankingv5 ul li").each(function(t){$(this).mouseenter(function(){for(var i=0;i<e;i++){if($("#rkLst"+i).length>0)$("#rkLst"+i).hide();if($("#thrkLst"+i).length>0)$("#thrkLst"+i).removeClass("current")}if($("#rkLst"+t).length>0)$("#rkLst"+t).show();if($("#thrkLst"+t).length>0)$("#thrkLst"+t).addClass("current")})})},listCallbackFail:function(e){$("#"+e).remove()},showADs:function(){if($("#ab_v_1430192600").length>0&&$("#ab_v_1430192617").length>0){var e="//v2html.atm.youku.com/vhtml?p=1430192617,1430192600"+PageConfig.adsParams+"&t="+(new Date).getTime();$.getScript(e)}},show:function(){var e=this;var t="//ykrec.youku.com/show/packed/list.json?guid="+n("__ysuid")+"&vid="+PageConfig.videoId+"&sid="+PageConfig.showid+"&cate="+PageConfig.catId+"&t="+(new Date).getTime();t+="&picSize=2&apptype=1&pg=3&module=9&pl=18&needTags=1&atrEnable=true&callback=?";var i=r.uid();if(i)t+="&uid="+i;$.getJSON(t+"&t="+Math.random(),function(t){e.showCallback(t)})},showCallback:function(e){var n=this;if(0!=e.e){n.listCallbackFail("module_basic_relation");return}n.createShowData(e);var a='<!-- 相关推荐列表 -->\n<div class="play_wrapper">\n<div class="play_header">\n<h2 class="moduletitle">相关推荐</h2> \n</div>\n<div class="play_content">\n<div class="rows" style="display: block;">\n<div class="row tuiguang" id="ab_v_1430192600"></div>\n<div class="row tuiguang" id="ab_v_1430192617"></div>\n<% data.forEach(function(t, i){ %>   \n<%if (t.mm == 1 && typeof(t.thirdDisplayUrl) !== "undefined" && typeof(t.thirdClickUrl) !== "undefined"){%> \n<div class="row tuiguang"  thirdDisplayUrl="<%=t.thirdDisplayUrl%>" thirdClickUrl="<%=t.thirdClickUrl%>">\n<%}else{%>\n<div class="row">\n<%}%>\n<div class="left-part">\n<!-- 图片地址和跳转地址 -->\n<div class="p-thumb">\n<a href="<%=t.videoUrl%>" _ck="<%=t.clickLogUrl%>" _reck="<%=t.recClickLogUrl%>" target="_blank" title="<%=t.title%>"></a>\n<i class="bg"></i>\n<img  alt="<%=t.picUrl%>" class="lazyImg" src="http://static.youku.com/v1.0.1098/index/img/sprite.gif">\n</div>\n<!-- 播放时长 -->\n<ul class="p-info">\n<%if (t.type == 1){%> \n<%if (t.videoTime){%>\n<li class="status hover-hide">\n<span class="p-time">\n<i class="ibg"></i>\n<span><%=t.videoTime%></span>\n</span>\n</li>\n<%}%>\n<%}%>\n<!--  推广角标 -->\n<%if (t.mm == 1 && typeof(t.thirdDisplayUrl) !== "undefined" && typeof(t.thirdClickUrl) !== "undefined"){%> \n<li class="status hover-hide big">\n<span class="p-time">\n<i class="ibg"></i>\n<span>广告</span>\n</span>\n</li>\n<%}%>\n</ul>\n<!-- 高清超清角标 -->\n<%if ( !((t.mm == 1 && t.type == 8) || (t.type == 9)) ){%> \n<% if(t.streamtypes == 1) {%>\n<div class="streamtype"><span class="icon-SHD" title="超清">超清</span></div>\n<%}%>\n<% if(t.streamtypes == 2) {%>\n<div class="streamtype"><span class="icon-SHD" title="高清">高清</span></div>\n<%}%>\n<%}%>\n<!--  来疯角标 -->\n<%if (t.mm == 1 && t.type == 8){%> \n<div class="laifeng">\n<span>来疯</span>\n</div>\n<%}%>\n</div>\n<div class="right-part ">\n<ul class="info">\n<!-- 标题 -->\n<li class="title">\n<% var tt = t.title || \'优酷推荐视频\';%>\n<a href="<%=t.videoUrl%>" target="_blank" title="<%=tt%>" _ck="<%=t.clickLogUrl%>" _reck="<%=t.recClickLogUrl%>"><%=titleformate(tt)%></a>\n</li>\n<!-- 演员 -->\n<li class="subtitle">\n<%if (t.type !== 9){%> \n<%if (t.performer && t.performer.length) {%>\n<span>主演:</span>\n<%t.performer.forEach(function(v, index){%>\n<%if (index < 2){%> \n<%if (typeof (v) == \'object\') {%> \n<%if (v.id && v.name) {%>\n<% var uid =  encodeUid(v.id)%>\n<a href="<%=youku_homeurl%>star_page/uid_<%=uid%>.html" target="_blank"><%=v.name%></a>\n<%}%> \n<%} else {%>\n<%if (v) {%> \n<% var uri = encodeURI(v)%>\n<a href="<%=searchDomain%>/search_video/q_<%=uri%>.html" target="_blank"><%=v%></a>\n<%}%> \n<%}%>\n<%if (index == 0 && t.performer.length >= 2) {%>\n<span class="break">/</span>\n<%}%>\n<%}%>\n<%})%>\n<%} else if (t.dct == 100) {%>\n<%if (t.dubbing) {\nvar actorTitle = t.area == \'日本\' ? \'声优\' : \'配音\';%>\n<span><%=actorTitle%>:</span>\n<%for (var a = 0; a < 2; a++) {\nif (typeof (t.dubbing[a]) != \'undefined\') {\nif (typeof (t.dubbing[a]) == \'object\') {\nvar uri = encodeURI(t.dubbing[a].name);%>\n<a href="<%=searchDomain%>/search_video/q_<%=uri%>"  target="_blank"><%=t.dubbing[a].name%></a>\n<%} else {%>\n<% var uri = encodeURI(t.dubbing[a]);%>\n<a href="<%=searchDomain%>/search_video/q_<%=uri%>"  target="_blank"><%=t.dubbing[a]%></a>\n<%}%>\n<%if (a == 0 && t.dubbing[1]) {%>\n<span class="break">/</span>\n<%}%>\n<%}%>\n<%}%>\n<%}%>\n<%} else if ((t.dct == 85 || t.dct == 91) && t.userName) {%>\n<span>播出:<%=t.userName%></span>\n<%}%>\n<%}%>\n</li>\n<!-- 播放量评论量 -->\n<li  class="subtitle vvrate">\n<%if (t.mm == 1 && t.type == 8) {\nif (t.liveHouse == \'false\') {\nvar onlineAmount = t.onlineAmount || 0;%>\n<span><%=onlineAmount%>人正在看</span>\n<%}\n} else {\nif (t.type !== 9) {\nvar playAmount = t.playAmount || 0;\nvar commentCount = t.commentCount || 0;\n%>\n<span><%=num(playAmount)%>次播放</span>\n<span><%=num(commentCount)%>次评论</span>\n<%}%>\n<%}%>\n</li>\n</ul>\n</div>\n</div>\n<% }); %> \n<div class="row tuiguang" id="ab_v_1464781393"></div>\n<div class="row tuiguang" id="ab_v_1464781428"></div>\n<div class="row tuiguang" id="ab_v_1464781466"></div>\n<div class="clear"></div>		\n</div>\n</div>\n</div>';
var r=t.compile(a)({data:e.data,titleformate:n.titleformate,num:d.field,searchDomain:n.searchDomain,youku_homeurl:PageConfig.youku_homeurl,encodeUid:i.encodeUid,encodeURI:encodeURI,numberFormat:i.numberFormat});if(r){$("#module_basic_relation").html(r);l({imgs:$("#module_basic_relation").find(".lazyImg"),size:150});n.clickLogSender("#module_basic_relation",0);$(".tuiguang").each(function(){$(this).click(function(){var e=$(this).attr("thirdClickUrl");var t=new Image;t.src=e})})}n.trigger("relationlist:loaded");setTimeout(function(){n.adStat(e.req_id)},1e4)},video:function(){var e=this;var t=2==PageConfig.playmode?4:1;var i=1==PageConfig.playmode?23:15;var a=2==PageConfig.playmode?0:1;var o="//ykrec.youku.com/video/packed/list.json?guid="+n("__ysuid")+"&vid="+PageConfig.videoId+"&sid="+PageConfig.showid+"&cate="+PageConfig.catId+"&apptype=1&pg="+t+"&module=1&pl="+i+"&needTags="+a+"&atrEnable=true&callback=?"+"&t="+(new Date).getTime();var s=r.uid();if(s)o+="&uid="+s;$.getJSON(o+"&t="+Math.random(),function(t){e.videoCallback(t)})},videoCallback:function(e){var n=this;if(0!=e.e){n.listCallbackFail("module_basic_relation");return}n.createVideoData(e);var a='<!-- 相关推荐列表 -->\n<div class="wrapper">\n<div class="header">\n<h2 class="moduletitle">相关推荐</h2> \n</div>\n<div class="content">\n<div class="rows" style="display: block;">\n<div class="row tuiguang" id="ab_v_1430192600"></div>\n<div class="row tuiguang" id="ab_v_1430192617"></div>\n<% data.forEach(function(t, i){ \nvar tt = t.title || \'优酷推荐视频\';\n%> \n<%if (t.mm == 1 && typeof(t.thirdDisplayUrl) !== "undefined" && typeof(t.thirdClickUrl) !== "undefined"){%> \n<div class="row tuiguang"  thirdDisplayUrl="<%=t.thirdDisplayUrl%>" thirdClickUrl="<%=t.thirdClickUrl%>">\n<%}else{%>\n<div class="row">\n<%}%>\n<div class="left-part">\n<div class="p-thumb">\n<a href="<%=t.videoUrl%>" _ck="<%=t.clickLogUrl%>" _reck="<%=t.recClickLogUrl%>" target="_blank" title="<%=tt%>"></a>\n<i class="bg"></i>\n<img  alt="<%=t.picUrl%>" class="lazyImg" src="http://static.youku.com/v1.0.1098/index/img/sprite.gif">\n</div>\n<%if (!(t.mm == 1 && t.type == 8)){%> \n<ul class="p-info">\n<li class="status hover-hide">\n<span class="p-time">\n<i class="ibg"></i>\n<span><%=t.videoTime%></span>\n</span>\n</li>\n<!--  推广角标 -->\n<%if (t.mm == 1 && typeof(t.thirdDisplayUrl) !== "undefined" && typeof(t.thirdClickUrl) !== "undefined"){%> \n<li class="status hover-hide big">\n<span class="p-time">\n<i class="ibg"></i>\n<span>广告</span>\n</span>\n</li>\n<%}%>\n</ul>\n<%}%>\n<!-- 高清超清角标 -->\n<%if ( !((t.mm == 1 && t.type == 8) || (t.type == 9)) ){%> \n<% if(t.streamtypes == 1) {%>\n<div class="streamtype"><span class="icon-SHD" title="超清">超清</span></div>\n<%}%>\n<% if(t.streamtypes == 2) {%>\n<div class="streamtype"><span class="icon-SHD" title="高清">高清</span></div>\n<%}%>\n<%}%>\n<!-- 来疯直播与会员用券 -->\n<%if (t.mm == 1 && t.type == 8){%> \n<div class="laifeng"><span>来疯</span></div>\n<%} else if (t.pay_state == "1" || t.pay_state == "2") { %>\n<% var rttag = t.pay_state == "1" ? "会员免费" : "会员用券";%>\n<div class="streamtype"><span class="icon-SHD" title="超清"><%=rttag%></span></div>\n<%}%>		\n</div>\n<div class="right-part ">\n<% if (t.type != 9) {%>\n<ul class="info">\n<!-- 标题 -->\n<li class="title">\n<a href="<%=t.videoUrl%>" target="_blank" title="<%=tt%>" _ck="<%=t.clickLogUrl%>" _reck="<%=t.recClickLogUrl%>"><%=titleformate(tt)%></a>\n</li>\n<!-- 上传者 -->\n<%if ((playmode == 1 && t.type == 1) && !((t.mm !== 1 || t.type !== 8) && (t.pay_state == "1" || t.pay_state == "2"))) {%>\n<li  class="uploader">\n<% var uid = encodeUid(t.userId); %>\n<span><a href="//i.youku.com/i/<%=uid%>" target="_blank" title="<%=userName%>"><%=t.userName%></a></span>\n</li>\n<%}%>\n<!-- 播放量与评分 -->\n<li class="vvrate">\n<%if (t.mm == 1 && t.type == 8){%>\n<span><%=t.onlineAmount%>人正在看</span>\n<%} else {\nif (t.pay_state == "1" || t.pay_state == "2") { \nif (t.subTitle) { %>\n<span><%=t.subTitle%></span>\n<%}\nif (t.score) {%>\n<span>评分:\n<% var upCount = numberFormat(t.upCount)%>\n<% var downCount = numberFormat(t.downCount)%>\n<span class="score" title="有<%=upCount%>人顶过 有<%=downCount%>人踩过"><%==t.score%></span>\n</span>\n<%}%>\n<%} else {%>\n<% \nvar playAmount = t.playAmount || 0;\nvar commentCount = t.commentCount || 0;\n%>\n<span><%=num(playAmount)%>次播放</span>\n<span><%=num(commentCount)%>次评论</span>\n<%}%>\n<%}%>\n</li>\n</ul>\n<%} else {%> \n<ul class="info">\n<!-- 标题 -->\n<li class="title">\n<a href="<%=t.videoUrl%>" target="_blank" title="<%=tt%>"><%=titleformate(tt)%></a>\n</li>\n</ul>\n<%}%>\n</div> \n</div>\n<% }); %> \n<div class="row tuiguang" id="ab_v_1464781393"></div>\n<div class="row tuiguang" id="ab_v_1464781428"></div>\n<div class="row tuiguang" id="ab_v_1464781466"></div>\n<div class="clear"></div>\n</div>\n</div>\n</div>\n';var r=t.compile(a)({data:e.data,titleformate:n.titleformate,num:d.field,searchDomain:n.searchDomain,youku_homeurl:PageConfig.youku_homeurl,encodeUid:i.encodeUid,encodeURI:encodeURI,numberFormat:i.numberFormat,playmode:PageConfig.playmode,floor:Math.floor});if(r){$("#module_basic_relation").html(r);l({imgs:$("#module_basic_relation").find(".lazyImg"),size:150});n.clickLogSender("#module_basic_relation",0);$(".tuiguang").each(function(){$(this).click(function(){var e=$(this).attr("thirdClickUrl");var t=new Image;t.src=e})})}n.trigger("relationlist:loaded");setTimeout(function(){n.adStat(e.req_id)},1e4)},clickLog:function(e){if(""!=e)RelationAsync._addScript(e,null,true)},createVideoData:function(e){var t=this;var i=e.data;if(i)for(var n=0,a=i.length;n<a;n++){var r="";var o="";var s="";var l="";var u="";if("undefined"==typeof i[n].playLink){if(1==i[n].type)r=PageConfig.homeHost+"v_show/id_"+i[n].codeId+".html";else if(2==i[n].type)r=PageConfig.youku_homeurl+"show_page/id_"+i[n].codeId+".html"}else r=i[n].playLink;if(197141899==i[n].id)r="//yikan.youku.com/u/home?from=y1.2.0.1";if(i[n].totalTime)o=t.time_format(i[n].totalTime);var s=i[n].mm||0;l=9==i[n].type?"":t.streamtypes2(i[n].streamtypes);if(i[n].score)u=t.score(i[n].score);i[n].videoUrl=r;if(i[n].totalTime)i[n].videoTime=o;i[n].mm=s;i[n].streamtypes=l;if(i[n].score)i[n].score=u;if(void 0!=i[n].thirdDisplayUrl&&void 0!=i[n].thirdClickUrl){var c=i[n].thirdDisplayUrl;var d=new Image;d.src=c}}},createShowData:function(e){var t=this;var i=e.data;if(i)for(var n=0,a=i.length;n<a;n++){var r="";var o="";var s="";var l="";if("undefined"==typeof i[n].playLink){if(1==i[n].type)r=PageConfig.homeHost+"v_show/id_"+i[n].codeId+".html";else if(2==i[n].type)r=PageConfig.youku_homeurl+"show_page/id_"+i[n].codeId+".html"}else r=i[n].playLink;if(197141899==i[n].id)r="//yikan.youku.com/u/home?from=y1.2.0.1";if(i[n].totalTime)o=t.time_format(i[n].totalTime);var s=i[n].mm||0;l=9==i[n].type?"":t.streamtypes2(i[n].streamtypes);i[n].videoUrl=r;if(i[n].totalTime)i[n].videoTime=o;i[n].mm=s;i[n].streamtypes=l;if(void 0!=i[n].thirdDisplayUrl&&void 0!=i[n].thirdClickUrl){var u=i[n].thirdDisplayUrl;var c=new Image;c.src=u}}},titleformate:function(e){var t=0;var i=0;for(var n=0;n<e.length;n++){if(e.charCodeAt(n)<0||e.charCodeAt(n)>255)t+=2;else t+=1;if(t>=42){i=n;break}}if(0!=i)e=e.substring(0,i)+"...";return e},score:function(e){var t="";if(e){var i=Math.floor(e/2);var n=0!=e%2?1:0;var a=5-i-n;for(var r=0;r<i;r++)t+='<i class="ico-ratefull"></i>';for(var o=0;o<n;o++)t+='<i class="ico-ratepart"></i>';for(var s=0;s<a;s++)t+='<i class="ico-ratenull"></i>';t+=e}return t},splitTag:function(e){var t="";if(e){var i=e.split("/");for(var n=0,a=i.length;n<a;n++){if(n>=2)break;t+="<span>"+i[n]+"</span>";if(0==n&&a>=2)t+='<span class="break">/</span>'}}return t},getActor:function(e){var t="";if(e&&e.length){t="<label>主演:</label>";for(var i=0;i<2;i++){if("object"==typeof e[0])t+="<span>"+e[i].name+"</span>";else t+="<span>"+e[i]+"</span>";if(0==i&&e.length>=2)t+='<span class="break">/</span>'}}return t},streamtypes:function(e){var t="";var i=new Array;i=e.split(",");for(var n=0,a=i.length;n<a;n++)if("hd2"==i[n]){t='<div class="v-thumb-tagrt"><i class="ico-SD" title="超清"></i></div>';break}else if("hd"==i[n]){t='<div class="v-thumb-tagrt"><i class="ico-HD" title="高清"></i></div>';break}return t},streamtypes2:function(e){if(e){var t="";var i=new Array;i=e.split(",");for(var n=0,a=i.length;n<a;n++)if("hd2"==i[n]){t=1;break}else if("hd"==i[n]){t=2;break}return t}else return 0},time_format:function(e){var t=0;var i=e%60;var t=Math.floor(e/60);if(t<=9)t="0"+t;if(i<=9)i="0"+i;return t+":"+i},in_array:function(e,t){if("string"==typeof e||"number"==typeof e)for(var i in t)if(t[i]==e)return true;return false},arraySort:function(e){return e.sort(function(){return.5-Math.random()})},adStat:function(e){var t=this;var i=1;if(1==PageConfig.playmode||3==PageConfig.playmode)i=PageConfig.playmode;else if(2==PageConfig.playmode)i=4;var a=0;if($("#ab_v_1430192600").length>0&&$("#ab_v_1430192617").length>0&&""!=$("#ab_v_1430192600")[0].innerHTML&&""!=$("#ab_v_1430192617")[0].innerHTML)a=2;else if(($("#ab_v_1430192600").length>0&&""!=$("#ab_v_1430192600").innerHTML).length>0||$("#ab_v_1430192617").length>0&&""!=$("#ab_v_1430192617")[0].innerHTML)a=1;else a=0;var o="";var s="";if($("#ad_1430192600").length>0&&$("#ad_1430192600")[0].getAttribute("vid"))o=$("#ad_1430192600")[0].getAttribute("vid");if($("#ad_1430192617").length>0&&$("#ad_1430192617")[0].getAttribute("vid"))s=$("#ad_1430192617")[0].getAttribute("vid");var l="logVersion=1&visitTime="+(new Date).valueOf()+"&ip=0&cookieid="+n("__ysuid")+"&uid="+r.uid()+"&ua="+navigator.userAgent.toLowerCase()+"&req_id="+e+"&vid="+window.videoId+"&apt=1&pg="+i+"&md=1&adnum="+a+"&advid1="+o+"&advid2="+s;var u="//r.l.youku.com/rec_ad_show?"+l;var c=new Image;c.src=u},userSubRank:function(){var e="";var t="";var i=e.split("|");var n=t.split("|");var a=true;var r=true;for(var s=0,l=i.length;s<l;s++)if(i[s]==window.catId){a=true;break}for(var u=0,l=n.length;u<l;u++)if(n[u]==window.playmode){r=true;break}if(true==a&&true==r){var c=this;var d=20;var f=window.catId;var p=1;var h=1;var m=6;var v="jsonp";var g="userSubRankCallback";var y="//uo.youku.com/channelstore/rank/getRankData?rank_id="+d+"&channel_id="+f+"&user_detail="+p+"&pn="+h+"&pz="+m+"&format="+v+"&callback="+g;o.getScript(y)}},userSubRankCallback:function(e,t){if(0==e.error_code&&e.result){var i=e.result;var n="undefined"!=typeof window.catName?decodeURIComponent(window.catName)+"原创榜":"相关原创排行";var a=["99","85","100","95","87","84","91","86","98","104","105","103","89","88","90","94","171","172"];var r="undefined"!=typeof window.catId&&a.indexOf(window.catId)>-1?"//www.youku.com/u/originalRanking/channel/"+window.catId:"//www.youku.com/u/originalRanking/channel/0";var o='<div class="subscirbe-rank"><div class="hd"><span>'+n+'</span><span><a class="more" href="'+r+'" target="_blank">更多</a></span></div><div class="bd" id="usersubrank">';var s=i.length;for(var l=0;l<s;l++){var u=l+1;o+='<div class="item" name="usersubranklist" seq="'+u+'" style="background: rgb(255, 255, 255);">';if(u<=3)o+='<label class="hot">'+u+"</label>";else o+="<label>"+u+"</label>";var c=t._cutStr(i[l]["description"],40,"...");o+='<img class="lazyImg" src="'+i[l]["profile_image_url"]["big"]+'" alt="'+i[l]["screen_name"]+'"><div class="userinfo">'+'<h3><a target="_blank" href="'+i[l]["home_page"]+'">'+i[l]["screen_name"]+"</a>";if(1==i[l]["verified"])o+='<img src="//r1.ykimg.com/051000005464214D6737B35561064942" alt="认证图标"></h3>';else o+="</h3>";o+="<p>"+c+'</p></div><a class="sub-btn" target="_blank" href="'+i[l]["home_page"]+'?subscribe" style="display: none;" id="ranklist'+u+'">订阅</a></div>'}o+="</div></div>";$("#userSubRankBox")[0].innerHTML=o;var d=t._getElementsByName($("#usersubrank")[0],"div","usersubranklist");if(d){var f=d.length;for(var l=0;l<f;l++)!function(e){var i=e.getAttribute("seq");t._addEvent(e,"mouseenter",function(){if($("#ranklist"+i).length>0)$("#ranklist"+i)[0].style.display="block"});t._addEvent(e,"mouseleave",function(){if($("#ranklist"+i).length>0)$("#ranklist"+i)[0].style.display="none"})}(d[l])}}},recUser:function(){},creatReluserHtml:function(e){var t=e.data;if(t){var n="";n='<div class="box nBox">'+'<div class="head">'+'<div class="caption"><h3 class="title">相关视频上传者</h3></div>'+'<div class="extend" id="changeNext" value="1"><a href="javascript:void(0);">换一换</a></div>'+"</div>"+'<div class="body">'+'<div class="uRelated">'+'<div class="items">';for(var a=0,r=t.length;a<r;a++){var o=1==t[a].verified?'<a target="_blank" title="认证用户" href="//i.youku.com/u/rz"><span class="ico_cert"></span></a>':"";var s=a>2?'style="display:none;"':"";var l=t[a].desc;if(!l)l="还未添加频道介绍";if(l.length>20)l=l.substring(0,20)+"...";if(a<3)var u=1;else if(a>2&&a<6)var u=2;else var u=3;var c=this.clickParam+"&pos="+a+"&dma="+t[a].dma+"&algInfo="+t[a].algInfo;n+='<div value="'+u+'" class="u" '+s+">"+'<div class="u-thumb" cardplace="lr" uid="'+t[a].id+'">'+'<a title="'+t[a].username+'" href="//i.youku.com/i/'+i.encodeUid(t[a].id)+'" target="_blank" charset="'+c+'"><img src="'+t[a].picUrl+'"></a>'+"</div>"+'<div class="u-meta">'+'<div class="u-name" uid="'+t[a].id+'"><a target="_blank" href="//i.youku.com/i/'+i.encodeUid(t[a].id)+'" target="_blank" charset="'+c+'">'+t[a].username+"</a>&nbsp;"+o+"</div>"+'<div class="u-entry">'+"<div><label>简介:</label>"+l+"</div>"+"</div>"+'<div class="u-meta-tagrt">'+'<div class="form_btn form_btn_m form_btnmaj_m"><a href="//i.youku.com/i/'+i.encodeUid(t[a].id)+'?subscribe" target="_blank" charset="'+c+'"><span class="form_btn_text"><i class="ico_subscription"></i>订阅</span></a></div>'+"</div>"+"</div>"+"</div>"}n+="</div></div></div></div>";var d=this.creatReluserCardHtml(t);n+=d;return n}},creatReluserCardHtml:function(e){var t="";if(e){t+='<div class="cardBox">';for(var n=0,a=e.length;n<a;n++){var r=1==e[n].verified?'<a target="_blank" title="认证用户" href="//i.youku.com/u/rz"><span class="ico_cert"></span></a>':"";var o="";if(e[n].videos){var s=e[n].videos;for(var l=0,u=s.length;l<u;l++){var c=s[l].title;if(c.length>20)c=c.substring(0,20)+"...";var d=this.clickParam+"&pos="+n+"&dma="+s[l].dma+"&algInfo="+s[l].algInfo+"&dvid="+s[l].id+"&dct="+s[l].dct;o+='<div class="v v-small">'+'<div class="v-thumb">'+'<img src="'+s[l].picUrl+'" alt="" />'+"</div>"+'<div class="v-link">'+'<a href="'+s[l].playLink+'" target="_blank" title="'+c+'" charset="'+d+'"></a>'+"</div>"+'<div class="v-meta">'+'<div class="v-meta-info">'+'<a href="'+s[l].playLink+'" target="_blank" charset="'+d+'">'+c+"</a>"+"</div>"+"</div>"+"</div>"}o+='<div class="clear"></div>'}var f=e[n].desc;if(!f)f="还未添加频道介绍";if(f.length>15)f=f.substring(0,15)+"...";var p=this.clickParam+"&pos="+n+"&dma="+e[n].dma+"&algInfo="+e[n].algInfo;t+='<div class="card-container" style="display:none;" uid="'+e[n].id+'">'+'<div class="u-detail">'+'<div class="name-vip">'+'<a href="//i.youku.com/i/'+i.encodeUid(e[n].id)+'" target="_blank" charset="'+p+'"><span>'+e[n].username+"</span></a>&nbsp;"+r+"</div>"+"</div>"+'<div class="u-profile">'+'<img src="'+e[n].picUrl+'" />'+"</div>"+'<div class="fans-videos">'+"<span>粉丝 "+i.numberFormat(e[n].followersCount)+"</span>"+"</div>"+'<div class="card-cont">'+"<span>"+f+"</span>"+"</div>"+'<div class="u-meta-tagrt btn-subscribe">'+'<div class="form_btn form_btn_m form_btnmaj_m"><a href="//i.youku.com/i/'+i.encodeUid(e[n].id)+'?subscribe" target="_blank" charset="'+p+'"><span class="form_btn_text"><i class="ico_subscription"></i>订阅</span></a></div>'+"</div>"+'<div class="video-items">'+o+"</div>"+"</div>"}t+="</div>"}return t},changeNext:function(e){e("#changeNext").click(function(){var t=e(this).attr("value");t++;t=t>3?1:t;e(this).attr("value",t);e(".uRelated .items .u[value="+t+"]").show();e(".uRelated .items .u[value!="+t+"]").hide()})},userCardAction:function(e){var t=null;var i=null;var n=400;var a=null;var r=e(".u-thumb, .u-name");var o=[];e.each(r,function(){o.push(e(this).attr("cardplace","lr"))});e.each(o,function(){e(this).mouseenter(function(r){var o=e(this);var s=e(this).attr("uid");clearTimeout(a);a=setTimeout(function(){e(".card-container[uid="+s+"]").show();e(".card-container[uid!="+s+"]").hide();if(!t){t=new Qcard;i=e(t.getNode());i.mouseenter(function(){clearTimeout(a)}).mouseleave(function(){a=setTimeout(function(){t.hide()},n)})}t.setContent("element",e(".cardBox").show().get(0)).setRefer(o.get(0)).setType(o.attr("cardtype")?o.attr("cardtype"):0).setPos(o.attr("cardplace")).show(null,r)},n)}).mouseleave(function(e){clearTimeout(a);a=setTimeout(function(){t.hide()},n)})})},clickParam:null,createClickParam:function(e){var t=get_username("all");if(t.userid)var i="&uid="+t.userid;else var i="";this.clickParam="vc-cookie_id ="+Nova.Cookie.get("__ysuid")+i+"&vid="+window.videoId+"&sid="+window.showid+"&sct="+window.catId+"&apt=1&pg=1&md=1&abver="+e.ver+"&ord="+e.ord+"&req_id="+e.req_id+"&rand="+Math.random()},loadJS:function(e,t,i){},_getElementsByName:function(e,t,i){var n=window.document.getElementsByName(i);if(n.length>0)return n;n=new Array;var a=e||window.document;var r=a.getElementsByTagName(t);for(var o=0;o<r.length;o++)if(r[o].getAttribute("name")==i)n[n.length]=r[o];return n},_addEvent:function(e,t,i){if(window.addEventListener)if("mouseenter"==t||"mouseleave"==t){function n(e){var t=e.currentTarget,n=e.relatedTarget;if(!a(t,n)&&t!=n)i.call(e.currentTarget,e)}function a(e,t){try{return e.contains?e!=t&&e.contains(t):!!(16&e.compareDocumentPosition(t))}catch(i){}}if("mouseenter"==t)e.addEventListener("mouseover",n,false);else e.addEventListener("mouseout",n,false)}else e.addEventListener(t,i,false);else if(window.attachEvent)e.attachEvent("on"+t,i)},_addScript:function(e,t,i){if("string"!=typeof arguments[0])return;var t="function"==typeof arguments[1]?t:function(){};var i="boolean"==typeof arguments[2]?i:false;var n=document.getElementsByTagName("HEAD")[0];var a=document.createElement("SCRIPT");a.type="text/javascript";a.src=e;n.appendChild(a);if(!0)a.onerror=a.onload=function(){t();if(i)a.parentNode.removeChild(this)};else a.onreadystatechange=function(){if("loaded"==this.readyState||"complete"==this.readyState){t();if(i)this.parentNode.removeChild(this)}}},_cutStr:function(e,t,i){if(!e)return"";var n=0;var r=0;str_cut=new String;r=e.length;for(var o=0;o<r;o++){n++;a=e.charAt(o);if(escape(a).length>4)n++;if(n>t){if(i)str_cut=str_cut.concat(i);return str_cut}str_cut=str_cut.concat(a)}if(n<=t)return e},starShow:function(){this._model.getStar({vid:PageConfig.videoId,showid:PageConfig.showid,cid:PageConfig.catId})},starShowCallback:function(e){var n=this;var a='\n<div class="mod modSwitch mod-new">\n<div class="h">\n<!-- 演员 -->\n<ul class="head_tab">\n<% data.forEach(function(t, i){%> \n<li class="<%=(i=== 0 ? \'current\': \'\')%>" personid="<%=t.personid%>">\n<div class="pic">\n<a href="<%=t.starUrl%>" target="_blank"><img class="lazyImg" alt="<%=t.thumburl%>" src="http://static.youku.com/v1.0.1098/index/img/sprite.gif"></a>\n</div>\n<ul class="info">\n<li class="name">\n<a href="<%=t.starUrl%>" target="_blank"><%=t.personname%></a>\n</li>            \n<li class="area">\n<span><%=t.character%></span>\n</li>\n</ul>\n</li>\n<%})%>  \n</ul>\n<div class="clear"></div>\n</div>\n<div class="c">\n<div class="tab-h">\n<% data.forEach(function(t, i){ %> \n<ul personid="<%=t.personid%>" style="<%=(i == 0 ? \'\' : \'display:none\')%>">\n<% t.cates.forEach(function(value,index){ %> \n<li personid="<%=t.personid%>" index="<%=index%>" class="<%=(index== 0 ? \'current\': \'\')%>">\n<a><%=value.category%></a>\n</li>\n<%})%>  \n</ul>\n<%})%>  \n<div class="clear"></div>\n</div>\n<% data.forEach(function(star,i1){ %> \n<% star.showes.forEach(function(ul, i2){ %> \n<%if(i1==0 && i2==0) {%>\n<div class="tab-c" style="display: block;"  personid="<%=star.personid%>">\n<%}else {%>\n<div class="tab-c" style="display: none;"  personid="<%=star.personid%>">\n<%}%>\n<div name="m_pos" id="m_star<%=i1%><%=i2%>" modshow="1">\n<div class="yk-row yk-row-sm">\n<div class="modPSlide mod_pslide " id="mdstar<%=i1%><%=i2%>">\n<div class="mbtn prev" style="display: none;">\n<a href="#" class="iconfont" title="上一组"></a>\n</div>\n<div class="mbtn next" style="display: block;">\n<a href="#" class="iconfont" title="下一组"></a>\n</div>\n<ul class="panel" style="left: 0px;">   \n<% ul.forEach(function(t, i){ %> \n<li class="yk-col4 mr1">\n<div class="yk-pack pack-film">\n<div class="p-thumb">\n<a href="<%=t.url%>"  title="<%=t.name%>"  target="_blank"></a>\n<i class="bg"></i>\n<%if(i< 6){%>\n<img class="lazyImg" alt="<%=t.thumburl%>" src="http://static.youku.com/v1.0.1098/index/img/sprite.gif">\n<%}else{%>\n<img class="lazyLoad" alt="<%=t.thumburl%>" src="http://static.youku.com/v1.0.1098/index/img/sprite.gif">\n<%}%>\n<!-- 会员用券 -->\n<%if ((t.paid == "1" || t.paid == "2" ) && t.showid != \'60327\') {%>\n<%var rttext = t.paid == "1" ? "会员免费" : "会员用券";%>\n<div class="p-thumb-tagrt">\n<span class="vip-free"><%=rttext%></span>\n</div>\n<%}%>\n</div>  \n<!-- 标题 -->\n<ul class="info-list">\n<li class="title short-title">\n<%  var title = t.name;\nif (title.length > 17) \ntitle = title.substring(0, 17) + \'...\';%>\n<a href="<%=t.url%>" target="_blank" ><%=title%></a>\n</li>\n<% if (t.desc){ %>                \n<li class="subtitle">\n<%  var subtitle = t.desc;\nif (subtitle.length > 17) \nsubtitle = subtitle.substring(0, 17) + \'...\';%>\n<span><%=subtitle%></span>\n</li>\n<%}%>\n</ul>\n</div>\n</li>\n<%})%> \n</ul>\n</div>\n</div>\n</div>\n</div>\n<%})%> \n<%})%> \n</div>\n</div>';var r=t.compile(a)({data:e.stars,searchDomain:n.searchDomain,youku_homeurl:PageConfig.youku_homeurl,encodeUid:i.encodeUid,encodeURI:encodeURI,numberFormat:i.numberFormat});if(r){var o=$("#module_basic_star");o.html(r);c(o);n.bindStar("module_basic_star");setTimeout(function(){l({imgs:$("#module_basic_star").find(".lazyImg"),size:150})},500)}},bindStar:function(e){$("#"+e+" .head_tab>li").mouseenter(function(){$("#"+e+" .head_tab>li").each(function(){$(this).removeClass("current")});$(this).addClass("current");var t=$(this).attr("personid");$("#"+e+" .tab-h ul").each(function(){$(this).hide()});$("#"+e+" .tab-h ul[personid='"+t+"']").show();$("#"+e+" .tab-h ul[personid='"+t+"'] li").each(function(e){if(0==e)$(this).addClass("current");else $(this).removeClass("current")});$("#"+e+" .c .tab-c").each(function(){$(this).hide()});var i=$("#"+e+" .c .tab-c[personid='"+t+"']:first");i.show();i.find(".modPSlide").trigger("slider:show")});$("#"+e+" .tab-h ul").each(function(){$(this).children().each(function(t){$(this).click(function(){var i;$(this).parent().children().each(function(){$(this).removeClass("current")});$(this).addClass("current");var n=$(this).attr("personid");$("#"+e+" .c .tab-c").each(function(){$(this).hide()});i=$($("#"+e+" .c .tab-c[personid='"+n+"']")[t]);i.show();i.find(".modPSlide").trigger("slider:show")})})})},infoShow:function(){this._model.getInfo({vid:PageConfig.videoId,fid:PageConfig.folderId,pm:PageConfig.playmode})},infoCallback:function(e){if(2==PageConfig.playmode)this.bodanCallback(e);if(5==PageConfig.playmode)this.mvCallback(e)},bodanCallback:function(e){var n=this;var a='<!-- 播单信息 -->\n<div class="wrapper">\n<div class="header">\n<h2 class="moduletitle">播单信息</h2> \n<span><a href="<%=data.folderUrl%>" target="_blank">播单详情</a></span> \n</div>\n<div class="content">\n<div class="rows" style="display: block;"> \n<div class="row">\n<div class="left-part">\n<!-- 图片地址和跳转地址 -->\n<div class="p-thumb">\n<a href="<%=data.folderUrl%>" target="_blank"></a>\n<i class="bg"></i>\n<img class="" src="<%=data.thumbUrl%>">\n</div>\n</div>\n<div class="right-part ">\n<ul class="info">\n<!-- 标题 -->\n<li class="title oneline">\n<%=titleformate(data.title)%>\n</li>\n<li class="subtitle oneline">\n<span>创建者：<a target="_blank" href="<%=data.ownerUrl%>"><%=data.ownerName%></a></span>\n</li>\n<li class="subtitle">\n<% var viewCount = numberFormat(data.viewCount);%>\n<span>播放数：<%=viewCount%></span>\n</li>\n<li class="subtitle">\n<span>最近更新：<%=data.update%></span>\n</li>\n</ul>\n</div>\n</div> \n<div class="clear"></div>		\n</div>\n</div>\n</div>';var r=t.compile(a)({data:e.data,numberFormat:i.numberFormat,titleformate:n.titleformate});if(r){var o=$("#module_basic_info");o.addClass("bodan");o.html(r)}setTimeout(function(){},1e4)},mvCallback:function(e){var n=this;var a='<!-- 播单信息 -->\n<div class="wrapper">\n<div class="header">\n<h2 class="moduletitle">MV信息</h2> \n</div>\n<div class="content">\n<div class="rows" style="display: block;"> \n<div class="row">\n<div class="left-part">\n<!-- 图片地址和跳转地址 -->\n<div class="p-thumb">\n<a target="_blank" href="<%=data.ownerUrl%>"></a>\n<i class="bg"></i>\n<img src="<%=data.thumbUrl%>">\n</div>\n</div>\n<div class="right-part ">\n<ul class="info">\n<!-- 标题 -->\n<li class="title oneline">\n<%=titleformate(data.ownerName)%>\n</li>\n<li class="subtitle">\n<span><a target="_blank" href="//music.youku.com/">音乐MV</a> / <%=data.releaseDate%></span>\n</li>\n<li class="subtitle">\n<span>演唱：<a target="_blank" href="<%=data.ownerUrl%>"><%=data.ownerName%></a></span>\n</li>\n<li class="subtitle">\n<%if(data.lyricsWriter.id == 0){%>\n<span>词 / 曲：<%=data.lyricsWriter.name%>\n<%} else {%>\n<span>词 / 曲：<a target="_blank" href="<%=data.lyricsWriter.url%>"><%=data.lyricsWriter.name%></a>\n<%}%>\n/ \n<%if(data.composer.id == 0){%>\n<span><%=data.composer.name%>\n<%} else {%>\n<span><a target="_blank" href="<%=data.composer.url%>"><%=data.composer.name%></a>\n<%}%>\n</li>\n<%if (!!(data.alias)){%>\n<li class="subtitle">\n<span>别名：<%=data.alias%></span>\n</li>\n<%}%>\n</ul>\n</div>\n</div> \n<div class="clear"></div>		\n</div>\n</div>\n</div>';var r=t.compile(a)({data:e.data,numberFormat:i.numberFormat,titleformate:n.titleformate});if(r){var o=$("#module_basic_info");o.addClass("mv");o.html(r)}setTimeout(function(){},1e4)},likeShow:function(){var e=this;var t="//ykrec.youku.com/show/packed/list.json?guid="+n("__ysuid")+"&vid="+PageConfig.videoId+"&sid="+PageConfig.showid+"&cate="+PageConfig.catId+"&apptype=1&pg=3&module=1&pl=20&needTags=0&picSize=2&atrEnable=true&callback=?"+"&t="+(new Date).getTime();var i=r.uid();if(i)t+="&uid="+i;$.getJSON(t+"&t="+Math.random(),function(t){e.likeShowCallback(t)})},likeShowCallback:function(e){var n=this;var a=$("#module_basic_relationleft");if(!e.data||!e.data.length){a.hide();return}n.createLikeShowData(e);var r='<div class="mod modSwitch mod-new">\n<div class="h">\n<h2 class="moduletitle">大家都在看</h2>\n</div>\n<div class="c">\n<div class="tab-c" style="display: block;">\n<div name="m_pos" id="m_likeshow" modshow="1">\n<div class="yk-row yk-row-sm">\n<div class="modPSlide mod_pslide " id="mdlikeshow">\n<div class="mbtn prev" style="display: none;">\n<a href="#" class="iconfont" title="上一组"></a>\n</div>\n<div class="mbtn next" style="display: block;">\n<a href="#" class="iconfont" title="下一组"></a>\n</div>\n<ul class="panel" style="width: 2413px; left: 0px;">\n<% data.forEach(function(t, i){ %> \n<li class="yk-col4 mr1">\n<div class="yk-pack pack-film">\n<div class="p-thumb">\n<a href="<%=t.videoUrl%>" target="_blank" title="<%=t.title%>" _ck="<%=t.clickLogUrl%>" _reck="<%=t.recClickLogUrl%>" ></a>\n<i class="bg"></i>\n<%if(i< 6){%>\n<img src="<%=t.picUrl%>">\n<%}else{%>\n<img class="lazyLoad" alt="<%=t.picUrl%>" src="http://static.youku.com/v1.0.1098/index/img/sprite.gif">\n<%}%>\n<!-- 精选角标 -->\n<%if (t.mm == 1){%>\n<div class="p-thumb-taglt">\n<i class="ico-ischoice"></i>\n</div>\n<%}%>\n<!-- 会员用券 -->\n<%if (t.pay_state == "1" || t.pay_state == "2") {%>\n<%var rttext = t.pay_state == "1" ? "会员免费" : "会员用券";%>\n<div class="p-thumb-tagrt">\n<span class="vip-free"><%=rttext%></span>\n</div>\n<%}%>\n</div>\n<!-- 标题 -->\n<ul class="info-list">\n<li class="title short-title">\n<a href="<%=t.videoUrl%>" target="_blank" _ck="<%=t.clickLogUrl%>" _reck="<%=t.recClickLogUrl%>"><%=t.title%></a>\n</li>\n<% if (t.subTitle){ %>                \n<li class="subtitle">\n<span><%=t.subTitle%></span>\n</li>\n<% }  %>\n</ul>\n</div>\n</li>\n<%})%>  \n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>';var o=t.compile(r)({data:e.data,searchDomain:n.searchDomain,youku_homeurl:PageConfig.youku_homeurl,encodeUid:i.encodeUid,encodeURI:encodeURI,numberFormat:i.numberFormat});if(o){a.html(o);n.clickLogSender("#module_basic_relationleft",0);c(a)}setTimeout(function(){n.adStat(e.req_id)},1e4)},likeShowBind:function(){if(null!=document.getElementById("module_basic_relationleft"));jQuery(".p").hover(function(){jQuery(this).addClass("p-hover")},function(){jQuery(this).removeClass("p-hover")});jQuery(".ico_download").click(function(){var e=jQuery(this).attr("data-id");var t={from:"video",action:"show",secne:"ywebposter",sid:e};s.ikuExecuteFrompc(t)})},createStarShowData:function(e){var t=this;var i=e.data;if(i)for(var n=0,a=i.length;n<a;n++){var r="";var o="";var s="";var l="";var u="";var c="";var d="";if("undefined"==typeof i[n].playLink){if(1==i[n].type)r=PageConfig.homeHost+"v_show/id_"+i[n].codeId+".html";else if(2==i[n].type)r=PageConfig.youku_homeurl+"show_page/id_"+i[n].codeId+".html"}else r=i[n].playLink;if(197141899==i[n].id)r="//yikan.youku.com/u/home?from=y1.2.0.1";if("undefined"!=typeof i[n].mm&&1==i[n].mm&&"undefined"!=typeof i[n].clickLogUrl){var f="undefined"!=typeof i[n].clickRecordType&&2==i[n].clickRecordType?0:1;var p=i[n].clickLogUrl.replace("//r.l.youku.com/rec_at_click?","");o="at"+f+"-"+p}s=i[n].title;if(9==i[n].type){if(s.length>15)s=s.substring(0,15)+"..."}else if(s.length>7)s=s.substring(0,7)+"...";var l=t.charset(e,n,1);var u=i[n].mm||0;var c=t.datafrom(e,n,u);if("undefined"==typeof i[n].vPicUrl)d=i[n].picUrl;else d=i[n].vPicUrl;i[n].videoUrl=r;i[n].mmClickCharset=o;i[n].title=s;i[n].charset=l;i[n].mm=u;i[n].datafrom=c;i[n].picUrl=d}},createLikeShowData:function(e){var t=this;var i=e.data;if(i)for(var n=0,a=i.length;n<a;n++){var r="";var o="";var s="";var l="";if("undefined"==typeof i[n].playLink){if(1==i[n].type)r=PageConfig.homeHost+"v_show/id_"+i[n].codeId+".html";else if(2==i[n].type)r=PageConfig.youku_homeurl+"show_page/id_"+i[n].codeId+".html"}else r=i[n].playLink;if(197141899==i[n].id)r="//yikan.youku.com/u/home?from=y1.2.0.1";o=i[n].title;if(9==i[n].type){if(o.length>19)o=o.substring(0,19)+"..."}else if(o.length>19)o=o.substring(0,19)+"...";var s=i[n].mm||0;if("undefined"==typeof i[n].vPicUrl)l=i[n].picUrl;else l=i[n].vPicUrl;i[n].videoUrl=r;i[n].title=o;i[n].mm=s;i[n].picUrl=l}},isCheckingCanceled:false,ikuCheckingCallback:function(e){var t=$("iku-qwindow");var i="";if(!Boolean(t)||RelationAsync.isCheckingCanceled)return;if(e>=0)i='<div class="iku-qwindow" id="iku-qwindow"><div class="iku-tip-content"><i class="ico-iku-success"></i><p>已为您开启客户端</p></div><h3>您已安装最新无广告版优酷客户端</h3><p class="iku-bottom-text">启动优酷客户端后，点击该视频使用客户端观看</p></div>';else i='<div class="iku-qwindow" id="iku-qwindow"><div class="iku-tip-content"><i class="ico-loading-64"></i><p>正在为您下载...</p></div><h3>新版优酷客户端，免费去广告</h3><p class="iku-bottom-text">启动优酷客户端后，点击该视频使用客户端观看</p></div>';window.popwin.setContent("html",i);setTimeout(function(){window.popwin.config.onhide=function(){if(_player()){_player().style.height="100%";_player().style.width="100%"}};window.popwin.hide();RelationAsync.isCheckingCanceled=false},3e3)},commendVideo:function(){if($("commendvideos_async")){var e="/v_vpcommendvideosv5/cid_"+catId+"_rid_"+Math.floor(1e3*Math.random()%30);nova_update("commendvideos_async",e)}}});return m});define("page/find/play/advertisement",["tui/view","module/stat/common"],function(e,t){return e.extend({list:[{id:"module_ad_320",number:"320",time:1e3*9*60},{id:"module_ad_321",number:"321",time:1e3*5*60},{id:"module_ad_322",number:"322",time:1e3*25*60},{id:"module_ad_323",number:"323",time:1e3*15*60},{id:"ab_v_324",number:"324",videoSeconds:true},{id:"module_ad_325",number:"325",time:1e3*9*60},{id:"module_ad_327",number:"327"},{id:"module_ad_1436945825",number:"1436945825"},{id:"module_ad_1435125689",number:"1435125689"},{id:"module_ad_000000",number:"000000",videoSeconds:true}],relationList:[{id:"ab_v_1430192600",number:"1430192600"},{id:"ab_v_1430192617",number:"1430192617"},{id:"ab_v_1464781393",number:"1464781393"},{id:"ab_v_1464781428",number:"1464781428"},{id:"ab_v_1464781466",number:"1464781466"}],url:"//v2html.atm.youku.com/vhtml?t="+(new Date).getTime()+PageConfig.adsParams+"&pu="+encodeURIComponent(window.location.href)+"&ref="+encodeURIComponent(document.referrer)+"&sid="+t.pvid()+"&p=",initialize:function(){for(var e in this.list)this.addAD(this.list[e])
},addrelationListAd:function(){for(var e in this.relationList)this.addAD(this.relationList[e])},addAD:function(e){if($("#"+e.id).length>0){var t=this.url+e.number;if(e.videoSeconds)t+="&vl="+PageConfig.seconds;if(e.time){$.getScript(t);setInterval(function(){$.getScript(t)},e.time)}else $.getScript(t)}}})});define("module/stat/jserror",["tui/net","module/global"],function(e,t,i,n){var a=encodeURIComponent;var r=a(location.href);var o=a(navigator.userAgent);var s=window.ERROR_RAND||.01;var l={};var u=function(i,n,u){if(!u)i="custom: "+i;n=n||s;if(Math.random()<n){if(l[i])return;e.getRequest("//stats.tudou.com/e/page/js/fail/?v=1&s="+[a(i),r,t.juid+"_"+t.uid,o].join("|"));l[i]=true}};u.addVersion=function(e){r=a(e+":"+location.href)};if(Math.random()<s)window.onerror=function(e){setTimeout(function(){u(e,1,true)},0)};return u});define("tui/model",["tui/event"],function(e){function t(e){if(Array.isArray(e))return $.extend(true,{},{list:e}).list;return $.extend(true,{},e)}function i(e){var t=e instanceof r?[]:{};e.each(function(e,n){if(n instanceof r||n instanceof a)t[e]=i(n);else t[e]=n});return t}function n(e,t,i){var a=Array.isArray(e)?new i(e):new t(e);a.each(function(e,r){if(Array.isArray(r)||$.isPlainObject(r)){r=n(r,t,i);a._data[e]=r;if(r instanceof i||r instanceof t)r._parent=a}});return a}var a=e.extend({model:null,list:null,initialize:function(e){var i=this;a.superClass.initialize.call(i);i._parent=null;e=e?t(e):{};i._data=i.defaults?$.extend({},i.defaults,e):e;null==i.model&&(i.model=a);null==i.list&&(i.list=r)},each:function(e){var t=this;$.each(t._data,e);return t},key:function(e){var t;this.each(function(i,n){if(n===e){t=i;return false}});return t},get:function(e){if(void 0===e)return this._data;return this._data[e]},toJSON:function(){return i(this)},set:function(e,t){var i=this;if("object"==typeof e)$.each(e,function(e,t){i._set(e,t)});else i._set(e,t);return i._bindChangeEvent()},replace:function(e){return this._replace(e)},remove:function(e){var t=this;if(void 0===e){if(t._parent)t._parent.remove(t._parent.key(t));t._data=Array.isArray(t._data)?[]:{};if(t._parent)t.trigger("change",[]);else t._bindChangeEvent();return t}var i=t.get(e);if(Array.isArray(t._data))t._data.splice(e,1);else delete t._data[e];t._bindEvent("remove",e,i);return t._bindChangeEvent()},toModel:function(e){return this._toModel(e)},_set:function(e,t){var i=this;var n=void 0===i.get(e)?"add":"update";var a=i.get(e);var t=i._toModel(t);if(t===a)return;i._data[e]=t;return i._bindEvent(n,e,t,a)},_replace:function(e,t){var i=this;var n,a;var r=[];if(t){n=i.size();a="concat"}else{n=0;a="replace";i._data=Array.isArray(i._data)?[]:{}}$.each(e,function(e,t){r.push(i._data[n+e]=i._toModel(t))});setTimeout(function(){i.trigger(a,[e,r])},0);return i._bindChangeEvent()},_toModel:function(e){var t=this;if(Array.isArray(e)||$.isPlainObject(e))e=n(e,t.model,t.list);if(e instanceof r||e instanceof a)e._parent=t;return e},_bindChangeEvent:function(){var e=this;e.trigger("change",[]);if(e._parent)e._parent._bindChangeEvent();return e},_bindUpdateEvent:function(e){var t=this;t.trigger("update",[t.key(e),e]);if(t._parent)t._parent._bindUpdateEvent(t);return t},_bindEvent:function(e,t){var i=this;var n=$.makeArray(arguments).slice(2);i.trigger(e+":"+t,n);i.trigger("change:"+t,n);i.trigger(e,[t].concat(n));if(i._parent)i._parent._bindUpdateEvent(i);return i}});var r=a.extend({initialize:function(e){var i=this;r.superClass.initialize.call(i);i._data=e?t(e):[]},size:function(){return this._data.length},first:function(){return this._data[0]},last:function(){return this._data[this.size()-1]},where:function(e,t){var i=this;var n=[];i.each(function(i,a){var r=0;var o=0;$.each(e,function(e,i){if(t&&a.get(e)===i||!t&&a.get(e)==i)r++;o++});if(r===o)n.push(a)});return n},push:function(e){return this._insert(this.size(),e,"push")},unshift:function(e){return this._insert(0,e,"unshift")},insert:function(e,t){return this._insert(e,t,"insert")},concat:function(e){return this._replace(e,true)},pop:function(){return this.remove(this.size()-1)},shift:function(){return this.remove(0)},sort:function(e){this._data.sort(e);return this._bindChangeEvent()},_insert:function(e,t,i){var n=this;n._data.splice(e,0,void 0);n._set(e,t);n.trigger(i,[e,t]);return n._bindChangeEvent()}});a.List=r;return a});define("tui/ajaxModel",["tui/model","module/stat/jserror"],function(e,t){var i={};function n(e){var t={type:"get",url:"",cache:true,scriptCharset:"utf-8",dataType:"json",data:{},timeout:1e4};if(!("post"==e.type)&&(!e.dataType||"jsonp"==e.dataType))$.extend(e,{dataType:"jsonp",jsonp:e.jsonp||"jsoncallback"});e=$.extend(t,e||{});return $.ajax(e)}function a(e){$.each(e,function(t,n){var a=n;if("object"!=$.type(n)||!n.url)return;e[t]=function(){var e=this;var n=arguments;var o=$.extend(true,{},a||{},{data:n[0]||{}});var s=Array.isArray(e._data);var l;var u=(new Date).getTime();var c;var d=true;if(!o.jsonpCallback)o.jsonpCallback=(s?e.model.__mid+"List":e.constructor.__mid).replace(/[^\w]+/g,"_")+"__"+t;l=o.jsonpCallback;c=i[l];if(c&&u-c<1e3)d=false;if(false===o.requestGap)d=true;i[l]=u;if(d||"retry"==n[n.length-1])r.call(this,o,t,n)}})}function r(e,i,a){var r=this;var o=e.url;if("object"!==$.type(e.data))return;var s=$.param(e.data);var l;var u=e.jsonpCallback;var c=function(e){return[true,e]};a=$.makeArray(a);n(e).done(function(n){n=e.convert?e.convert.call(r,n,a[0]):c(n);if(true===n[0]){n[1]=n[1]||{};l=r._toModel(n[1]);if(e.toModel)r._data=l._data;r.fire(i+":success",[n[1]].concat(a))}else{r.fire(i+":error",[n[1]].concat(a));t("ConditionException::"+u+"::"+n)}}).fail(function(e,n,o){var l=n||o;var c="retry"!=a[a.length-1];if(c){t("FirstAutoRetry::"+u+"::"+l+"::"+s);r[i].apply(r,a.concat(["retry"]))}else t("retryError::"+u+"::"+l+"::"+s);r.fire(i+":error",[{status:l,msg:l},s])})}var o=e.extend({});o.List=e.List.extend({getIndex:function(e){var t=this;var i;t.each(function(t,n){$.each(e,function(e,a){if(n.get(e)===a)i=t})});return i}});var s=function(t,i){a(t);var n=e.extend.call(this,t,i);return n};o.extend=s;o.List.extend=s;return o});define("page/find/play/model/interaction/feePaymentPro",["tui/ajaxModel"],function(e){var t=PageConfig.homeHost;var i="//nc.youku.com/";var n="https://account.youku.com/";var a=e.extend({initialize:function(e){var t=this;a.superClass.initialize.call(t)},getFeeInfo:{url:t+"fee/feeinfo"+"?beta"+"&timestamp="+(new Date).getTime(),jsonp:"callback",convert:r},getFeeVip:{url:t+"fee/feevip"+"?beta"+"&timestamp="+(new Date).getTime(),jsonp:"callback",convert:r},getFeeQrcode:{url:t+"fee/payqrcode"+"?beta"+"&timestamp="+(new Date).getTime(),jsonp:"callback",convert:r},getFeeShow:{url:t+"fee/feeshow"+"?beta"+"&timestamp="+(new Date).getTime(),jsonp:"callback",convert:r},getConsumeTicket:{url:t+"fee/consumeticket"+"?beta"+"&timestamp="+(new Date).getTime(),jsonp:"callback",convert:r},getStatusLogin:{url:n+"qrcode/loginByCode.json?buid=youku"+"&template=&pid="+PageConfig.pid+"&timestamp="+(new Date).getTime(),jsonp:"jsonpCallback",convert:o}});function r(e){var t=e&&1==e.error?true:e.error;return[t,e]}function o(e){return[true,e]}return a});define("page/find/play/interaction/sideControl",["tui/view","tui/cookie","page/find/play/interaction/iku","tui/common"],function(e,t,i,n){var a=e.extend({el:$("#player_sidebar"),barCookie:"__list__",needCookie:true,status:0,changing:false,playmodekey:"P_L_M",initialize:function(e){a.superClass.initialize.call(this);var t=this;this.playBox=$("#playerBox");this.listArea=$(".listArea",this.el);this.listCtrl=$(".listcontrol",this.el);this.expandCont=$(".expandCont",this.el);this.expandLink=$(".expandCont .expandlink",this.el);if(!this.el)return false;if(4==PageConfig.playmode)this.playmodekey="W_P_L_M";this._sideShowControl()},events:{"click .expandCont,.listcontrol_side, .btn__showlist":"expandSideList","click #playlistIkuAD":"playlistClickAD"},turn:function(){if(true==this.changing)return false;var e=$(".list_tips",this.el);e.hide();this.changing=true;if(1==this.status)this._fadeRight();else this._fadeLeft()},open:function(){if(0==this.status)this.turn()},close:function(){if(1==this.status)this.turn()},_sideShowControl:function(){var e=t(this.barCookie);var i=this.$el;var n=this.listArea;var a=this.expandCont;var r=this.expandLink;var o=this.playBox;if(!n.length||!a.length)return false;if(1==e||!e){this.status=1;n.show();a.hide();o.removeClass("playBox_thx");i[0].style.width="";i.removeClass("expandBox");this.$el.addClass("slider-open")}else{this.status=0;o.addClass("playBox_thx");i.addClass("expandBox");n.hide();a.show();r.addClass("hover");var s=t(this.playmodekey);var l=t("P_F");this.$el.addClass("slider-close")}},_fadeLeft:function(){var e=this,i;e.status=1;if(this.needCookie)t(this.barCookie,1,360);var a=this.$el;var r=this.playBox;var o=this.listArea;var s=this.expandCont;var l=$(".listmask",a);l[0].style.display="block";a[0].style.overflow="hidden";this.$el.removeClass("slider-close").addClass("slider-open");function u(){a.removeClass("expandBox");a[0].style.overflow="";l[0].style.display="none";r.removeClass("playBox_thx");e.changing=false;e.trigger("SideControl:open",[])}if(n.supportStyle("animation")){a.addClass("moveleft");setTimeout(function(){o.show();s.hide()},100);setTimeout(function(){u();a.removeClass("moveleft")},500);return false}o.show();s.hide();a.animate({width:"380px"},"100","linear",function(){u()})},_fadeRight:function(){var e=this,i;var a=this.$el;var r=this.listArea;var o=this.expandCont;var s=this.expandLink;var l=this.playBox;var u=$(".listmask",a);e.status=0;if(this.needCookie)t(this.barCookie,0,360);u.show();a.css("overflow","hidden");l.addClass("playBox_thx");e.$el.removeClass("slider-open").addClass("slider-close");e.listCtrl.hide();function c(){a.addClass("expandBox");e.listCtrl.show();r.hide();o.show();s.addClass("hover");a[0].style.overflow="";u[0].style.display="none";e.changing=false}if(n.supportStyle("animation")){a.addClass("moveright");setTimeout(function(){a.removeClass("moveright");c()},500);return false}a.animate({width:"30px"},"100","linear",function(){c()})},playlistClickAD:function(e){var t=$(e.currentTarget).attr("vid");if(!t)t=PageConfig.videoId2;var n={from:"video",sid:t,action:"play",secne:"ywebrecommend",callback:function(){}};i.ikuExecuteFrompc(n)},expandSideList:function(){this.turn()}});return new a});define("page/find/play/interaction/feePaymentPro",["tui/view","tui/art","module/login/login","page/find/play/interaction/sideControl","page/find/play/interaction/dramaTab","page/find/play/model/interaction/feePaymentPro"],function(e,t,i,n,a,r){var o=e.extend({el:$("#feeInfo"),qPayRoundTime:1e4,buymovieiId:"",buymovloginiId:"",buymemiId:"",buymemloginiId:"",freshTime:18e4,initialize:function(){var e=this;o.superClass.initialize.call(this);this.mod=new r;this.modelEvents(this.mod);this.feeInfo();$(document).bind("login",function(){e.feeInfo()})},feeInfo:function(){if($("#feeInfo").length||$("#welfareInfo").length)this.mod.getFeeInfo({vid:PageConfig.videoId,showid:PageConfig.showid,t:Math.random()})},events:{"click #ticketPay":"ticketPay","click #gobacktopay":"gobacktopay","click #buymemqrcoderefresh":"rcoderefresh"},"{mod} getFeeInfo:success":function(e){var t=this;var i=e.data;if(""!==i){n.open();if(i["feeData"]){a.addTab("feeInfo","付费信息",true);$("#feeInfo").html(e["html"]);$("#feeInfo").show();setTimeout(function(){t.addInterval("all")},400)}if(i["welfareData"]){a.addTab("welfareInfo","会员福利",true);$("#welfareInfo").show();var r='<div id="welfaressinfo">\n<div class="pmovie-closei" id="nonmempayclose">\n<a><i></i></a>\n</div>\n<div class="clear"></div>\n<div class="pmovie-content">\n<iframe frameborder=0 scrolling="no" src="//svip.youku.com/viptab/index" style="width:100%;height:443px;border:0;"></iframe>\n</div>\n</div> ';$("#welfareInfo").html(r)}}},"{mod} getConsumeTicket:success":function(e){if(true==e.data)$("#feepayinfo").html('<div class="pmovie-content"><div class="success-icon"><i></i></div><div class="success-tips">'+'支付成功！刷新页面<br>即可观看</div><div class="clear"></div></div>');else{if($("#payinfo").length)$("#payinfo").hide();var t='<div class="pmovie-content"><div class="failed-icon"><i></i></div><div class="failed-tips">支付失败！'+'</div><div class="clear"></div><div class="back-pay">请 <a id="gobacktopay">返回重新支付</a> 或 ';var i="//cps.youku.com/redirect.html?id=0000a247&url="+encodeURIComponent("//pay.youku.com/buy/redirect.html?pstype=1&psid="+PageConfig.showid);t+='<a href="'+i+'">去收银台支付</a></div></div>';$("#feepayinfo").html($("#feepayinfo").html()+t)}},"{mod} getFeeShow:success":function(e){if(true==e.data){this.delInterval("all");window.location.reload(true)}},"{mod} getFeeVip:success":function(e){if(true==e.data){this.delInterval("all");window.location.reload(true)}},"{mod} getStatusLogin:success":function(e){var t=this;if("success"==e.result){if($("#qrcodetobuymov").length)t.addInterval("mov");if($("#qrcodetobuymem").length)t.addInterval("mem");clearTimeout(t.timeout);window.location.reload(true)}else if("QR_CODE_NOT_EXIST"==e.errorCode)this.delInterval("login")},"{mod} getFeeQrcode:success":function(e){var t=this;if($("#qrcodetobuymov").length)var i=$("#qrcodetobuymov");if($("#qrcodetobuymem").length)var i=$("#qrcodetobuymem");if(e&&e.data.shorturl&&e.data.qrcode&&i.length){i.attr("lcode",e.data.qrcode);i.html('<img style="border: 2px solid #fff;" src="//qrcode.ykimg.com/qr?t=//ql.youku.com/'+e.data.shorturl+'&logosize=0">'+'<div class="two-dimension-mask-hide" id="buymemqrcodetimeout"><div class="two-dimension-mask"></div>'+'<div class="two-dimension-refresh" id="buymemqrcoderefresh"><a><i></i></a></div></div>');setTimeout(function(){t.addInterval("login")},50)}},ticketPay:function(){this.mod.getConsumeTicket({showid:PageConfig.showid,t:Math.random()})},gobacktopay:function(){$("#feepayinfo>.pmovie-content",this.el).remove();$("#payinfo").show()},rcoderefresh:function(){this.mod.getFeeQrcode({vid:PageConfig.videoId})},addInterval:function(e){var t=this;t.delInterval("all");if("all"==e){if($("#qrcodetobuymov").length)t.buymovieiId=setInterval(function(){t.getStatusBuyMov()},t.qPayRoundTime);if($("#qrcodetobuymem").length)t.buymemiId=setInterval(function(){t.getStatusBuyMem()},t.qPayRoundTime)}else if("mov"==e){if($("#qrcodetobuymov").length)t.buymovieiId=setInterval(function(){t.getStatusBuyMov()},t.qPayRoundTime)}else if("mem"==e){if($("#qrcodetobuymem").length)t.buymemiId=setInterval(function(){t.getStatusBuyMem()},t.qPayRoundTime)}else if("login"==e)if($("#qrcodetobuymem").length){t.buymemloginiId=setInterval(function(){t.getStatusLogin("#qrcodetobuymem")},t.qPayRoundTime);t.timeout=setTimeout(function(){t.delInterval("all");t.showRefresh()},t.freshTime)}else if($("#qrcodetobuymov").length){t.buymovloginiId=setInterval(function(){t.getStatusLogin("#qrcodetobuymov")},t.qPayRoundTime);t.timeout=setTimeout(function(){t.delInterval("all");t.showRefresh()},t.freshTime)}},showRefresh:function(){if($("#buymemqrcodetimeout").length&&$("#buymemqrcoderefresh").length)$("#buymemqrcodetimeout").removeClass("two-dimension-mask-hide")},delInterval:function(e){if("all"==e){if(this.buymovieiId)clearInterval(this.buymovieiId);if(this.buymemiId)clearInterval(this.buymemiId);if(this.buymemloginiId)clearInterval(this.buymemloginiId)}else if("mov"==e){if(this.buymovieiId)clearInterval(this.buymovieiId)}else if("mem"==e){if(this.buymemiId)clearInterval(this.buymemiId)}else if("login"==e)if(this.buymemloginiId)clearInterval(this.buymemloginiId);else if(this.buymovloginiId)clearInterval(this.buymovloginiId)},getStatusBuyMov:function(){if(!i.isLogin())this.addInterval("login");else this.mod.getFeeShow({showid:PageConfig.showid,t:Math.random()})},getStatusBuyMem:function(){if(!i.isLogin())this.addInterval("login");else this.mod.getFeeVip({vid:PageConfig.videoId,showid:PageConfig.showid,t:Math.random()})},getStatusLogin:function(e){var t=$(e).attr("lcode");if(!i.isLogin()&&$(e).length&&t)this.mod.getStatusLogin({code:t,t:Math.random()})}});return o});define("page/find/play/interaction/pagesScroll",["tui/event","tui/cookie","page/find/play/model/interaction/dramaModel"],function(e,t,i){var n=e.extend({listContentId:"#playlist_content",playmodekey:"P_L_M",playlistMode:"#playlist_mode",initialize:function(e){n.superClass.initialize.call(this);var t=this;this.listContent=$(this.listContentId);if(e.scroll)this.scroll=e.scroll;this.pageNum=PageConfig.page.numTypePageNum||1;this.pageRange=[this.pageNum,this.pageNum];this._initScroll();this.$load=$('<div class="loading_item" ><img src="//static.youku.com/v/img/loading_32.gif"><span class="info">正在加载，请稍候...</span></div>');this.bindEvent();this.mod=new i;this.mod.bind("getPageData:success",this.rendPageDate.bind(this));"next"==this.pageFlag;t.genListContent(this.pageNum)},genListContent:function(e){if(true==this.loading)return false;this.loading=true;var t=this.listContent;this.pageNum=e||1;var i=[];i.push("pm_"+PageConfig.playmode);i.push("_vid_"+PageConfig.videoId);i.push("_page_"+this.pageNum);if(2==PageConfig.playmode){i.push("_fid_"+PageConfig.folderId);i.push("_o_"+PageConfig.forder)}if(5==PageConfig.playmode)i.push("_sid_"+PageConfig.singerId);if("pre"==this.pageFlag)t.prepend(this.$load);else t.append(this.$load);var n="page/playlist/"+i.join("");this.mod.getPageData(n,{})},rendPageDate:function(e){var t=$(e.html);var i=t.find(".current");var n=this;if(""==e.html){this.backStop=true;n.scrolling=false;n.loading=false;this.$load.remove();return}if("pre"==this.pageFlag)n.$load.after(t);else{i=i.length?i:this.listContent.find(".m_component").last();this.listContent.append(t)}this.$load.remove();setTimeout(function(){n.trigger("pages:show");if("pre"==n.pageFlag)n.scroll.scrollTo(10,false);else n.scroll.scrollToElement(i);n.scrolling=false;n.loading=false},1e3);this._initPlaylistMode()},_initScroll:function(){var e=this;this.backStop=false;this.scroll.bind("scroll:head",function(t){if(1==e.pageRange[0]){e.scrolling=false;return}if(1!=e.pageRange[0]&&!e.loading&&!e.scrolling){e.scrolling=true;e.pageFlag="pre";e.pageRange[0]--;e.genListContent(e.pageRange[0])}});this.scroll.bind("scroll:end",function(t){if(e.backStop)return;if(!e.loading&&!e.scrolling){e.scrolling=true;e.pageFlag="next";e.pageRange[1]++;e.genListContent(e.pageRange[1])}})},_initPlaylistMode:function(){var e=$(this.playlistMode);var i=$(">li",e);if(!e.length)return false;e.show();var n=t(this.playmodekey);var a=t("P_F");if(!n&&1==a){n=2;t(this.playmodekey,n,30)}i.removeClass("current");if(n&&1==a)i.eq(3-n).addClass("current");var r=$(this.listContentId);var o="";o=r.find(".program");var s=[];var l=null;var u=PageConfig.videoId2;var c=0;var d=null;for(var f=0;f<o.length;f++){var p=o.eq(f);var h="item_";var m=p.attr("id").replace(h,"");if(m==u)c=f;s.push(m)}if(1==n){l=u;d=true}else if(2==n){var v=c+1;v=v>=s.length?0:v;l=s[v];d=false}else if(3==n){var g=Math.floor(Math.random()*s.length);if(g==c)g=Math.floor(Math.random()*s.length);l=s[g];d=false}setTimeout(function(){ykPlyr.setPlayerLoop(d)},6e3);window["playlistVids"]=s;window["playerNextVid"]=l},bindEvent:function(){$("#playlist_mode>li").bind("click",this.setPlaylistMode.bind(this))},setPlaylistMode:function(e){var i,n,a;var r=$(e.currentTarget);var o=3-1*r.index();if(r.hasClass("current"))return false;n=t(this.playmodekey);if(n==o)return false;t("P_F",1,30);ykPlyr.PlayerContinuous(1);i=$(this.playlistMode);i.find(".current").removeClass("current");r.addClass("current");t(this.playmodekey,o,30);a=window["playlistVids"]||[];var s=0;for(var l=0;l<a.length;l++)if(a[l]==PageConfig.videoId2){s=l;break}if(1==o)playerNextVid=PageConfig.videoId2;else if(2==o){var u=s+1;if(u==a.length)playerNextVid=a[0];else if(a[u])playerNextVid=a[u]}else if(3==o){var c=Math.floor(Math.random()*a.length);if(c==s)c=Math.floor(Math.random()*a.length);playerNextVid=a[c]}window["playerNextVid"]=playerNextVid;if(1==o)ykPlyr.setPlayerLoop(true);else ykPlyr.setPlayerLoop(false)}});return n});define("page/find/play/interaction/pageSelect",["tui/view","tui/art","tui/util/num"],function(e,t,n){var a=e.extend({el:$("#pageList"),initialize:function(e){a.superClass.initialize.call(this);var t=this;this.render(e)},events:{"click .list-dropdown>a":"clickItem",mouseenter:"enter",mouseleave:"leave"},render:function(e){var i,n,a;this.type=e.type;if("Date"==e.type){if(0==e.lastMon-e.firstMon)return;i=this.getDateList(e);a='<i class="dropdown-icon"></i>\n<a class="current" href="javascript:void(0);" from="<%=cur[0]%><%=cur[1]%>01" to="<%=cur[3]%>" count="<%=cur[1]%>" >\n<%=cur[0]%>年<%=cur[1]%>月\n</a>\n<div class="list-dropdown">\n<% list.forEach(function(t, i){ %>\n<a class="<%if(cur[1]==t[1]){%>active<%}%>" from="<%=t[0]%><%=t[1]%>01" href="javascript:void(0);"   to="<%=t[3]%>" count="<%=t[1]%>"><%=t[0]%>年<%=t[1]%>月</a>          \n<% }); %>  \n</div>'}else if("Num"==e.type){if(e.totalepisodes<=100)return;i=this.getNumList(e);a='<i class="dropdown-icon"></i>\n<a class="current" href="javascript:void(0);" page="<%=cur[2]%>">\n<%=cur[0]%>-<%=cur[1]%>\n</a>\n<div class="list-dropdown">\n<% list.forEach(function(t, i){ %>\n<a class="<%if(cur[1]==t[1]){%>active<%}%>" href="javascript:void(0);" page="<%=t[2]%>">\n<%=t[0]%>-<%=t[1]%>\n</a>        \n<% }); %>  \n</div>'}else return;var r=t.compile(a)(i);this.$el.html(r).show();this.$list=$(".list-dropdown",this.$el)},getDateList:function(e){var t=[];var a=[];var r=null;for(i=1*e.firstMon;i<=1*e.lastMon;i++){var o=[];o.push(e.year);o.push(n.format(i,"00"));o.push(n.format(this.dayNumOfMonth(e.year,i),"00"));o.push(o.join(""));t.push(o);if(i==1*e.currMon)a=o}return{list:t,cur:a}},getNumList:function(e){var t=100;var a=[];var r=[];var o=Math.ceil(e.totalepisodes/t);for(i=1;i<=o;i++){var s=[];s.push(n.format((i-1)*t+1,"000"));if(i==o)s.push(n.format(e.totalepisodes,"000"));else s.push(n.format(i*t,"000"));s.push(i);a.push(s);if(i==e.numTypePageNum)r=s}return{list:a,cur:r}},enter:function(){this.$list.show()},leave:function(){this.$list.hide()},dayNumOfMonth:function(e,t){t--;var i=new Date(e,t,1);i.setDate(i.getDate()+32-i.getDate());return 32-i.getDate()},clickItem:function(e){var t=$(".current",this.$el);var i=$(e.currentTarget);var n=i.clone().addClass("current");var a;this.$list.find(".active").removeClass("active");i.addClass("active");t.replaceWith(n);this.$list.hide();if("Date"==this.type)a={from:n.attr("from"),to:n.attr("to"),count:n.attr("count")};else if("Num"==this.type)a={page:n.attr("page")};this.trigger("PageSelect:change",[a])}});return a});define("page/find/play/interaction/pages",["tui/event","page/find/play/interaction/pageSelect","page/find/play/model/interaction/dramaModel"],function(e,t,i){var n=e.extend({initialize:function(e){n.superClass.initialize.call(this);this.$listWrapDiv=$("#Dramalist_wrap");this.tabId="Drama";this.clickStatStr="tp=1&cp=4008024&cpp=1000705";this.loading=false;var a=this;var r=new t(e);r.bind("PageSelect:change",function(t){if("Num"==e.type)a.addListContents("page"+t.page);else if("Date"==e.type)a.addListContents("from_"+t.from+"_to_"+t.to+"_count_"+t.count)});this.mod=new i;this.mod.bind("getPageData:success",this.rendPageDate.bind(this))},addListContents:function(e,t){var i="listitem_";if(this.loading)return;if(this.$listWrapDiv.length){this.$listWrapDiv.hide();this.divId=i+e;var n=$("#"+this.divId);if(n.length){this.$listWrapDiv.find(">div").hide();n.show();this.$listWrapDiv.show();this.trigger("pages:show",[])}else{var a=this;var r="";if(0==e.indexOf("page")){this.page=e.replace("page","");a.loading=true;r="page/playlist/pm_"+PageConfig.playmode+"_vid_"+PageConfig.videoId+"_showid_"+PageConfig.showid+"_page_"+this.page;if(PageConfig.parentvideoid)r+="_v_"+PageConfig.parentvideoid;this.mod.getPageData(r,{})}else if(0==e.indexOf("from")){var o=e.split("_");if(6==o.length){var s=o[1];var l=o[3];this.page=o[5];a.loading=true;var r="page/playlist/pm_"+PageConfig.playmode+"_vid_"+PageConfig.videoId+"_showid_"+PageConfig.showid+"_datefrom_"+s+"_dateto_"+l+"_lastmon_"+PageConfig.page.lastMon+"_page_"+this.page+"_pid_"+PageConfig.page.pid;if(PageConfig.parentvideoid)r+="_v_"+PageConfig.parentvideoid;this.mod.getPageData(r,{})}}}}},rendPageDate:function(e){var t=$("<div>").attr("id",this.divId);$("#vpofficiallistv5_wrap").remove();t.html(e.html);this.$listWrapDiv.find(">div").hide();this.$listWrapDiv.append(t);t.show();this.$listWrapDiv.show();if(t.find("#show_vv_broadcast").length)$(document).trigger("show:broadcast");this.loading=false;this.trigger("pages:show",[this.page])}});return n});define("page/find/play/interaction/playlist",["tui/view","tui/cookie","tui/scrollbar2","tui/util/num","page/find/play/interaction/pages","page/find/play/interaction/pagesScroll","page/find/play/model/interaction/dramaModel"],function(e,t,i,n,a,r,o){var s=e.extend({initialize:function(){var e=this;this._initScroll();this._pageInit();this.mod=new o;ykPlyr.bind("player:onPlayerStart",this.initOnPlayerStart.bind(this));if(97==PageConfig.catId)this.mod.bind("getTVPoint:success",this.rendTVPoint.bind(this));this.$el.bind("list:update",function(){e.scroll.update()})},events:{"click #score_db":"douban_grade","click #db_close":"douban_grade_close",'mouseover .item[name="tvlist"] .sn':"tvPopEnter",'mouseleave .item[name="tvlist"] .sn':"tvPopOut"},initOnPlayerStart:function(e){if(e.isFullScreen){this.upTitle();try{if("replaceState"in history){var i="/v_show/id_"+PageConfig.videoId2+".html";if(PageConfig.folderId)i+="?f="+PageConfig.folderId;var n={url:i};history.replaceState(n,"",i)}}catch(a){}}else{var r=t("u");if("__LOGOUT__"==r&&(0==PageConfig.DuboLoginLimitTime||!PageConfig.DuboLoginLimitTime)&&(0==PageConfig.SubscribeLoginLimitTime||!PageConfig.SubscribeLoginLimitTime)){var o=3;var s=t("view")||0;if(s>=o||s<0){setTimeout(function(){try{ykPlyr.pauseVideo(true);ykPlyr.zoomOut()}catch(e){}},2e3);t("view",0,{expires:1});PageConfig.login_player8=true;$("#qheader_login").trigger("click")}else t("view",++s,{expires:1})}}},upTitle:function(){var e=PageConfig.videoId2;var t="item_";var i=$('[id="'+t+e+'"]');var n=i.attr("title");var a=$("#subtitle");$(".lists .current",this.el).removeClass("current");i.addClass("current");if(a.length&&""!=n&&a.html()!=n){a.html(n);a.parent().attr("title",n);document.title=n}},douban_grade:function(e){var t=$("#score_db_panel"),i=$("span",$(e.currentTarget));t.toggle();if(i.hasClass("db_expand"))i.removeClass("db_expand");else i.addClass("db_expand")},douban_grade_close:function(e){$("#score_db_panel").hide();$("#score_db span").removeClass("db_expand")},tvPopEnter:function(e){var t=$(e.currentTarget).parent();var i=t.attr("flag");var n=$("#vcard"+i);var a=this;t.addClass("iHover");if(!n.length||n.hasClass("loaded"))return;a._toPopLayer(n,i)},tvPopOut:function(e){$(e.currentTarget).parent().removeClass("iHover")},_toPopLayer:function(e,t){var i=t%5;var n=e.attr("vid");var a=this.$el.find("#mvPlayList");var r=a.height();var o=e.parent().position().top;var s=a.scrollTop();i=0==i?5:i;var l="vcard"+i+"n";e.addClass("vcard").addClass(l).removeClass("vcard_top");if(o-s>r/2)e.addClass("vcard_top");if(!e.hasClass("loaded"))this.mod.getTVPoint({vid:n})},rendTVPoint:function(e){if(e.data&&e.data.vid)if(""!=e.html)$("[vid="+e.data.vid+"]").html(e.html).addClass("loaded");else $("[vid="+e.data.vid+"]").remove()},_initScroll:function(){this.scroll=new i($(".scroller",this.el));var e=$(".lists .current",this.el);if(e.length)this.scroll.scrollToElement(e,{pos:120});this.loadScrollImage()},loadScrollImage:function(){var e=this;var t=$(".scroller",this.el);var i=t.find("img[_src]");var n=[];var a=t.height();setTimeout(function(){r(0)},50);if(i.length)$.each(i,function(e,t){n.push([$(t).closest("li.item").position().top,i.eq(e)])});this.scroll.bind("scroll",function(e){setTimeout(function(){r(e)},100)});function r(e){var t=0;while(n.length){if(n[0][0]<e+a){var i=n[0][1];i.attr("src",i.attr("_src"));n.shift()}else break;t++}}},_pageInit:function(){var e=null;var t=this;if(PageConfig.page){var i=PageConfig.page;i.scroll=t.scroll;if("Date"==i.type)e=new a(i);else if("Num"==i.type)e=new a(i);else if("Scroll"==i.type)e=new r(i)}if(e){this.pages=e;this.pages.bind("pages:clickTab",function(){t.scroll.update()});this.pages.bind("pages:show",function(){t.scroll.update();t.loadScrollImage()})}}});return s});define("page/find/play/interaction/main",["tui/view","tui/cookie","tui/art","module/responsive","page/find/play/interaction/sideControl","page/find/play/interaction/dramaTab","page/find/play/interaction/playlist","page/find/play/interaction/feePaymentPro"],function(e,t,i,n,a,r,o,s){var l=e.extend({initialize:function(e){l.superClass.initialize.call(this);var t=this;if($("#module_basic_playlist").length){this.Playlist=new o({el:"#Drama"});n.bind("player:responsive",function(){if("Drama"==r.current)t.Playlist.scroll.update()});r.bind("tab:show",function(e){t.Playlist.scroll.update()});a.bind("SideControl:open",function(){t.Playlist.scroll.update()});if(PageConfig.tabs)this.tabsInit()}},tabsInit:function(){var e=PageConfig.tabs.split(",");$.each(e,function(e,t){if("feeinfo"==t)new s})}});return l});define("page/find/play/sideTool",["tui/view","tui/art","tui/cookie","tui/net","module/login/login","module/stat/log"],function(View,Art,Cookie,Net,Login,Log){var SideTool=View.extend({tool:"sideTool",appQrcodeisshow:true,initialize:function(){var e=this;var t='<div id="sideTool" class="right-sideBar">\n<ul class="yk-toolbar-service js-toolbar" id="toolbarservice" data-stat-role="ck">\n<li class="bigImg yk-toolbar-draw js-draw" id="lotteryToolbarBig"  style="display: none;"></li>\n<li class="yk-toolbar-draw js-draw" id="lotteryToolbar"  style="display: none;"></li>\n<li class="yk-toolbar-group">\n<a class="toolbar icon-5" id="icongroupqrcode" title="二维码">\n<div class="yk-toolbar-group-item js-dest-qrcode" id="iconitemqrcode"></div>\n<div class="qrcode-popup yk-toolbar-group-panel-li" id="showAppQrcode" style="display: none;">\n<div class="qrcode-arrow"></div>\n<p>下载手机客户端</p>\n<img src="//r1.ykimg.com/0510000058D0FEA1ADC0AE058F099020" width="100"/>\n<span>微信扫一扫</span><span>视频随时看</span>\n</div>\n</a>			\n</li>\n<li class="yk-toolbar-group" id="icongroupquestion" style="display: none;">\n<a class="toolbar icon-6" id="ToolbarQuestionLink" href="#" target="_blank" title="问卷"><div class="yk-toolbar-group-item js-dest-question" id="iconitemquestion" data-stat-role="ck"></div></a>\n</li>		\n<li class="yk-toolbar-group" id="icongroupgotop" style="display: none;">\n<a class="toolbar icon-2"><div class="yk-toolbar-group-item js-dest-goTop" data-stat-role="ck" id="iconitemgotop"></div></a>\n</li>\n<li class="yk-toolbar-group" id="lightoff">\n<a class="toolbar icon-4"><div class="yk-toolbar-group-item js-dest-lightOn" id="iconitemlighton" data-stat-role="ck" title="关灯"></div></a>\n</li>\n<li class="yk-toolbar-group" id="icongroupfeedback">\n<a class="toolbar icon-3" href="//csc.youku.com/feedback-web/web/subtype_16" target="_blank" title="反馈"><div class="yk-toolbar-group-item js-dest-feedback" id="iconitemfeedback" data-stat-role="ck"></div></a>\n</li>\n</ul>\n</div>\n<div id="light_switch" style="display: none;">\n<div id="playshow_mask" style="display: block;"></div>\n<div class="sideTool sideTool_dark" id="sideToolDark" style="display: block;">\n<div class="handle" id="lighton"><a class="icon-light-off" href="javascript:;" title="开灯"></a></div>\n</div>\n</div>';$("body").append($(t));this.$el=$("#sideTool");$("#sideBar").remove();$(document).bind("show:question",this.goQuestion.bind(this));this.$goTop=$("#icongroupgotop");this.$btnQrcode=$("#icongroupqrcode");this.QrStatus=1;this._bindEvent();this.goTopStatus();Login.one("checklogin",function(){setTimeout(function(){e.showRunIcon()},100)})},goTop:function(){$("body,html").animate({scrollTop:0},800);return false},goQuestion:function(e,t){var i=this.$el.find("#icongroupquestion");$("#ToolbarQuestionLink").attr({href:t.link,title:t.name});i.show()},goTopStatus:function(){var e=$(window).scrollTop();if(e>300)this.$goTop.hide();else this.$goTop.show()},showQrcode:function(e){var t=this,i,n;
var a=$("#showAppQrcode");var r=[{right:"0px",opacity:0},{right:"50px",opacity:1}];if(1==this.QrStatus){if("close"==e)return;i=r[0];n=r[1]}else{i=r[1];n=r[0]}a.css(i);a.show().animate(n,300,function(){if(t.QrStatus==-1)a.hide();t.QrStatus=t.QrStatus*-1});return false},_bindEvent:function(){var e=$(window);var t=this;var i=true;e.bind("scroll",function(){if(i){setTimeout(function(){t.goTopStatus();i=true},200);i=false}});this.$goTop.bind("click",this.goTop.bind(this));this.$btnQrcode.bind("click",this.showQrcode.bind(this));$(document).bind("click",function(){t.showQrcode.call(t,"close")})},showRunIcon:function(){if(!PageConfig.lottery_open_sidetool||""==PageConfig.lottery_open_sidetool||!$("#lotteryToolbarBig").length||!$("#lotteryToolbar").length)return false;var e=Login.uid();var t=this;var i="//ykatr.youku.com/atr/related/packed_list.json",n=1,a=Cookie("__ysuid"),r=1,o=16,s=1,l="ykqz_toolbar";var u;i+="?site="+n+"&guid="+a+"&apptype="+r+"&module="+o+"&pl="+s+"&oc="+l;i+="&uid="+Login.uid();if("undefined"!=typeof PageConfig.playmode){u=1;if(0!=PageConfig.videoId){var c=PageConfig.videoId;i+="&vid="+c}if(0!=PageConfig.showid){var d=PageConfig.showid;i+="&sid="+d}if("undefined"!=typeof PageConfig.catId){var f=PageConfig.catId;i+="&cate="+f}}else{u=30;if("object"==typeof svargs)if("undefined"!=typeof svargs.catid&&0!=svargs.catid){var f=svargs.catid;i+="&cate="+f}if(1==window.youku_show_page&&"object"==typeof g_config){if("undefined"!=typeof g_config.pk_odshow){var d=g_config.pk_odshow;i+="&sid="+g_config.pk_odshow}if("undefined"!=typeof g_config.cat_id&&0!=typeof g_config.cat_id){var f=g_config.cat_id;i+="&cate="+f}}}i+="&pg="+u;i+="&callback=?";$.getJSON(i,function(e){t.showRunIconCallback(e)})},showRunIconCallback:function(e){if(0==e.e){var t=e.data[0];var i=t.clickLogUrl;$("#lotteryToolbar").show();var n='<div id="lotteryLeft" class="ykDraw-panel ykDraw-panel-reward" style="position:relative;width:100%;height:100%;"><a href="'+t.playLink+'" target="_blank" style="cursor:pointer;position:absolute;width:100%;height:100%;background:url('+t.picUrl+') no-repeat;background-position:0 -40px;margin-top:10px;"></a><span id="lotteryHand" class="ykDraw-p-itemykDraw-p-item-close" style="cursor:pointer;position:absolute;width:13px;height:13px;left:0px;top:0px;background:url('+t.picUrl+') no-repeat;background-position:-42px 0;"></span></div></div></div>';var a='<div class="yk-toolbar-draw js-draw"><div class="yk-toolbar-group yk-toolbar-group-draw"><div class="ykDraw-mark" id="lotteryRight"><a href="'+t.playLink+'" target="_blank" style="position:relative;display:block;height:38px;"><span class="ykDraw-m-item ykDraw-m-item-bag" style="background:url('+t.picUrl+') no-repeat;width:100%;height:100%;background-position:0 0;z-index:1;display:block;margin:0 auto;"></span></a></div>';$("#lotteryToolbarBig").html(n);$("#lotteryToolbar").html(a);$("#lotteryToolbar").show();if("yes"!=Cookie("runIcon_day")&&window.screen.width>=1440)$("#lotteryToolbarBig").show();if(null==Cookie("runIcon_day")||"undefined"==Cookie("runIcon_day"))this.appQrcodeisshow=false;this.showRunIconLog(i)}},showRunIconLog:function(e){var t=e;if(t)var i;function n(e){if(t){var i=new Image;i.src=t+"&optype="+e}}$("#lotteryLeft").bind("click",function(){i=6;Log.log(1,"tp=1&cp=4010337&cpp=1000940");n(i)});$("#lotteryRight").bind("click",function(){i=8;Log.log(1,"tp=1&cp=4010338&cpp=1000940");n(i)});$("#lotteryHand").bind("click",function(e){$("#lotteryToolbarBig").hide();$("#lotteryToolbar").show();Cookie("runIcon_day","yes",1);i=9;Log.log(1,"tp=1&cp=4009622&cpp=1000217");n(i);return false})},lottery:function(){if(!PageConfig.lottery_open_sidetool||""==PageConfig.lottery_open_sidetool||!$("#lotteryToolbarBig").length||!$("#lotteryToolbar").length)return false;var lotteryCon=eval(PageConfig.lottery_sidetool);if(!lotteryCon||"object"!=typeof lotteryCon)return false;var lotterystart="";var lotteryend="";var lottery_small_start="";var lottery_small_end="";var lotterybackground="";var lotterytype="";var lotteryurl="";var lotteryLayerW="";var lotteryLayerH="";for(var i=0;i<lotteryCon.length;i++){if("object"!=typeof lotteryCon[i]||!lotteryCon[i].start||!lotteryCon[i].end||!lotteryCon[i].type||!lotteryCon[i].background)continue;lotterystart=lotteryCon[i].start;lotteryend=lotteryCon[i].end;lottery_small_start=lotteryCon[i].small_start;lottery_small_end=lotteryCon[i].small_end;lotterybackground=lotteryCon[i].background+"?t="+Math.random();lotterytype=lotteryCon[i].type;lotteryurl=lotteryCon[i].url;if(2==lotterytype){lotteryLayerW=!lotteryCon[i].layerw?485:lotteryCon[i].layerw;lotteryLayerH=!lotteryCon[i].layerh?426:lotteryCon[i].layerh}var starttime=new Date(lotterystart).valueOf();var endtime=new Date(lotteryend).valueOf();var small_starttime=new Date(lottery_small_start).valueOf();var small_endtime=new Date(lottery_small_end).valueOf();var nowDate=new Date;var nowtime=nowDate.valueOf();var nowDay=nowDate.getDate().toString();var nowMonth=nowDate.getMonth().toString();var nowYear=nowDate.getFullYear().toString();var clolseCookieValueNow=nowYear+nowMonth+nowDay;var lotteryToolbarInner="";var lotteryToolbarBigInner="";if(nowtime>starttime&&nowtime<endtime||nowtime>small_starttime&&nowtime<small_endtime){$("lotteryToolbar").style.display="block";lotteryToolbarInner='<div class="yk-toolbar-draw js-draw"><div class="yk-toolbar-group yk-toolbar-group-draw">'+'<div class="ykDraw-mark" id="lotteryRight">';if(1==lotterytype)lotteryToolbarInner+='<a href="'+lotteryurl+'" target="_blank" onclick="Log.log(1, \'tp=1&cp=4010338&cpp=1000940\');" style="position:relative;display:block;height:38px;">'+'<span class="ykDraw-m-item ykDraw-m-item-bag" style="background:url('+lotterybackground+") no-repeat;width:100%;height:100%;background-position:0 0;"+'z-index:1;display:block;margin:0 auto;"></span></a>';else if(2==lotterytype)lotteryToolbarInner+="<span onclick=\"SideTool.lotteryLayer('"+lotteryurl+"','"+lotteryLayerW+"','"+lotteryLayerH+"');Log.log(1, 'tp=1&cp=4010338&cpp=1000940');\" style=\"cursor:pointer;position:relative;display:block;height:38px;\">"+'<span class="ykDraw-m-item ykDraw-m-item-bag" style="background:url('+lotterybackground+") no-repeat;width:100%;height:100%;background-position:0 0;"+'z-index:1;display:block;margin:0 auto;"></span></span>';else lotteryToolbarInner+='<span style="cursor:pointer;position:relative;display:block;height:38px;">'+'<span class="ykDraw-m-item ykDraw-m-item-bag" style="background:url('+lotterybackground+") no-repeat;width:100%;height:100%;background-position:0 0;"+'z-index:1;display:block;margin:0 auto;"></span></span>';lotteryToolbarInner+="</div>";lotteryToolbarBigInner+='<div id="lotteryLeft" class="ykDraw-panel ykDraw-panel-reward" style="position:relative;width:100%;height:100%;">';if(1==lotterytype)lotteryToolbarBigInner+='<a href="'+lotteryurl+'" target="_blank" onclick="Log.log(1, \'tp=1&cp=4010337&cpp=1000940\');" '+'style="cursor:pointer;position:absolute;width:100%;height:100%;background:url('+lotterybackground+') no-repeat;background-position:0 -40px;margin-top:10px;"></a>';else if(2==lotterytype)lotteryToolbarBigInner+="<span onclick=\"SideTool.lotteryLayer('"+lotteryurl+"','"+lotteryLayerW+"','"+lotteryLayerH+"');Log.log(1, 'tp=1&cp=4010337&cpp=1000940');\" "+'style="cursor:pointer;position:absolute;width:100%;height:100%;background:url('+lotterybackground+') no-repeat;background-position:0 -40px;margin-top:10px;"></span>';else lotteryToolbarBigInner+='<span style="cursor:pointer;position:absolute;width:100%;height:100%;background:url('+lotterybackground+') no-repeat;background-position:0 -40px;margin-top:10px"></span>';lotteryToolbarBigInner+='<span id="lotteryHand" class="ykDraw-p-itemykDraw-p-item-close" style="cursor:pointer;position:absolute;width:13px;'+"height:13px;left:0px;top:0px;background:url("+lotterybackground+') no-repeat;background-position:-42px 0;"></span>'+"</div></div></div>";$("lotteryToolbarBig").innerHTML=lotteryToolbarBigInner;if(nowtime>starttime&&nowtime<endtime)$("lotteryToolbarBig").style.display="block";$("lotteryToolbar").innerHTML=lotteryToolbarInner;if(clolseCookieValueNow==Nova.Cookie.get("lottery_day")){$("lotteryToolbarBig").style.display="none";$("lotteryToolbar").style.display="block"}if($("lotteryHand"))$("lotteryHand").onclick=function(e){$("lotteryToolbarBig").style.display="none";$("lotteryToolbar").style.display="block";Log.log(1,"tp=1&cp=4009622&cpp=1000217");var t=new Date;var i=t.getDate().toString();var n=t.getMonth().toString();var a=t.getFullYear().toString();var r=a+n+i;Nova.Cookie.set("lottery_day",r,1);var o=e||window.event;if(o.stopPropagation)o.stopPropagation();return false}}}},lotteryLayer:function(e,t,i){if(!e||!t||!i)return false;if("function"==typeof PlayerPause)PlayerPause(1);if(window.popwin)popwin.hide();window.popwinLottery=new Qwindow;window.popwinLottery.setSize(t,i).setContent("iframe",e).setHideCallback(function(){if("function"==typeof PlayerPause)PlayerPause(0)}).show();Log.log(1,"tp=1&cp=4009623&cpp=1000217")}});return SideTool});define("page/find/play/player/pipAd",["tui/event","tui/net","tui/art"],function(e,t,i){var n=null;var a=1e3*10*60;var r=false;var o=false;var s;function l(e){return e&&""!=e&&null!=e&&"null"!=e&&"undefined"!=e}var u=e.extend({initialize:function(){this.prePip=$("#ab_pip_pre")},adInit:function(e,t){if(!e)return;if(e&&e[t])this.analyzeContent(e[t]);t+=1;for(;t<e.length;t++)if(e[t]){var i=e[t];if(l(i.F1)&&l(i.CU)){r=true;break}}if(r){this.show_pip();this.ab_v_ad1()}},midAdInit:function(e,t){var i=this;if(e&&e[t]){this.analyzeContent(e[t]);if(r){this.show_pip();this.ab_v_ad1()}}},analyzeContent:function(e){var n=e.F1;var a=e.CU;var o=/\.swf$/i.test(n);var s=/<\/script>$/.test(n);var u='<div id="f1_ideaid" class="mod">\n<%if(isSwf){%>\n<object type="application/x-shockwave-flash" data="<%=data.flash%>" width="300" height="<%=data.F3%>">\n<param name="wmode" value="transparent">\n<param name="movie" value="<%=data.flash%>" width="300" height="<%=data.F3%>" />\n<embed src="<%=data.flash%>" width="300" height="<%=data.F3%>" border="0" align="center" wmode="transparent"/>\n</object>\n<%}else{%>\n<a href="<%=data.CU%>" target="_blank">\n<img src="<%=data.F1%>" border="0" id="bas_ideaid"/>\n</a>\n<%}%>\n</div>';var c=s?"script":"html";var d=Math.random();t.getRequest("http://count.atm.youku.com/msg?s=yth&k=6&msg=expose|"+c);if(o)e.flash=e.F1+"?url="+escape(e.CU);if(s){$(document.body).append(n);t.getRequest("http://count.atm.youku.com/msg?s=yth&k=6&msg=script");return}if(l(n)&&l(a)){e.F3=50;this.prePip.html(i.compile(u)({data:e,isSwf:o}));t.getRequest("http://count.atm.youku.com/msg?s=yth&k=6&msg=html");r=true}},show_pip:function(){this.prePip.show();$("#ab_863").hide();$("#ab_v_324").hide()},ab_v_ad1:function(){var e=this;if(s)clearTimeout(s);s=setTimeout(function(){t.getRequest("//v2html.atm.youku.com/vhtml?p=324"+PageConfig.adsParams+"&t="+(new Date).getTime()+"&vl="+PageConfig.seconds)+"&pu="+window.location.href+"&ref="+document.referrer+"&sid="+window.logPvid;e.prePip.hide();$("#ab_v_324").show()},a)}});u.getInstance=function(){if(n)return n;else return n=new u};return u.getInstance()});define("page/find/play/player/light",["tui/event"],function(e){return e.extend({status:"on",auto_off:false,changing:false,lightswitch:"#light_switch",lightoff:"lightoff",lighton:"lighton",initialize:function(){var e=this;if(/_l_off/.test(location.href))this.auto_off=true;window.setTimeout(function(){$("#lighton,#lightoff").on("click",function(){e.turn()});ykPlyr.bind("player:onLight",function(){e.on()})},200)},turn:function(){if(true==this.changing)return false;if("on"==this.status)this.off();else this.on()},on:function(){if(true==this.changing)return false;this.changing=true;this.auto_off=false;this.status="on";var e=this;this.doAlpha("on",function(){var t=$("#sideTool");if(t.length)t.show();$("#lightoff").removeClass("icon-light-off").addClass("icon-light-on");e.changing=false;var i=$("#playBox");i[0].style.zIndex="";i[0].className="play_area";document.body.style.cssText="min-width:1002px;";ykPlyr.setLight("on");ykPlyr.PlayerColor("FFFFFF","DEDEDE",100)})},off:function(){if(true==this.changing)return false;this.changing=true;var e=this;var t=document.documentElement.clientHeight;var i=$("#playerBox");var n=t-i.height();n=n>0?n/2:0;n=$("#playerBox").offset().top-n;window.scrollTo(0,n);var a=document.body.clientHeight||document.documentElement.clientHeight;document.body.style.cssText="height: "+a+"px; overflow: hidden; min-height: 768px;";$("#lighton>a").removeClass("icon-light-on").addClass("icon-light-off");this.status="off";this.auto_off=false;this.doAlpha("off",function(){var t=$("#playBox");t[0].style.zIndex=20100;t[0].className="play_area play_dark";e.changing=false;ykPlyr.setLight("off");ykPlyr.PlayerColor("000000","000000",40)})},setOpacity:function(e,t){if(!e)return;if(e.filters&&e.filters.alpha)e.filters.alpha.opacity=t;else e.style.opacity=t/100},doAlpha:function(e,t){var i=this;var n=$(this.lightswitch);var a=100;var r=null;var o=0;var s=-1;if("off"==e&&n.length){a=0;this.setOpacity(n[0],0);s=-s;setTimeout(function(){n.show();document.getElementById("player").style.zIndex=1400;document.getElementById("playBox").style.zIndex=1400},100)}r=setInterval(function(){o+=s;a+=o;if(a<=0||a>=100){if(a<0)a=0;else if(a>100)a=100;clearInterval(r);if("on"==e)n.hide();if("function"==typeof t)t()}i.setOpacity(n[0],a)},25)},getStatus:function(){return this.status}})});define("page/find/play/player/playerCallbacks",["tui/cookie","tui/common","tui/net","module/login/login","module/responsive","page/find/play/player/light","page/find/play/player/pipAd","page/find/play/interaction/iku"],function(e,t,i,n,a,r,o,s,l,u){var c=t.empty;var d=window;var f;var p=new r;var h={func_referrer:v,playerLogin:g,setDanmuStatus:y,onPlayerStart:b,PlayerPlayNext:_,PlayerPlayPre:w,onTrialEnd:k,onPlayerSet:x,onPlayerStageVideo:C,onPlayerComplete:T,onAddScriptContent:S,getPlayerCNA:A,onPlayerPreAdInit:P,onPlayerLastAdInit:P,onPlayerMidAdInit:L,PlayerInteract:D,playerSubscribe:R,playerToIku:N};var m={setDanmuStatus:y,onPlayerStart:b,PlayerPlayNext:_,onTrialEnd:k,onPlayerSet:x,onPlayerComplete:T,onAddScriptContent:S,onPlayerPreAdInit:P,onPlayerLastAdInit:P,onPlayerMidAdInit:L,PlayerInteract:D,playerSubscribe:R,playerToIku:N};function v(){return document.referrer}function g(){n.login()}function y(e){$("body").trigger("appearBspool");if(!!e){$("body").addClass("danmuon");$("body").removeClass("danmuoff");a.trigger("player:responsive")}else{$("body").addClass("danmuoff");$("body").removeClass("danmuon");a.trigger("player:responsive")}}function b(e){var t=this;t.playerStart=true;e.isFullScreen=e.vid&&e.vidEncoded&&"undefined"!=e.vid&&"undefined"!=e.vidEncoded&&e.vid!=PageConfig.videoId&&PageConfig.videoId2!=e.vidEncoded;if(e.isFullScreen){PageConfig.preVideId2=PageConfig.videoId2;PageConfig.videoId=e.vid;PageConfig.videoId2=e.vidEncoded;t.trigger("player:onPlayerStartUpdate");if(d.cateStr)cateStr=cateStr.replace(/\d+$/,PageConfig.videoId);try{if("replaceState"in history){var i="/v_show/id_"+PageConfig.videoId2+".html";if(PageConfig.folderId)i+="?f="+PageConfig.folderId;var n={url:i};history.replaceState(n,"",i)}}catch(a){}}t.trigger("player:onPlayerStart",[e]);if(p.auto_off)p.off();o.playstart&&o.playstart();if(e.next)x({continuous:e.next?1:0})}function _(e){if(e.isFullScreen)return true;var t,i="";try{t=p.getStatus()}catch(n){}if("off"==t)i="_l_off";var a=parseInt(PageConfig.playmode);var r={};var o=e.playNextType&&"auto"==e.playNextType;var s="/v_show/id_";switch(a){case 2:r.from=o?"y1.2-3.2":"y1.2-3.1";break;case 3:r.from=o?"y1.2-2.2":"y1.2-2.1";break;default:r.from=o?"y1.2-1.2":"y1.2-1.1"}if(2==a){if(c(e.vidEncoded)||c(e.Fid))return false;if(0==PageConfig.forder)r.o=0;r.f=e.Fid;s+=e.vidEncoded+i+".html"}else{var l=e.vidEncoded;if(!l)return false;if(4==a)s+=l+"_type_99"+i+".html";else{s+=l+i+".html";if(!!PageConfig.singerId&&"0"!=PageConfig.singerId)r.s=PageConfig.singerId}}d.location.href=s+"?"+$.param(r);return true}function w(e){if(e.isFullScreen)return true;var t="",i="";try{t=p.getStatus()}catch(n){}if("off"==t)i="_l_off";var a=parseInt(PageConfig.playmode);if(2==a){if(c(e.vidEncoded)||c(e.Fid))return false;var r="";if(0==PageConfig.forder)r="&o=0";d.location.href="/v_show/id_"+e.vidEncoded+i+".html?f="+e.Fid+r}else{if(e.vidEncoded)preId=e.vidEncoded;if(""==preId)return false;if(4==a)d.location="/v_show/id_"+preId+"_type_99"+i+".html";else d.location="/v_show/id_"+preId+i+".html"}return true}function k(){d.trialEnd=true}function x(t){e("P_F",t.continuous);var i=parseInt((new Date).getTime()/1e3)+3600*2;e("P_T",i)}function C(t){if(true==t)e("stgvd",1,7);else e("stgvd",1,-1);setTimeout(function(){d.location.reload()},100)}function T(t){var i=this;if(d.trialEnd||t&&t.loop)return false;var n=parseInt(PageConfig.playmode);var a=4==n?"W_P_L_M":"P_L_M";var r=e(a);var o=e("P_F");var s=false;if(2==n&&void 0!==t.Pt)PageConfig.fpos=t.Pt;var l=parseInt((new Date).getTime()/1e3);t.playNextType="auto";if(1==o){var u=d.playerNextVid;if(u)if(t.isFullScreen){f.playVideoByID&&f.playVideoByID(u);return false}else{if(1==r){setTimeout(function(){i.PlayerSeek(0)},500);return false}t.vidEncoded=u;_(t);return false}}if(1==o)s=_(t);if(false==s)i.trigger("player:onLight",[t]);i.trigger("player:onPlayerComplete",[t])}function E(e){var t=this;t.trigger("player:playerState",[e])}function S(e){var t=unescape(e);var i=document.createElement("script");i.type="text/javascript";i.text=t;document.getElementsByTagName("head")[0].appendChild(i)}function A(){return e("cna")||""}function I(e){}function P(e,t){o.adInit(e,t)}function L(e,t){o.midAdInit(e,t)}function D(e){var t=this;if(!e||!e.type)return false;switch(e.type){case"timeline":case"timelineFadeStart":t.trigger("player:timelineFadeStart",[e]);break;case"timelineFadeEnd":t.trigger("player:timelineFadeEnd",[e]);break;case"actionInfoGuess":t.trigger("player:actionInfoGuess",[e])}}function R(e,t,a){var r=this;var o="9-2";if(a.stype)o=a.stype;n.login(function(){i.getJSON("//i.youku.com/u/subToUpdates",{follow:t,addtion:o},function(t){if(1==t||2==t){r.callPlayerFunction("playerSubscribed",{followd:true});e&&e(t)}else{if(parseInt(t)==-106){alert("不能订阅自己");return false}alert("订阅失败");return false}},{callbackName:"callback",charset:"utf-8"})})}function N(e){e=!e?"ywebplayererror":e;var t="ywebadddesktop"==e?"adddesktop":"play";try{var i={from:"video",action:t,secne:e};s.ikuExecuteFrompc(i)}catch(n){}}return{h5Bind:function(e,t){f=e;$.each(m,function(i,n){e.EventManager.on(i,n.bind(t))})},swfBind:function(e){var t=e;f=document.getElementById("movie_player");for(var i in h){var n=h[i];n&&(d[i]=n.bind(t))}}}});define("page/find/play/player/playerFixed",["tui/event","tui/net","tui/cookie","tui/browser"],function(e,t,i,n){var a=$(window);var r=function(e,t){var i=e;var n;var a=true;return function(){var e=arguments;var r=this;if(a){i.apply(r,e);return a=false}if(n)return false;n=setTimeout(function(){clearTimeout(n);n=null;i.apply(r,e)},t||500)}};return e.extend({initialize:function(e){this.ID=e.ID||"#player";this.dom=$(this.ID);this.player=document.getElementById("player");if(!this.dom.length||n.isMobile)return;this.domparent=this.dom.parent();this.domgrandparent=this.dom.closest(".play_area");if(!this.domparent.length||!this.domgrandparent.length)return;this.status=0;this.isdrag=0;this.sfw=310;this.sfh=175;$("#qheader").removeClass("g-header-fixed");this.bind()},bind:function(){var e=this;var t=20,i=this.dom.offset().top+this.dom.height()+t,n=0;this.createDOM();function o(){var t=null;n=a.scrollTop();if(n>i&&0==e.status){if("fixed"==this.playerWin)return;if(window.ykPlyr)if(ykPlyr.check("showControlBar"))e.narrowPlayer();else ykPlyr.bind("player:loaded",function(){e.narrowPlayer()});$("#qheader").addClass("g-header-fixed");this.playerWin="fixed"}if(n<i&&1==e.status){if("static"==this.playerWin)return;$("#qheader").removeClass("g-header-fixed");e.revertPlayer(e.dom);this.playerWin="static"}return false}o();a.bind("scroll",r(o,300))},createDOM:function(){this.playerDiv=$("<div>").addClass("player");this.$dragDiv=$("<div>").attr("id","dragDIV")},animatePlayer:function(){var e=this;var t=0,i=100,n=800;for(var a=0;a<=n;a++)!function(a){window.setTimeout(function(){var r=i*a/n-t;e.dom[0].style.opacity=r/100;e.dom[0].style.filter="alpha(opacity="+r+")"},a)}(a)},revertPlayer:function(){this.status=0;this.dom[0].style.cssText="";ykPlyr.showControlBar(true);this.domparent[0].removeChild(this.playerDiv[0]);this.$dragDiv.remove();this.domgrandparent[0].style.cssText="";this.dragDestroy(this.dom);this.dom.removeClass("player-fixed")},narrowPlayer:function(){var e=this;this.status=1;this.domparent.append(this.playerDiv);ykPlyr.showControlBar(false);e.getInitPos();this.dom.css({position:"fixed",width:this.sfw+"px",height:this.sfh+"px",left:this.left+"px",top:"auto",bottom:this.bottom+"px","z-index":"1002",background:"#fff",padding:"10px 10px 25px"});this.domgrandparent[0].style.cssText="z-index:1280;";this.dom.addClass("player-fixed");var t='<div id="dragHead" style="cursor:move;z-index:2;position:absolute;top:50%;margin-top:-12px;text-align:center;left:0;padding:0 10px;width:290px;height:24px;line-height:24px;background:#222;opacity:0.9;filter:alpha(opacity=90);color:#909090;font-size:16px;font-family:Microsoft YaHei,微软雅黑,helvetica,arial,verdana,tahoma,sans-serif;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;">点击按住视频可拖动</div>',i='<div id="dragHand" style="cursor:move;position:absolute;top:0;left:0;width:100%;height:100%;background:#222;"></div>';this.$dragDiv.attr("style","z-index:2;position:absolute;top:0;left:0;width:310px;height:"+this.sfh+"px;margin:10px;display:none");this.$dragDiv.html(t+i);this.dom.append(this.$dragDiv);this.dragDIV(this.dom)},getPlayerInitLeftValue:function(){var e=this._getClientWidth();var t=e>1281?1190:970,i=(e-t)/2+t-310-10;return i},getInitPos:function(){var e=i("v_pos");var t=i("player_pos")||"";if(t.indexOf("%7C")>-1)i("player_pos","");if(e){e=e.split("|");if(e.length>0){this.left=e[0];this.bottom=e[1]}}else{this.left=this.getPlayerInitLeftValue();this.bottom=50}},dragDIV:function(e){if(!e.length)return false;var t=this,i=false,n=false,a,r,e=e[0],o=document.getElementById("dragDIV");e.onmouseover=function(e){if(o)o.style.display="block";ykPlyr.hide()};e.onmouseout=function(e){if(o)o.style.display="none";ykPlyr.show();if(false===n)i=false};e.onmousedown=function(e){var e=e||window.event;i=true;n=true;if(e.screenX){a=e.screenX;r=e.screenY}else if(e.screenLeft){a=e.screenLeft;r=e.screenTop}document.onmousemove=s};document.onmouseup=function(e){var e=e||window.event;i=false;n=false;t._setPosition();document.onmousemove=null};function s(e){var e=e||window.event;if(false==i)return true;var n,o;if(e.screenX){n=e.screenX;o=e.screenY}else if(e.screenLeft){n=e.screenLeft;o=e.screenTop}var s=n-a,l=o-r;a=n;r=o;var u=parseInt(t.player.style.left)+s,c=parseInt(t.player.style.bottom)-l;t.left=u;t.bottom=c;t.moveElement(t.dom,u,c);t.isdrag=1;return false}},dragDestroy:function(e){var e=e[0];e.onmouseover=e.onmouseout=e.onmousedown=null;ykPlyr.show()},moveElement:function(e,t,i){var n=this._getClientWidth()-this.sfw-20,a=this._getClientHeight()-this.sfh-20-80;if(t<0)t=0;if(t>n)t=n;if(i<0)i=0;if(i>a)i=a;e[0].style.left=t+"px";e[0].style.bottom=i+"px"},_getOffsetTop:function(e){var t=0;while(e!=document.getElementsByTagName("body")[0]){t=e.offsetTop;e=e.offsetParent}return t},_getScrollTop:function(){return document.documentElement.scrollTop||document.body.scrollTop},_getClientWidth:function(){var e;if(window.innerWidth)e=window.innerWidth;else if(document.body&&document.body.clientWidth)e=document.body.clientWidth;if(document.documentElement&&document.documentElement.clientWidth)e=document.documentElement.clientWidth;return e},_getClientHeight:function(){var e;if(window.innerHeight)e=window.innerHeight;else if(document.body&&document.body.clientHeight)e=document.body.clientHeight;if(document.documentElement&&document.documentElement.clientHeight)e=document.documentElement.clientHeight;return e},_setPosition:function(){if(isNaN(this.left)||isNaN(this.bottom))return false;var e=this.left+"|"+this.bottom;i("v_pos",e,60)},_isMobile:function(){var e=window.navigator.userAgent,t=["iPad","Android","iPhone","iPod"],i=false;for(var n=0,a=t.length;n<a;n++)if(e.indexOf(t[n])!==-1){i=true;break}return i}})});define("page/find/play/player/h5player",["tui/view","tui/cookie","tui/net","tui/util/url","module/login/login","module/responsive"],function(e,t,i,n,a,r){var o=null;var s=e.extend({events:{"click .switch-flash":"switchToFlash"},initialize:function(e){s.superClass.initialize.call(this);var t='spvdiv,spvli,spvul{display:block;margin:0;padding:0}spvli,spvul{list-style:none}spvdiv.spv_load_first{width:100%;height:100%;position:absolute;left:0;top:0;z-index:2000;display:flex;background:#000;align-items:center;justify-content:center}spvdiv.spv_load_img{display:inline-block;width:44px;-webkit-animation-name:loadingAnimations;-webkit-animation-duration:.8s;-webkit-animation-iteration-count:infinite;-webkit-animation-timing-function:linear}spvdiv.spv_video_container{height:100%;display:flex;align-items:center}spvdiv.spv_player{position:absolute;width:100%;height:100%;left:0;top:0}spvdiv.spv_player :not(input),spvidv{-moz-user-select:-moz-none;-khtml-user-select:none;-webkit-user-select:none}spvdiv.spv_background{position:absolute;width:100%;height:100%;left:0;top:0}spvdiv.spv_background:before{top:0;height:75pt;background-image:linear-gradient(to bottom,rgba(0,0,0,.75),hsla(0,0%,100%,0))}spvdiv.spv_background:after,spvdiv.spv_background:before{position:absolute;left:0;right:0;display:block;content:"";width:100%}spvdiv.spv_background:after{bottom:0;height:125px;background-image:linear-gradient(to top,rgba(0,0,0,.75),hsla(0,0%,100%,0))}spvdiv.spv_poster{width:100%;height:100%;background-position:center center;background-repeat:no-repeat;background-size:cover}spvdiv.spv_header{position:absolute;top:0;left:0;display:flex;justify-content:space-between;width:100%;padding:20px;z-index:109;box-sizing:border-box;color:#fff;display:none}spvdiv.spv_percent{cursor:pointer}spvdiv.spv_100percent,spvdiv.spv_50percent,spvdiv.spv_75percent{position:relative;display:inline-block;margin:0 10px;font-size:14px}spvdiv.spv_scale_current{color:#2fb3ff}spvdiv.spv_dashboard{position:absolute;bottom:0;left:0;width:100%;z-index:110;display:none}spvdiv.spv_progress{position:relative;display:flex;align-items:center;height:20px;margin:0 10px;cursor:pointer;padding-bottom:4px}spvdiv.spv_progress_container{position:relative;width:100%;height:3px;background:hsla(0,0%,52%,.5);border-radius:3px}spvdiv.spv_progress_hover .spv_progress_container{height:5px}spvdiv.spv_progress_hover input.spv_progress_range{display:block}spvdiv.spv_progress_load{position:absolute;z-index:10;height:100%;background:#858585;border-radius:3px}spvdiv.spv_progress_play{position:absolute;z-index:11;height:100%;background:red;border-radius:3px}input.spv_progress_range{display:none;position:absolute;-webkit-appearance:none;width:100%;height:100%;margin:0;padding:0;background:0 0;z-index:12}input.spv_progress_range:focus{outline:0}input.spv_progress_range::-webkit-slider-runnable-track{background:0 0}input.spv_progress_range::-webkit-slider-thumb{-webkit-appearance:none;width:20px;height:20px;background:red;border-radius:100%;border:7px solid #fff;cursor:pointer}input.spv_progress_range::-moz-focus-outer{border:0}input.spv_progress_range::-moz-range-track{background:0 0}input.spv_progress_range::-moz-range-thumb{width:6px;height:6px;background:red;border-radius:100%;border:7px solid #fff;cursor:pointer}input.spv_progress_range::-ms-track{background:0 0}input.spv_progress_range::-ms-thumb{width:6px;height:6px;background:red;border-radius:100%;border:7px solid #fff;cursor:pointer}spvdiv.spv_icon_panel:hover{color:#2692ff}spvdiv.spv_controls{display:flex;justify-content:space-between;height:30px;padding:0 10px 10px}spvdiv.spv_icon,spvdiv.spv_left_controls,spvdiv.spv_right_controls{display:flex;align-items:center}spvdiv.spv_icon{cursor:pointer;float:left}spvdiv.spv_icon_pause,spvdiv.spv_icon_play{width:30px;height:30px;margin-right:20px}spvdiv.spv_icon_pause{display:none}spvdiv.spv_icon_next{width:1pc;height:30px;margin-right:20px}spvdiv.spv_next_disabled{display:none}spvdiv.spv_icon_full,spvdiv.spv_icon_half,spvdiv.spv_icon_set{width:17px;height:30px;margin-left:20px}spvdiv.spv_icon_half{display:none}spvdiv.spv_icon_mute,spvdiv.spv_icon_volume{width:25px;height:17px;margin-left:20px}spvdiv.spv_icon_mute{display:none}spvdiv.spv_icon_language,spvdiv.spv_icon_quality,spvdiv.spv_icon_select,spvdiv.spv_icon_tv{height:30px;line-height:30px;margin-left:20px;color:#fff;font-size:14px}spvdiv.spv_icon_language,spvdiv.spv_icon_tv{display:none}spvdiv.spv_time{font-size:9pt}spvdiv.spv_time_current{display:inline;color:#dedede}spvdiv.spv_time_duration,spvdiv.spv_time_split{display:inline;color:hsla(0,0%,87%,.4)}spvdiv.spv_volume{position:relative;display:flex;align-items:center;height:7px;width:70px;margin-left:10px;cursor:pointer}spvdiv.spv_volume_slider{position:absolute;width:100%;height:2px;background:hsla(0,0%,100%,.3)}spvdiv.spv_volume_slider_hover input.spv_volume_range{display:block}spvdiv.spv_volume_current{position:absolute;height:2px;background:#4cb7ff}input.spv_volume_range{display:none;position:absolute;-webkit-appearance:none;width:100%;height:100%;margin:0;padding:0;background:0 0;z-index:12}input.spv_volume_range:focus{outline:0}input.spv_volume_range::-webkit-slider-runnable-track{background:0 0}input.spv_volume_range::-webkit-slider-thumb{-webkit-appearance:none;width:10px;height:10px;background:#fff;border-radius:100%;cursor:pointer}input.spv_volume_range::-moz-focus-outer{border:0}input.spv_volume_range::-moz-range-track{background:0 0}input.spv_volume_range::-moz-range-thumb{width:10px;height:10px;background:#fff;border-radius:100%;cursor:pointer}input.spv_volume_range::-ms-track{background:0 0}input.spv_volume_range::-ms-thumb{width:10px;height:10px;background:#fff;border-radius:100%;cursor:pointer}spvdiv.spv_setting_1080,spvdiv.spv_setting_panel{padding:10px;background:rgba(0,0,0,.8);color:#fff;font-size:9pt;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:261px;height:248px;z-index:112;display:none}spvdiv.spv_setting_1080{display:none}spvdiv.spv_1080_title,spvdiv.spv_setting_title{position:relative;padding-bottom:10px;margin-bottom:5px;border-bottom:1px solid hsla(0,0%,100%,.4)}spvdiv.spv_1080_title{border-bottom:none}spvdiv.spv_1080_close,spvdiv.spv_setting_close{position:absolute;top:0;right:0;line-height:17px;font-size:20px;cursor:pointer}spvdiv.spv_1080_close{width:20px}spvdiv.spv_setting_box{display:flex}spvdiv.spv_setting_continue,spvdiv.spv_setting_jump,spvdiv.spv_setting_language,spvdiv.spv_setting_quality_current,spvdiv.spv_setting_quality_default{display:flex;justify-content:flex-start;padding:5px 0}spvdiv.spv_setting_tit{padding:2px 0;margin-right:5px}spvdiv.spv_setting_con{padding:2px 10px;border-radius:3px;cursor:pointer}spvdiv.spv_setting_con_current{background:#00aae5;color:#000}spvdiv.spv_setting_con_disable{color:#5e5e5e;cursor:not-allowed}spvdiv.spv_1080_confirm,spvdiv.spv_setting_confirm{display:flex;justify-content:center;padding-top:10px}spvspan.spv_1080_vip{color:#00aae5}spvdiv.spv_1080_confirm{padding-bottom:20px}spvdiv.spv_1080_submit,spvdiv.spv_setting_submit{margin:0 10px;padding:5px 15px;background:#00aae5;color:#000;font-size:14px;border-radius:3px;cursor:pointer}spvdiv.spv_1080_cancel,spvdiv.spv_setting_cancel{margin:0 15px;padding:5px 15px;background:#fff;color:#606060;font-size:14px;border-radius:3px;cursor:pointer}spvdiv.spv_1080_content{font-size:1pc;line-height:30px;padding:20px}spvdiv.spv_tips{position:absolute;bottom:65px;left:0;width:100%;padding:0 10px;z-index:109;display:flex;justify-content:space-between;box-sizing:border-box;color:#fff;font-size:15px;display:none}a.spv_tips_link,spvdiv.spv_tips_des{display:inline-block;color:#00aae5;cursor:pointer}spvdiv.spv_tips_des{color:#fff}spvdiv.spv_tips_close{font-size:20px;line-height:20px;cursor:pointer}spvdiv.spv_tips2{bottom:10px}spvdiv.spv_tips_top{z-index:900;bottom:0;line-height:2;padding:0 10px;background:rgba(0,0,0,.6)}spvdiv.spv_ad{width:100%;height:100%;position:absolute;left:0;bottom:0;display:none;z-index:800}spvdiv.spv_ad spvspan{color:red}spvdiv.spv_ad_box{height:100%;position:relative}spvdiv.spv_ad_tip{position:absolute;height:40px;font-size:1pc;line-height:40px;color:#454545;right:0;background:rgba(0,0,0,.6);color:#fff;width:90pt;z-index:801;text-align:center}spvdiv.spv_ad svg{float:left}spvdiv.ad_mute,spvdiv.ad_nomute{width:25px;height:17px;right:105px;top:0;padding:9pt 20px 11px}spvdiv.ad_nomute{display:none}spvdiv.spv_ad_count{padding:0 10px;right:175px;top:0}spvdiv.spv_ad_skip{width:75pt;cursor:pointer;top:0}spvdiv.spv_ad_more{bottom:60px;width:75pt;cursor:pointer}spvdiv.spv_ad_big{width:100%;height:100%;position:absolute;left:0;top:0}spvdiv.spv_tv_box{width:25pc;height:270px;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);display:none;background:rgba(0,0,0,.8);z-index:900}spvdiv.spv_tv_box .spv_relative{height:40px;background:#333}spvdiv.spv_tv_div{overflow:auto;background:#333;height:200px;padding:0 30px 30px;position:relative}spvspan.spv_tv_close{width:40px;right:0;color:#fff;text-align:center;font-size:9pt}spvspan.spv_tv_close,spvspan.spv_tv_sel{height:40px;position:absolute;top:0;display:block;line-height:40px}spvspan.spv_tv_sel{width:60px;left:30px;color:#bbb;font-size:14px}spvdiv.spv_tv_div spvul{background:#000;height:200px;color:#fff;list-style:none;overflow:auto}spvdiv.spv_tv_div spvli{line-height:26px;height:26px;border-bottom:1px solid #d4d4d4;list-style:none;padding:0 10px;font-size:14px;cursor:pointer}spvdiv.spv_tv_div .spv_tv_li_current{background:#00aae5}spvdiv.spv_relative{position:relative}spvdiv.spv_code{height:100%;position:absolute;left:0;bottom:0;z-index:102;width:100%;display:none}spvdiv.spv_code .spv_relative{height:100%}spvdiv.spv_code_base{width:300px;height:40px;line-height:40px;position:absolute;right:40px;text-align:right;color:#fff;font-size:1pc}spvdiv.spv_code_tip{top:5pc}spvdiv.spv_code_des{bottom:5pc}spvdiv.spv_shadow{position:absolute;left:0;bottom:0;width:100%;height:100%;-webkit-tap-highlight-color:transparent;z-index:105}spvdiv.spv_exclusive,spvdiv.spv_logo{position:absolute;width:150px;height:45px;max-height:54px;max-width:196px;right:3%;top:1%;display:none}spvdiv.spv_little{display:none;border-radius:5px;width:100%;height:40px;position:absolute;bottom:75pt;line-height:40px;text-align:center;color:#fff;left:0;z-index:100}spvdiv.spv_little_tip{display:inline-block;padding:0 10px;text-align:center;background:rgba(0,0,0,.7);border-radius:5px}spvdiv.spv_block{display:none;z-index:109}spvdiv.spv_block,spvdiv.spv_limit_info{position:absolute;top:0;left:0;align-items:center;justify-content:center;width:100%;height:100%;background:#000}spvdiv.spv_limit_info{display:flex;z-index:80}spvdiv.spv_limit_panel{padding:10px;text-align:center;color:#fff;font-size:14px;z-index:19}spvdiv.spv_limit_tit{padding:10px 0;font-size:1pc;line-height:1.7}spvdiv.spv_limit_desc{padding:20px 0;line-height:1.7;text-align:center}spvdiv.spv_limit_span{display:inline-block;vertical-align:top;text-align:left}spvdiv.spv_limit_type{margin:0 5px;display:inline-block;color:#f60}spvdiv.spv_limit_option{padding:10px 0}a.spv_limit_action{background:#f60;color:#fff;text-decoration:none}a.spv_limit_action,spvdiv.spv_limit_submit{display:inline-block;padding:5px 15px;border-radius:3px;cursor:pointer}spvdiv.spv_limit_submit{background:#00aae5}a.spv_limit_conact{display:inline-block;background:#f60;padding:5px 15px;border-radius:3px;cursor:pointer;color:#fff;text-decoration:none}a.spv_limit_link{padding:0 10px;color:#999}input.spv_limit_password{width:75pt;height:28px;margin:0;padding:0;text-align:center;border:1px solid #333}spvdiv.spv_error{position:absolute;top:0;left:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%;background:#000}spvdiv.spv_error_panel{padding:10px;text-align:center;color:#fff;font-size:14px;z-index:19}spvdiv.spv_error_tit{padding:10px 0;font-size:18px}spvdiv.spv_error_option{padding:10px 0}spvdiv.spv_error_action{display:inline-block;background:#19355c;color:#cde4ff;border:1px solid #2d5275;padding:5px 10px;margin-left:10px;border-radius:3px;cursor:pointer}spvdiv.spv_error_action_red{color:#f60}spvdiv.spv_error_other{padding:10px 0;color:#ccc}a.spv_error_contact,spvdiv.spv_error_download{display:inline-block;margin:0 5px;color:#fff;cursor:pointer}spvdiv.spv_vip_info{left:0;top:0;height:100%;z-index:1000;background:#000;text-align:center;line-height:1.5}spvdiv.spv_tipbar,spvdiv.spv_vip_info{width:100%;position:absolute;display:none;font-size:13px;color:#bababa}spvdiv.spv_tipbar{bottom:50px;background:rgba(0,0,0,.5);text-align:left;text-indent:20px;z-index:1001}spvdiv.spv_subcribe{width:100%;left:0;top:0;height:100%;z-index:1000;background:#000;font-size:13px;color:#bababa;line-height:1.5}spvdiv.spv_prompt,spvdiv.spv_subcribe{position:absolute;display:none;text-align:center}spvdiv.spv_prompt{width:5pc;height:45px;bottom:44%;left:50%;margin-left:-50px;z-index:20;color:#bbb;line-height:22px;padding:5px 10px;background:rgba(0,0,0,.8)}spvdiv.spv_prompt_time{color:#bbb;line-height:22px;font-size:14px}spvdiv.spv_prompt_arrow{text-align:right;font-size:14px;z-index:20}spvdiv.spv_password{position:absolute;left:0;bottom:0;width:100%;height:100%;z-index:600;display:none;border:none}spvdiv.spv_password_c{position:relative;height:100%;text-align:center}spvdiv.spv_password_tip{display:inline-block;font-size:1pc;vertical-align:middle;padding-top:75pt;color:#a8a8a8}spvdiv.spv_password_input{display:inline-block;width:300px;vertical-align:middle;margin-top:5px}spvdiv.spv_password_txt{width:200px}spvdiv.spv_password_btn,spvdiv.spv_password_txt{height:30px;line-height:30px;vertical-align:middle}spvdiv.spv_password_btn{width:80;border-radius:5px;color:#000;background:#fff;color:#666;background-color:#eee;border-color:#eee;font-weight:300;font-size:1pc;text-decoration:none;text-align:center;padding:0 5px;display:inline-block;appearance:none;cursor:pointer;border:none;box-sizing:border-box;margin-left:10px}-webkit-user-select:none;-webkit-touch-callout:none;-webkit-backface-visibility:hidden;video::-webkit-media-controls,video::-webkit-media-controls-panel,video::-webkit-media-controls-play-button,video::-webkit-media-controls-volume-slider-container{display:none}video::-webkit-media-controls-current-time-display,video::-webkit-media-controls-mute-button,video::-webkit-media-controls-timeline,video::-webkit-media-controls-volume-slider{display:none}video::-webkit-full-page-media::-webkit-media-controls-panel,video::-webkit-media-controls-seek-back-button,video::-webkit-media-controls-time-remaining-display,video::-webkit-media-controls-timeline-container{display:none}video::-webkit-media-controls-fullscreen-button,video::-webkit-media-controls-return-to-realtime-button,video::-webkit-media-controls-rewind-button,video::-webkit-media-controls-seek-forward-button{display:none}video::-webkit-media-controls-start-playback-button,video::-webkit-media-controls-toggle-closed-captions-button{display:none}video::-webkit-slider-thumb{display:none}spvdiv.spv_recommend_replay{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAABVCAIAAAAkH4qvAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyM0YzNDgwODNFRDkxMUUzQUE4NkUyOUY3Nzk4MzdCRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyM0YzNDgwOTNFRDkxMUUzQUE4NkUyOUY3Nzk4MzdCRSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjI2QkMxQ0UxM0VENzExRTNBQTg2RTI5Rjc3OTgzN0JFIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjI2QkMxQ0UyM0VENzExRTNBQTg2RTI5Rjc3OTgzN0JFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+viL3agAAB1VJREFUeNrsm2lIFG8cx1s7xG7QLUhNig5EUekwqegAiw4oIrIgLTSlwwIriigo0gi7oCgyQrqDIntRvVA70EIsrxCPDjaI1DLBLDe3MqP+X3rg+T/Mzq6zHbvu9v2+WJ55Zp7Znefz/K6ZWVN8fHwvypvlxykgQooIKSIkQooIKSKkiJAIKSKkiJAiQiKkiJAiQooIiZAiQooIKSIkQooIKSKkiJAIKSKkPKA+Hvxuk8kUHR0dGxs7fvz4kJCQgQMH+vn52Wy25uZmi8VSVVVVXl7e1dVFSN1Mo0f+U+Hv779w4cKlS5cOGzbMyWEdHR23bt26fv16e3s7UfUghLC8LVu2jBgxwuDxVqs1Jyfn7t27pKWr3qNHj3bn9y1fvnz79u2DBw92yWSnT59uNpsrKiq+f/9OZp6MhampqUCo6Xz//j3YPH/+vK2tDYSGDBkybty4uLi4oKAg9bD58+cD/L59+759+0ZsnnGkiHzr1q1Te968eXPu3Ln79+/b25bIdFJSUsLDw9X+wsLCw4cPE5tbHWlAQAAIjR07dteuXUg4ZX9+fv7u3btfvHjx48cP3YFv374tKCjo7OyMiYkBUdE5ZswYgH/58qVHJgvfnpCQ8OHDBziMf8iRZmdnDxgwAJz69Pn/uy5evHjhwoVux2LU1atXwXLnzp0S//r168vKypCsGplxex8zfPhwhFVN58iRI7HU3r17t2LFCicnDA0NhS+Bz8fKCwwMjIqKEv0oiuQxo0aNwvWKc8LBHDlyxOsRYmrCwsLUHuSWRvhJYSIw72lpaWITwRLzeP78+W4HYqIzMjLUHphvS0uLcM7FxcWyH3XLL1waFhY+P3/+3NDQIEA2NjailhV7Hz169PTpUx8s7ZGM5Obmujrq2rVrSEplXFy0aNHly5eN5DUbN26074yMjMTnqVOnfudCYLI7duxITk7es2cP2ui5c+cOvEtRURHaiPpwudjrgwjhTo8fP47LtlgsxkfBo545c+bQoUNiE6nppEmTsMydDJk4caKjGYSLw+eJEyd09+K0ly5d0nQmJiYiSe7fvz/aSUlJcAM4DOEcPWfPnt27d29VVZU8GFeHBQc/IdD6GkKoq6vry5cvro6qrq5+/fp1cHCw2OwWYXt7e11dne4uUa442otvMW6I27ZtAz+1EzESsRbr48aNGz5SVJw+fRoRXrQRNq5cuZKXl/f169dfONWGDRuWLFki2vX19Zo4pys16ZCCGYmUStNfU1Pj3G5mz56N+Ld//354S0BSsxhHQu6j68y9zwrhCZE+IPz8TjqO9ES2Q0JCjAwBP5F0OEpGVAk2Bn8M/Ke8xyTWBPJVpEULFiyAU33w4IHYZbVavd6RIkmD58Sa/f30DAWZbIvE3aDmzJmjboooqDEOJCPGTwhzFLBh5TgPPDPcKcon2ByqndWrVyNGHjx40EdiYVZWlseLX81dIRELNZ3GtXbtWpAT5pWeno5PNZ1BKoRounnzZpgpyiFERNV5+Eg688saOnSobNtsNjffl1m8ePHMmTPR/vTpE4LCrFmz5s2b9/jxY2ltMEHBFQaKsArrxAGTJ08G5r9qjt6EEPMo201NTcYHakpA3boQdYKTM6SlpU2YMAEkAgICkAchMUbMQ4yAP1cz0uSfUu8YgOvfdqfehBArWje16VaaEtB5Xair0tLSgoICmQTBW6IoFPBkcYJFUFJS0tLSIjZhpsIifaQu7Nev39y5c/v27YtLUrMS44qJiVGz0MrKSuNjNSWgbl3ovEIQRR6yGLUoFCeR1gyESEQlM2HrvlPaY/FOmzYNjWXLlqWmpiKcuFa9mkwpKSly8+PHjwYRIibZlwq6jhQeDwe7el0wNRWVuHEjbd3R3QOvRBgXFycaZrN506ZNBw4ccGk4wKsPDm/evGnwwa/wdZo458iR4jBXy/DW1lbJCXb86tUr6Ug1j6y9HuGzZ88iIiJEOz4+Hmm3/X1IR5oxY8aaNWvUO2fGHyzo2oHzG2wu6R9ypDk5OUePHpWPDFH8whxPnjzZ2dnp3H8mJCTAharPinEqOFIj6WtoaCjco/2u2NhY4Tl1a3bkmcZzJXBS60usNhlTfc0KMV+5ubnq1SIpR4bi6osXt2/fvnfvnpFvhK07rxMc3XiDidsjxC8HLUEFjFWDltaGazT/lNgUjzXcILe+hIjqClal6WxraysvL7dYLPL1JxjQ1KlT7Vfxw4cPMzMzPfL6k3jYJO7DyUcQW7duReRzFBGc7/VWhNDKlStXrVqlOkaDKiwshCvm62v2cvd7pLW1tUgB4HwGDRpkcIjVaj127BiWM18i7REIe/18NS0/Px9gwsLCnD9wsNlsiEzZ2dlPnjwhqp7iSO1zlilTpiCLCw4Ohl3CwXZ0dDQ3NyOhQPHOv8X0dITUHxH/X0iEFBFSREiEFBFSREgRIRFSREgRIUWEREgRIUWEFBESIUWEFBFSREiEFBFSREgRIRFSREh5Qib3/y2G+rP6T4ABAAVLXwkPNOfgAAAAAElFTkSuQmCC);background-repeat:no-repeat}spvdiv.spv_recommend{position:absolute;left:0;top:0;width:100%;height:100%;background:#222;overflow:hidden;display:-moz-box;display:-webkit-box;display:box;-webkit-box-align:center;-moz-box-align:center;-webkit-box-pack:center;-moz-box-pack:center;z-index:1000;display:none}spvdiv.spv_recommend_parent{display:table;height:100%;width:100%}spvdiv.spv_recommend_page{width:auto;height:auto;text-align:center;padding:30px;display:table-cell}spvdiv.spv_recommend_item,spvdiv.spv_recommend_page{overflow:hidden;position:relative;vertical-align:middle}spvdiv.spv_recommend_item{z-index:10;width:150px;height:85px;margin:0 9pt 9pt 0;display:inline-block;padding:0}spvdiv.spv_recommend_img{list-style:none;height:100%;display:block}spvdiv.spv_recommend_title{z-index:10;position:absolute;left:0;bottom:0;width:100%;height:40px;overflow:hidden;text-align:left;padding:0 1px;font-size:14px;font-weight:400;color:#fff;text-shadow:1px 1px 1px #000}spvdiv.spv_recommend_bg{z-index:1}spvdiv.spv_private,spvdiv.spv_recommend_bg{position:absolute;left:0;bottom:0;height:100%;width:100%}spvdiv.spv_private{z-index:600;display:none;background:#000}spvdiv.spv_private_c{position:relative;height:100%}spvdiv.spv_private_tip{width:300px;margin:0 auto;padding-top:75pt;font-size:1pc;vertical-align:middle;text-align:center;color:#a8a8a8}spvdiv.spv_playload{position:absolute;left:50%;top:50%;width:44px;height:44px;margin-left:-22px;margin-top:-22px;-webkit-animation-name:loadingAnimations;-webkit-animation-duration:.8s;-webkit-animation-iteration-count:infinite;-webkit-animation-timing-function:linear;display:none}spvdiv.spv_load_img,spvdiv.spvimg{height:44px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAACXBIWXMAAAABAAAAAQE4IvRAAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAFkElEQVRYhe2ZW4hVVRjHf9+3tuPYJE1WikwqJXjBSksxaFKHisoUg3oIoR4qKsy0ZDLwJYouECWEWikVEXQhfIksrYiYisxCM7tZVmrmVKYVXrBxZq/19XDOHvfZZ5+ZsebM6aE/LDZ7n8Vav/3f3/rW5cD/qq7kRCq3LA8KnAEE4EBbq1pVqHpQn4FnLvcTVPQOzM6lALwRWN3Wqj9VjS5HvQKPW2mDG4NdPiRmrcDgzM+7gEvaWnV3VehypL1VcGYLNPB0DizAWcDiluUh6n+0fFXsaNwKOxVhmQpLI99jqDYDTcCP/Q2Xp8rOCMtEWSC9R7krlgFRGfC4FVaPcLsoS8VBUPBdEIWKbXwP/FpNyLTKYliEmaK0StE3c9AxpKLNwYSn2lr1aFUpUyr5lONX2TAcr4pjjDgQBXEQ6iDUCWogAqZgju1BbeH7S9yGgYKFVEiMX2WKcqsoY1GgCJuUzkEQnyQ4w9R4K+qyezqCfjWQsCXAOKaKcIso4EphE6fNYV551CsPb56nBwcatgRYhLkoY8iCFl+Awv16lIe2zZNDtYCF4kw3YY2dJMIuHMOzriaDTxwfIdywbZ78UCtYKDosSjNahE3Fb8pZEFaJsLOWsADRxGdNEa5JPn86djnu9CaUlz6bc0KLu+oAizAMYXx6sOEouFyADSgv/BdgASIcZ4pwZomzpU7vRNhYa9BEkSiNKI2Jq2QGG0q7CO21xTyuSBxDUYZqTv4twreLsL/WoIkiUQajDCYD2u20cmDLpTLgW6FKiiRCECSdf3Ggx7NEV60h01JRgjhCkn/JpjSlscaMJVIch0Q5JJn4TXIyESOnb7KGWoMmUlEOi+MwadDUTCeOkeIYWWvQRJE42lHaxTGqwkw3TpTzKOwsqqbZK20CcDUwA+gA3gDWb1gk+9L1FOU3cbRnFzupma4Bx9wqw44CXgYeAuYA1wJPAE/MXmkl2zjdeqUcE2V9XvwmRSOub95uk6oE2wA8BkyhdAc0pAh+5+yV1r0uKOzpHG+Lw+fNdMXsMQil9eLv7OT+Bg7KWIPJPVRpAboHvQJsaZG9oqzNZgotdXq+RNw1c4/12ypoyjrj8CnMDY6xPVQbAtSVAANIxFpxhfRGKienskc9SqsoV836+d9DT1lnWOCyjnqWeFf5fCTAfqB7h3N8m18Ii9eS+NX8mG4Ux/MiLJm11/KOrvoKW2eBRQRe7ILTj9RDngUe+B3aNiySuAz442lyBOVxHJ2Zma7EaYTTLHC/BR6YsdtOOD9Ped1GmHEfgQfNMxwPRwfBwXrwKehO4AB0HjJKjhHK3qt5uy1DuVeU+vTg0wIs5kvK7xbzmMW0medLCxzZdH5pk1PfMSzQYJ5JBFqC5248Z2TawTwQQ9QFIUBnoAPjkR2L5b50e+WxozwnykXimJvZ02GhrJPTLPCgGe0W+MI830zfZJ9b4E9iLHhOJWaSGRMxJlugiUCUB5uUY0bh9Nl4F1iTxcsdPDN22rBiTF8giogWYeOcTnKe4SHExWvxvqf6meeGsRW4YsdiOVDuZ44+OFv+EMdCUT7rhs0AdV9D4Zou5gsuWRa2Qkm3h7ENWJgHW9HhRC37bIR5XjLPxRZTV8mZtJPd17gCbGWHOzE+BObvWFy6fujV4URtI2SfeW4yz5PmMfIcyXO9F2dz2zFWAzf2BNurw2k1f2tzzHOneVrMMygZ1Vln+xinSYnxtJmxYsciWdcXjj7/N2Ge9QQ+xXMdnpvxnJPEb5mj5dkkz9mvCTxjxisYv/SV4x9NsRd+YhJirsQzxzzTzdNknhHmcRXcDRbzm3n24tlsgXXmefPbhVL5XL8/gRNNe88Uz+gQaCJmTPCMtpgm8zRYDAT+Cp52Anusix8tsNc8e765Tfw/7fNv2cjcLHR9l5wAAAAASUVORK5CYII=);background-repeat:no-repeat}@-webkit-keyframes loadingAnimations{12.5%{-webkit-transform:rotate(45deg);transform:rotate(45deg)}25%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}37.5%{-webkit-transform:rotate(135deg);transform:rotate(135deg)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}62.5%{-webkit-transform:rotate(225deg);transform:rotate(225deg)}75%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}87.5%{-webkit-transform:rotate(315deg);transform:rotate(315deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}';
this.$el.append('<style style="type/css">'+t+'</style><a class="switch-flash" href="javascript:;">切回旧版播放器</a><div class="h5-wrap"><div id="ykPlayer"></div></div>');var i=this;var a=n.params();require.async(["page/find/play/spv"],function(e){var t={target:"#ykPlayer",must:"h5",width:"100%",height:"100%",client_id:"youkumobileplaypage",type:"pc",ccode:"0502",ui:"youkulive",autoplay:true,videoId:PageConfig.videoId2,playlistconfig:{st:1},control:{playerType:"m3u8",autoplay:true},adConfig:{},events:{}};if(void 0!=a.adext)t.adConfig.adext=a.adext;console.log(t);o=e(t);o=o[0];i.trigger("loadedH5:sucess",[o]);r.bind("player:responsive",function(e){var t={1080:{w:"740",h:"416"},1300:{w:"960",h:"540"}};o.setProgressWidth(t[e]["w"])})})},switchToFlash:function(){var e=n.params();e.debug="flv";location.href="//"+location.host+location.pathname+"?"+$.param(e)},callPlayerFunction:function(){},show:function(){o.selector.style.cssText="width:100%;height:100%"},hide:function(){o.selector.style.cssText="position:relative;top:-999999px;width:100%;height:100%"},check:function(e){var e=e||"pauseVideo";return"function"==typeof o[e]},PlayerSeek:function(e){e=isNaN(parseInt(e))?0:parseInt(e);if(this.playerStart&&o)o.seek(parseInt(e))},PlayerContinuous:function(e){o&&o.PlayerContinuous(e)},PlayerColor:function(e,t,i){return o.PlayerColor(e,t,i)},showControlBar:function(e){if(e)o.UIControl.controlShow();else o.UIControl.controlHide(true)},setLight:function(e){},setPlayHeadSkin:function(e){},setPlayerLoop:function(e){o&&o.setPlayerLoop(e)},PlayerPause:function(e){if(o)o[e?"play":"pause"]()},PlayerInfo:function(){return o.PlayerInfo()}});return s});define("page/find/play/util/swfobject",function(){var e="undefined",t="object",i="Shockwave Flash",n="ShockwaveFlash.ShockwaveFlash",a="application/x-shockwave-flash",r=window,o=document,s=navigator,l=function(){var t=typeof o.getElementById!=e&&typeof o.getElementsByTagName!=e&&typeof o.createElement!=e,i=s.userAgent.toLowerCase(),n=s.platform.toLowerCase(),a=n?/win/.test(n):/win/.test(i),r=n?/mac/.test(n):/mac/.test(i),l=/webkit/.test(i)?parseFloat(i.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,u=[0,0,0],c=false,d=false,f=false,p=false,h=false,m=null;var v;(v=i.match(/msie ([\d.]+)/))?c=v[1]:(v=i.match(/firefox\/([\d.]+)/))?d=v[1]:(v=i.match(/chrome\/([\d.]+)/))?f=v[1]:(v=i.match(/opera.([\d.]+)/))?p=v[1]:(v=i.match(/version\/([\d.]+).*safari/))?h=v[1]:0;return{ie:c,win:a,mac:r,safari:h,chrome:f}}();function u(t,i,n,a){var r=document.getElementById(n);if(r){if(typeof t.id==e)t.id=n;var o="";for(var s in t)if(t[s]!=Object.prototype[s])if("data"==s.toLowerCase())i.movie=t[s];else if("styleclass"==s.toLowerCase())o+=' class="'+t[s]+'"';else if("classid"!=s.toLowerCase())o+=" "+s+'="'+t[s]+'"';var u="";for(var c in i)if(i[c]!=Object.prototype[c])u+='<param name="'+c+'" value="'+i[c]+'" />';var d="";if(l.ie&&l.win){d='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '+o+">"+u;if(a)d+='<div class="player_html5"><div class="picture"style="height:100%"><div style="line-height:460px;"><span style="font-size:18px">您还没有安装flash播放器,请点击<a href="//www.adobe.com/go/getflash" target="_blank">这里</a>安装</span></div></div></div>';d+="</object>"}else{d='<object type="application/x-shockwave-flash" data="'+i.movie+'" '+o+">"+u;if(a)d+='<div class="player_html5"><div class="picture"style="height:100%"><div style="line-height:460px;"><span style="font-size:18px">您还没有安装flash播放器,请点击<a href="//www.adobe.com/go/getflash" target="_blank">这里</a>安装</span></div></div></div>';d+="</object>"}r.innerHTML=d;return}}return{ua:l,createSWF:function(i,n,a,r,o,s){var l={};if(n&&typeof n===t)for(var c in n)l[c]=n[c];if(a&&typeof a===t)for(var d in a)if(typeof l.flashvars!=e)l.flashvars+="&"+d+"="+a[d];else l.flashvars=d+"="+a[d];return u(i,l,r,s)}}}());define("page/find/play/player/flashplayer",["tui/view","tui/cookie","tui/net","tui/util/url","tui/util/codec","tui/browser","module/login/login","page/find/play/util/swfobject"],function(e,t,i,n,a,r,o,s){var l=null;var u=e.extend({playlistVids:[],playerNextVid:"",initialize:function(e){u.superClass.initialize.call(this);var t=this,i;this.playerId="movie_player";$("#qheader .g-header-container").prepend('<iframe class="mask" frameborder="0" scrolling="no" style="width:100%;height:81px;"></iframe>');$("#uerCenter .panel,.g-view .panel").prepend('<iframe class="mask" frameborder="0" scrolling="no" style="width:100%;height:100%;"></iframe>');this._loadflash();this.playerStart=false;l=document.getElementById("movie_player");i=setInterval(function(){if(t.check()){t.trigger("player:loaded");clearInterval(i)}},50);$(document).bind("logchange",function(){o.checkLogin(function(){l.setLoginState&&l.setLoginState(true,o.uid())})})},show:function(){l.style.cssText="width:100%;height:100%"},hide:function(){l.style.cssText="position:relative;top:-999999px;width:100%;height:100%"},check:function(e){var e=e||"pauseVideo";return"function"==typeof l[e]},PlayerSeek:function(e){e=isNaN(parseInt(e))?0:parseInt(e);if(this.playerStart)l.nsseek(parseInt(e))},recordPosition:function(){l.recordPosition()},PlayerContinuous:function(e){l.setContinuous(e)},PlayerSeekMin:function(e,t){t=isNaN(parseInt(t))?0:parseInt(t);e=isNaN(parseInt(e))?0:parseInt(e);var i=60*e+t;i=i-4>0?i-4:i;l.PlayerSeek(i)},PlayerColor:function(e,t,i){return l.setSkinColor(e,t,i)},setTHX:function(e){if(l)l.setTHX(e)},showControlBar:function(e){l.showControlBar(e)},setLight:function(e){l.setLight(e)},setPlayHeadSkin:function(e){l.setPlayHeadSkin(e)},setPlayerLoop:function(e){l.setLoop(e)},PlayerPause:function(e){try{l.pauseVideo(e)}catch(t){}},playModeSet:function(e){return l.playModeSet(e)},PlayerShowType:function(e){e=void 0==e?2:e;return l.setShowType(e)},setFrameSeletor:function(e){l.setFrameSeletor(e)},setFrameData:function(e){l.setFrameData(e)},PlayerInfo:function(){return l.getNsData()},PlayerResume:function(){$("#ad_crazy").hide();l.PlayerResume()},PlayerPause4ad:function(){l.PlayerPause4ad()},AddInteract:function(e){l.addInteract(e)},getPlayerState:function(){return l.getPlayerState()},callPlayerFunction:function(e,t){l.pauseVideo(false);switch(e){case"doInteract":l.doInteract(t);break;case"playerSubscribed":l.playerSubscribed(t);break;case"danmu":o.checkLogin(function(e){e&&l.setLoginState(true,o.uid())});break;default:l.doInteract(t)}},_loadflash:function(){var e={};var i={};var o=window.navigator.userAgent.toLowerCase().indexOf("android")!==-1;e.allowFullScreen=true;e.allowscriptaccess="always";e.allowFullScreenInteractive="true";if(s.ua.safari)e.wmode="opaque";i.skincolor1="ffffff";i.skincolor2="ffffff";i.VideoIDS=PageConfig.videoId2;i.ShowId=PageConfig.showid;i.category=PageConfig.catId;i.Cp=PageConfig.cp;if(location.href.indexOf("_sthd3")!=-1){i.quality="1080p";i.sv="true";e.wmode="direct";e.bgcolor="#000000"}if(PageConfig.playerUrl.indexOf("player_yknpsv.swf")!==-1){e.wmode="direct";e.bgcolor="#000000";i.sv="true"}if(PageConfig.catId&&"95"==PageConfig.catId&&5!=PageConfig.playmode)i.showloop=true;try{var u=n.params();if(u.firsttime)i.firsttime=u.firsttime;if(u.ev)i.ev=u.ev;if(u.lang)i.lang=u.lang;if(void 0!=u.adext)i.adext=u.adext}catch(c){}i.unCookie=navigator.cookieEnabled?0:1;i.frame=PageConfig.logFrame;try{i.pvid=window.UrchinAplus.pvid}catch(c){}i.uepflag=PageConfig.uepflag||0;i.Tid=0;i.VideoIDS=PageConfig.videoId2;i.isAutoPlay=true;i.playmode=PageConfig.playmode;if(PageConfig.removePlayerSideControl)i.show_ce=0;else i.show_ce=1;i.winType=o?"touch":"interior";if(PageConfig.folderId){i.Fid=PageConfig.folderId;i.Pt=PageConfig.fpos;i.Ob=PageConfig.forder;i.plchid=PageConfig.folderCateWord||""}var d=document.referrer;if(""==d)d=document.URL;var f=document.createElement("A");f.href=d;var p=["",PageConfig.videoId,f.hostname,f.pathname];embedid=a.encode64(p.join(""));i.embedid=embedid;if(navigator.userAgent.indexOf("MSIE")!=-1)i.ikuison="1";i.ysuid=t("__ysuid")||"";var h;var m=t("_bc")||"";h="bc="+m+"&pid="+PageConfig.logPvid+"&unCookie="+PageConfig.logUnCookie+"&frame="+PageConfig.logFrame;if(PageConfig.folderId)h+="&type=1&fob="+PageConfig.forder+"&fpo="+PageConfig.fpos;else h+="&type=0";if("正片"==PageConfig.showtype)h+="&svt=1&stg="+PageConfig.stage;else if(PageConfig.showid)h+="&svt=0";var v=encodeURIComponent(t("cna")||"");h+="&cna="+v;h+="&emb="+embedid+"&dn=网页&hwc=1";if(navigator.userAgent.indexOf("Android")!==-1)h+="&mtype=adr";else h+="&mtype=oth";i.vext=encodeURIComponent(h);i.cna=v;if(5==PageConfig.playmode||4==PageConfig.playmode){var g=4==PageConfig.playmode?"W_P_L_M":"P_L_M";var y=t(g);var b=t("P_F");if(1==b){switch(y){case"1":var _=12;break;case"2":var _=10;break;case"3":var _=11}if(_)i.pb=_}}i.pageStartTime=window.logPageStartTime||(new Date).getTime();if(r.mac&&r.chrome>=54&&r.chrome<55)var w={data:PageConfig.playerUrl,width:"1",height:"1",id:this.playerId};else var w={data:PageConfig.playerUrl,width:"100%",height:"100%",id:this.playerId};s.createSWF(w,e,i,"player","6.0",true);if(r.mac&&r.chrome>=54&&r.chrome<55)setTimeout(function(){l.style.width="100%";l.style.height="100%"},1e3)}});return u});define("page/find/play/player/load",["page/find/play/player/flashplayer","page/find/play/player/h5player","tui/browser","tui/cookie","tui/util/url","page/find/play/player/playerFixed","page/find/play/player/playerCallbacks"],function(e,t,i,n,a,r,o,s,l){var u=window.sessionStorage;l.load=function(){var s=location.href;var l=n("cna");var c=l.charCodeAt(l.length-1)<="U".charCodeAt(0);var d=i.mac&&(i.chrome>34||i.safariVersion>10)&&c;var f=a.params();var p="flv"===f.debug;var h="h5"===f.debug||(u?u.getItem("P_l_h5"):"");if(!p&&(d||h)){window.ykPlyr=new t({el:"#player"});ykPlyr.one("loadedH5:sucess",function(e){o.h5Bind(e,ykPlyr);window.H5player=e;new r({})});$("#module_basic_playarea").addClass("spv-player");u&&u.setItem("P_l_h5",true)}else{window.ykPlyr=new e;o.swfBind(ykPlyr);new r({});u&&u.removeItem("P_l_h5")}}});require(["page/find/g","tui/cookie","module/responsive","module/login/login","page/find/play/player/load","page/find/play/sideTool","page/find/play/interaction/main","page/find/play/advertisement","page/find/play/relationlist/listall","page/find/play/cms/cms","page/find/play/interaction/interactionBottom","page/find/play/sub","page/find/play/relationlist/interest","page/find/play/interac","page/find/play/bspool"],function(e,t,i,n,a,r,o,s,l,u,c,d,f,p,h){e.init();window.getVvlogextplay=function(){try{var e=encodeURIComponent($.param(window["UrchinAplus"]._yVvlogInfo()))}catch(t){}return e};a.load();if("704562499"==PageConfig.videoId)$(".video-pv").hide();n.one("checklogin",function(){new h({iid:PageConfig.videoId,cid:PageConfig.catId,ouid:PageConfig.videoOwner,lid:PageConfig.folderId,aid:PageConfig.showid,ct:"1001",el:$("#bspoolBox")});new d});new r;var m=new s;var v=new l;new u;new c;new f;new p;v.bind("relationlist:loaded",function(){m.addrelationListAd()});window.catId=PageConfig.catId;if(window.cateStr){var g=1*PageConfig.folderId||1*PageConfig.showid;cateStr=cateStr+"-"+g+"-"+PageConfig.videoId}var y=$(document.body);y.addClass("danmuoff");if(2==PageConfig.playmode)y.addClass("page_list");if(1==PageConfig.playmode)y.addClass("page_ugc");else new o;$("#oriLabelBox").bind("mouseenter",function(){$("#oriFrom").show()}).bind("mouseleave",function(){$("#oriFrom").hide()});var b=function(e){if(e>=1300)y.removeClass("yk-w970").addClass("page_thx yk-w1190");else y.removeClass("page_thx yk-w1190").addClass("yk-w970")};i.bind("responsed",function(e){b(e);i.trigger("player:responsive",[e]);$("body").trigger("responsive",[e])});b(i.getCurWidth());window.onbeforeunload=function(){if(n.isLogin())return;var e=t("u_l_v_t");try{var i=ykPlyr.PlayerInfo()||0;if(i)i=i.time;if(e)i=parseInt(e)+parseInt(i);if(i>0){if(i>60*6*60)i=60*6*60;t("u_l_v_t",parseInt(i),1)}}catch(a){}}})}(window.jQuery,window.oz.require,window.oz.define);;