var setting={source:null,t:null,s:60,dialog:null,mobile:null,init:function(){if(YK_setting=$$('[_uc="setting"]'),YK_setting){if(YK_setting.each(function(e){Event.observe(e,"click",this.handler_event.bind(this))}.bind(this)),$("profile")&&this.init_profile(),$("domain")&&this.init_domain(),$("valid_type")&&this.init_pwd(),$("email")&&this.init_email(),$("mobile")){var e=$("mobile");if("input"==e.tagName.toLowerCase()){var s=e.readAttribute("_enter");s&&setting[s]&&Event.observe(e,"keypress",function(e){if(13==e.keyCode)try{setting[s](e)}catch(e){alert(e)}})}}$("sv_profile")&&jQuery("#sv_profile").on("submit",setting.sv_profile)}},handler_event:function(e){var s;if(this.source=Element.extend(Event.element(e)),s=this.source.getAttribute("_click"))try{setting[s](e),Event.stop(e)}catch(e){alert(e)}else if(this.source=this.source.up("[_click]",0),this.source&&(s=this.source.getAttribute("_click")))try{setting[s](e)}catch(e){alert(e)}},init_profile:function(){var e=$("cv");e.observe("keyup",this.edit),e.observe("blur",this.edit_chk),e.observe("focus",function(){e.next(1).removeClassName("error").update("")}),$("user_nickname")&&Event.observe($("user_nickname"),"focus",function(e){var s=Event.element(e);s.next("div.msg").hasClassName("error")&&s.next("div.msg").removeClassName("error").update("")});var s=e.value.length;0!=s&&e.next().update(s+"/400")},edit:function(){var e=$("cv"),s=e.value.length;401>s>0?e.next().innerHTML=s+"/400":e.next().innerHTML='<span class="warning">'+s+"</span>/400"},edit_chk:function(){var e=$("cv"),s=e.value.length;s>400&&e.next(1).addClassName("error").update('<span class="ico__error"></span>\u4e2a\u4eba\u7b80\u4ecb\u4e0d\u80fd\u8d85\u8fc7400\u5b57')},sv_profile:function(){var e=this;return $("male").up().next().removeClassName("error").update(""),$("prov").up().next(1).removeClassName("error").update(""),$("male").checked||$("female").checked||$("male").up().next().addClassName("error").update('<span class="ico__error"></span>\u8bf7\u9009\u62e9\u6027\u522b'),0==$("prov").value?($("prov").up().next(1).addClassName("error").update('<span class="ico__error"></span>\u8bf7\u9009\u62e9\u4f60\u6240\u5728\u5730\u533a\uff0c\u8fd9\u5c06\u6709\u52a9\u4e8e\u63d0\u5347\u89c6\u9891\u89c2\u770b\u6d41\u7545\u6027'),!1):"\u9a8c\u8bc1\u7801"==$("J_captchaBox").value||0===$("J_captchaBox").value.length?($("J_captchaBox").next(1).addClassName("error").update('<span class="ico__error"></span>\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801'),!1):($("J_captchaBox").next(1).removeClassName("error").update(""),new Ajax.Request("/api/setting/update_personal_info",{method:"post",parameters:Form.serialize("sv_profile"),onSuccess:function(s){$("J_captchaBox").next().down("img").click();var t=s.responseText;if(t==-1)$("male").up().next().addClassName("error").update('<span class="ico__error"></span>\u8bf7\u9009\u62e9\u6027\u522b');else if(t==-2)$("prov").up().next(1).addClassName("error").update('<span class="ico__error"></span>\u8bf7\u9009\u62e9\u4f60\u6240\u5728\u5730\u533a\uff0c\u8fd9\u5c06\u6709\u52a9\u4e8e\u63d0\u5347\u89c6\u9891\u89c2\u770b\u6d41\u7545\u6027');else if(1==t)$("J_captchaBox").value="",e.showMsg("\u4fdd\u5b58\u6210\u529f\uff01",140,1);else{if(t!=-3&&t!=-4)return!1;$("J_captchaBox").next(1).addClassName("error").update('<span class="ico__error"></span>\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801')}}}),!1)},sv_avatar:function(){return $("x").value&&$("y").value&&$("y").value>=0&&$("x").value>=0&&$("w").value&&$("w").value>0?void nova_request(function(e){1==e?($$("div.content")[0].down(".modify_avatar .showbox").hide(),$$("div.content")[0].down(".modify_avatar .action").hide(),$$("div.content")[0].down(".modify_avatar .import").hide(),$$("div.content")[0].down(".modify_avatar .hint").style.display="block",$$("div.content")[0].down(".modify_avatar .hint span").innerHTML="\u4fee\u6539\u5934\u50cf\u6210\u529f\uff01"):($$("div.content")[0].down(".modify_avatar .showbox").hide(),$$("div.content")[0].down(".modify_avatar .action").hide(),$$("div.content")[0].down(".modify_avatar .import").hide(),$$("div.content")[0].down(".modify_avatar .hint").style.display="block",$$("div.content")[0].down(".modify_avatar .hint span").innerHTML="\u4fee\u6539\u5934\u50cf\u5931\u8d25\uff01")},"/u/uploadAvatar",{x:$("x").value,y:$("y").value,w:$("w").value,h:$("h").value,tmp:$("tmp").value,_w:$("_w").value,_h:$("_h").value},"post"):($$("div.content")[0].down(".modify_avatar .showbox").hide(),$$("div.content")[0].down(".modify_avatar .action").hide(),$$("div.content")[0].down(".modify_avatar .import").hide(),$$("div.content")[0].down(".modify_avatar .hint").style.display="block",$$("div.content")[0].down(".modify_avatar .hint span").innerHTML="\u4fee\u6539\u5934\u50cf\u5931\u8d25\uff01",!1)},init_domain:function(){var e=$("domain");e.observe("focus",function(){e.next().removeClassName("msg error").addClassName("tips").update("6\u523020\u4f4d\u5b57\u6bcd\u6216\u6570\u5b57\uff0c\u4e0d\u53ef\u4e3a\u7eaf\u6570\u5b57\uff0c<strong>\u8bbe\u7f6e\u540e\u4e0d\u53ef\u66f4\u6539</strong>\u3002")}),e.observe("blur",function(){e.next().update("")})},domain_msg:function(e){var s=$("domain");s.addClassName("form_input_error"),s.next().addClassName("msg error").update('<span class="ico__error"></span>'+e)},sv_domain:function(){var e=$("domain");if(e.next().removeClassName("tips"),e.value.length>20)return void this.domain_msg("\u57df\u540d\u4e0d\u80fd\u8d85\u8fc720\u4f4d");if(e.value.length<6)return void this.domain_msg("\u57df\u540d\u81f3\u5c11\u8981\u67096\u4f4d");if(!isNaN(e.value))return void this.domain_msg("\u57df\u540d\u4e0d\u80fd\u5168\u662f\u6570\u5b57");for(var s=!1,t=0;t<e.value.length;t++){var a=e.value.charAt(t).charCodeAt(0);if(!(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122)){this.domain_msg("\u57df\u540d\u53ea\u80fd\u4f7f\u7528\u5b57\u6bcd\u6216\u6570\u5b57"),s=!0;break}}if(s!==!0){var n=this;nova_request(function(s){if(s==-6)n.domain_msg("\u8be5\u57df\u540d\u5df2\u7ecf\u88ab\u62a2\u6ce8");else if(1==s||1==s){n.showMsg("\u4fdd\u5b58\u6210\u529f\uff01",160,1);var t="<h6>\u590d\u5236\u4f60\u7684\u4e2a\u6027\u57df\u540d\uff0c\u53d1\u9001\u7ed9\u670b\u53cb\u4eec\u5427\uff1a</h6><p>http://i.youku.com/"+e.value+'<span class="action"><a href="#" _click="cp_domain">\u590d\u5236</a></span>';n.source.up(".set_domain").update(t)}},"/u/updateDomain",{domain:e.value},"post")}},cp_domain:function(){var e=this.source.up("p").innerHTML.split("<"),s=e[0];if(window.clipboardData)window.clipboardData.clearData(),window.clipboardData.setData("Text",s),this.showMsg("\u590d\u5236\u6210\u529f\uff01",160,1);else if(navigator.userAgent.indexOf("Opera")!=-1)alert("2"),window.location=s;else if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(e){return alert("\u60a8\u7684firefox\u5b89\u5168\u9650\u5236\u9650\u5236\u60a8\u8fdb\u884c\u526a\u8d34\u677f\u64cd\u4f5c\uff0c\u8bf7\u6253\u5f00\u2019about:config\u2019\u5c06signed.applets.codebase_principal_support\u2019\u8bbe\u7f6e\u4e3atrue\u2019\u4e4b\u540e\u91cd\u8bd5\uff0c\u76f8\u5bf9\u8def\u5f84\u4e3afirefox\u6839\u76ee\u5f55/greprefs/all.js"),!1}var t=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!t)return;var a=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!a)return;a.addDataFlavor("text/unicode");var n=new Object,n=(new Object,Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString)),i=s;n.data=i,a.setTransferData("text/unicode",n,2*i.length);var o=Components.interfaces.nsIClipboard;if(!t)return!1;t.setData(a,null,o.kGlobalClipboard),this.showMsg("\u590d\u5236\u6210\u529f\uff01",160,1)}else alert("\u60a8\u4f7f\u7528\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6b64\u590d\u5236\u529f\u80fd\uff0c\u8bf7\u4f7f\u7528Ctrl+C\u6216\u9f20\u6807\u53f3\u952e\u3002")},bind:function(){var e=this.source.getAttribute("data-ename"),s=this.source.getAttribute("data-cname"),t=this.source.getAttribute("data-size"),a="600#370",n="/partner_thirdPartOnlyBind/tlsite_"+e+"_tlclient_ykwebb",i=(t||a).split("#"),o="location=yes,left=200,top=100,width="+i[0]+",height="+i[1]+",resizable=yes";this.thirdwinOpener=window.open(n,s,o)},thirdPartBindCallback:function(e,s){if(null!=this.thirdwinOpener&&this.thirdwinOpener.close(),e>=0){var t=this.source.getAttribute("data-ename");$(t+"_before").hide(),$(t+"_after").show()}setting.showMsg(s,260,e>=0?1:2)},c_bind:function(){var e=this.source,s=e.up("ul").getAttribute("data"),t=this;confirm("\u6b64\u64cd\u4f5c\u5c06\u540c\u65f6\u53d6\u6d88\u5728\u571f\u8c46\u5e73\u53f0\u7684\u6388\u6743\uff0c\u8be5\u5e94\u7528\u65e0\u6cd5\u518d\u8bbf\u95ee\u60a8\u7684\u6570\u636e\u3002")&&nova_request(function(e){if(1==e||2==e){var a=s+"_before",n=s+"_after";$(n).hide();try{$(a).show()}catch(e){$(n).next('[role="separator"]').hide()}t.showMsg("\u89e3\u9664\u7ed1\u5b9a\u6210\u529f\uff01",160,1)}else t.showMsg("\u53d6\u6d88\u7ed1\u5b9a\u5931\u8d25\u3002",160,2)},"/u/freeBind",{partner:s},"post")},r_auth:function(){myShare.bindSinaReAuth()},sv_connect:function(){var e=this;new Ajax.Request("/u/updateShareSet",{method:"post",parameters:Form.serialize("sv_conn"),onSuccess:function(s){var t=s.responseText;1==t||1==t?e.showMsg("\u4fdd\u5b58\u8bbe\u7f6e\u6210\u529f",170,1):e.showMsg("\u4fdd\u5b58\u8bbe\u7f6e\u5931\u8d25",170,2)}})},init_email:function(){var e=document.createElement("div");e.className="YK_overlay_saveinfo",e.style.display="block";var s=document.createElement("div");s.className="prompt",e.appendChild(s);var t=document.createElement("h6"),a=document.createElement("span");a.className="ico__prompt",t.appendChild(a),s.appendChild(t),Element.extend(t).update(t.innerHTML+"\u653e\u5f03\u4fee\u6539");var n=document.createElement("p");Element.extend(n).update("\u653e\u5f03\u4fee\u6539\u540e\u65b0\u7684\u9a8c\u8bc1\u94fe\u63a5\u5c06\u5931\u6548\uff0c\u662f\u5426\u786e\u5b9a\u653e\u5f03\u4fee\u6539\uff1f\t"),s.appendChild(n);var i=document.createElement("div");i.className="action",s.appendChild(i);var o=document.createElement("div");o.className="form_btn form_btn_s form_btnmaj_s",i.appendChild(o),Element.extend(o).observe("click",this.rb_confirm);var r=document.createElement("span");r.className="form_btn_text",Element.extend(r).update("\u786e\u5b9a"),o.appendChild(r);var l=document.createElement("div");l.className="form_btn form_btn_s form_btnsub_s",i.appendChild(l),Element.extend(l).observe("click",this.rb_cancel);var d=document.createElement("span");d.className="form_btn_text",Element.extend(d).update("\u53d6\u6d88"),l.appendChild(d);this.dialog=new Qwindow({title:"",size:{width:200,height:140},content:{type:"element",value:e},showhandle:!1,elements:"",showmask:!1})},c_mail:function(){$("_m2").style.display="none",$("_m1").style.display="block",$("_m4").style.display="none"},mail_msg:function(e,s){$("password").next(1).addClassName("error").update('<span class="ico__error"></span>'+s),e.addClassName("form_input_error")},sv_mail:function(){var e=$("email"),s=$("password"),t=this;return""==e.value||"\u8f93\u5165\u90ae\u7bb1"==e.value?void this.mail_msg(e,"\u90ae\u7bb1\u4e3a\u7a7a"):isEmail(e.value)?e.value.length>50?void this.mail_msg(e,"\u8bf7\u4e0d\u8981\u8d85\u8fc750\u4e2a\u5b57\u7b26"):""==s.value||"\u8f93\u5165\u5bc6\u7801"==s.value?void this.mail_msg(s,"\u5bc6\u7801\u4e3a\u7a7a"):void nova_request(function(a){if("number"==typeof a){var n="";switch(a){case-1:case-10:case-11:case-12:n="\u8be5\u90ae\u7bb1\u5df2\u7ecf\u4e0e\u5176\u4ed6\u5e10\u53f7\u7ed1\u5b9a";break;case-2:n="\u6b64\u7528\u6237\u4e0d\u5b58\u5728";break;case-3:n="\u90ae\u7bb1\u6ca1\u6709\u66f4\u6539";break;case-4:case-101:n="\u90ae\u7bb1\u4e3a\u7a7a";break;case-5:case-111:n="\u7528\u6237\u4e0d\u5b58\u5728";break;case-8:n="24\u5c0f\u65f6\u5185\u53ea\u80fd\u4fee\u65392\u6b21\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5";break;case-9:n="\u90ae\u7bb1\u683c\u5f0f\u6709\u8bef";break;case-1e4:n="\u5bc6\u7801\u9519\u8bef\uff01";break;case-7:default:n="\u64cd\u4f5c\u5931\u8d25\uff01"}s.next(1).addClassName("error").update('<span class="ico__error"></span>'+n)}else if("string"==typeof a){e.removeClassName("form_input_error").addClassName("form_input_defaultvalue"),s.removeClassName("form_input_error").addClassName("form_input_defaultvalue"),s.value="",s.next().style.display="",s.next(1).removeClassName("error").update("");var i=$("_m1"),o=$("_m2"),r=$("_m3"),l=i.getAttribute("_p");e.value=t._h_mail(e.value),1==l?(o.style.display="block",o.down(1).update(e.value),o.down().next(1).down().update(e.value),i.setAttribute("_p","3"),i.down(2).next(3).innerHTML=$("_m1").down(2).next(3).innerHTML+'<div class="form_btn form_btn_m form_btnsub_m"><span class="form_btn_text" _click="cancel_mail">\u53d6\u3000\u6d88</span></div>',r.down(1).update(e.value),o.down().next(2).down(1).setAttribute("href",a)):(3==l&&i.setAttribute("_p",6),r.style.display="block",r.down().next().update("\u4e00\u5c01\u9a8c\u8bc1\u90ae\u4ef6\u5df2\u7ecf\u53d1\u9001\u5230 "+e.value+"\uff0c\u8bf7\u70b9\u51fb\u90ae\u4ef6\u4e2d\u7684\u94fe\u63a5\u4ee5\u5b8c\u6210\u90ae\u7bb1\u9a8c\u8bc1\u65b0\u90ae\u7bb1\u9a8c\u8bc1\u4e4b\u540e\u624d\u80fd\u751f\u6548"),r.down().next(1).down(1).setAttribute("href",a)),i.style.display="none",e.value="\u8f93\u5165\u90ae\u7bb1"}}.bind(this),"/u/updateBindMail",{email:e.value,password:s.value},"post"):void this.mail_msg(e,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u5730\u5740")},n_mail:function(){$("_m4").style.display="block"},rc_mail:function(){"block"==$("_m2").style.display?$("_m2").style.display="none":"block"==$("_m3").style.display&&($("_m3").style.display="none"),$("_m4").style.display="none",$("_m1").style.display="block"},r_mail:function(){var e=this;nova_request(function(s){1==s?(e.showMsg("\u53d1\u9001\u6210\u529f\uff01",140,1),setTimeout(function(){$("_m4").style.display="none"},1500)):e.showMsg("\u53d1\u9001\u5931\u8d25",140,2)},"/user/validateMail",{},"post")},cancel_mail:function(){var e=$("email"),s=$("password"),t=$("_m1");e.value="\u8f93\u5165\u90ae\u7bb1",e.addClassName("form_input_defaultvalue").removeClassName("form_input_error"),s.value="",s.addClassName("form_input_defaultvalue").removeClassName("form_input_error"),s.next().removeClassName("error").update("\u8f93\u5165\u5bc6\u7801"),s.next().style.display="",s.next(1).removeClassName("error").update(""),t.style.display="none";var a=t.getAttribute("_p");a%2===0?$("_m3").style.display="block":$("_m2").style.display="block"},_h_mail:function(e){var s=e.split("@");switch(s[0].length){case 1:return"*@"+s[1];case 2:return s[0].charAt(0)+"*@"+s[1];default:return s[0].charAt(0)+"***"+s[0].charAt(s[0].length-1)+"@"+s[1]}},mail_pswd:function(){var e=this.source.tagName;"INPUT"==e||"input"==e?(this.source.focus(),this.source.next().style.display="none"):"span"!=e&&"SPAN"!=e||(this.source.style.display="none",this.source.up().down().next().focus(),this.source.up().down().next().observe("blur",function(e){var s=Event.element(e);""==s.value&&(s.next().style.display="")}))},rb_mail:function(){this.dialog.show()},rb_confirm:function(){setting.dialog.hide(),nova_request(function(e){1==e?($("_m2").style.display="block",$("_m3").style.display="none",$("_m1").setAttribute("_p",3)):_this.showMsg("\u66f4\u65b0\u5931\u8d25\uff01",140,2)}.bind(this),"/u/unbindMail/",{},"get")},rb_cancel:function(){setting.dialog.hide()},c_mobile1:function(){var e=this;this.mobile=$$("a[_mobile]")[0].getAttribute("_mobile"),nova_request(function(s){s==-1?e.showMsg("\u8bf7\u8f93\u5165\u624b\u673a\u53f7","",2):s==-6?e.showMsg("\u77ed\u4fe1\u53d1\u9001\u8fc7\u4e8e\u9891\u7e41","",2):s==-8?e.showMsg("\u8be5\u624b\u673a\u53f7\u4e0d\u5b58\u5728","",2):s==-200||s==-214?e.showMsg("\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41","",2):s==-201?e.showMsg("\u624b\u673a\u53f7\u4e0d\u5408\u6cd5","",2):s==-202?e.showMsg("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25","",2):s==-215?e.showMsg("\u540c\u4e00\u624b\u673a1\u5206\u949f\u5185\u53ea\u80fd\u4e0b\u53d1\u4e00\u6b21\u9a8c\u8bc1\u7801","",2):s==-502?e.showMsg("\u670d\u52a1\u7aef\u9519\u8bef","",2):1==s||1==s?(setting.s=60,setting.t=setInterval("setting.wait_change_mobile()",1e3),$("_mob4").style.display="none",$("_mob7").style.display="block"):e.showMsg("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25,\u8bf7\u68c0\u67e5\u540e\u91cd\u8bd5","",2)},"/u/~ajax/sendMobileCode",{},"get")},change_mobile_next:function(){var e=$("code_change_mobile").value;if(e!=parseInt(e)||6!=e.length)return void this.showMsg("\u9a8c\u8bc1\u7801\u9519\u8bef",140,2);var s=this;nova_request(function(e){e==-1?s.showMsg("\u8bf7\u8f93\u5165\u624b\u673a\u53f7","",2):e==-2?s.showMsg("\u6821\u9a8c\u9a8c\u8bc1\u7801\u5931\u8d25","",2):e==-4?s.showMsg("\u8bf7\u5148\u767b\u5f55","",2):1!=e&&1!=e||($("_mob7").style.display="none",$("_mob4").style.display="none",$("_mob9").style.display="block")},"/u/~ajax/verifyMobileCode",{mobile:s.mobile,code:e},"get")},c_mobile2:function(){$("_mob3").style.display="none",$("_mob2").style.display="block";var e=$("r_mobile").value;e.value="",$("_mob3").down().innerHTML="\u77ed\u4fe1\u9a8c\u8bc1\u7801\u5df2\u7ecf\u53d1\u9001\u5230\u4f60\u7684\u624b\u673a\uff1a<strong>"+e.substr(0,3)+"****"+e.substr(7,4),clearInterval(this.t)},confirm:function(){var e=$("code"),s=""==$("mobile").value?$("r_mobile").value:$("mobile").value,t=this;nova_request(function(e){e==-1?t.showMsg("\u53c2\u6570\u9519\u8bef",140,2):e==-2?t.showMsg("\u624b\u673a\u9a8c\u8bc1\u5931\u8d25",180,2):e==-3?t.showMsg("\u66f4\u65b0\u624b\u673a\u53f7\u5931\u8d25",190,2):1==e&&($("_mob4").style.display="block",$("_mob4").down().innerHTML=s.substr(0,3)+"****"+s.substr(7,4),$("_mob3").style.display="none",t.showMsg("\u66f4\u65b0\u6210\u529f!",140,1))},"/u/checkBindMobileCode",{code:e.value},"get")},cancel1:function(){var e=$("r_mobile");e.removeClassName("form_input_error"),e.next().removeClassName("error").update(""),$("_mob2").style.display="none",$("_mob6").style.display="none",$("_mob4").style.display="block"},cancel2:function(){$("_mob2").style.display="none",$("_mob1").style.display="block",$("mobile").value=""},rc_mobile:function(){var e=function(e){s.addClassName("form_input_error"),s.next().addClassName("error").update('<span class="ico__error"></span>'+e)},s=$("r_mobile");if(s.removeClassName("form_input_error"),s.next().removeClassName("error").update(""),""==s.value)return void e("\u8bf7\u8f93\u5165\u624b\u673a\u53f7");if(!/^1[3,5,8,4,7]\d{9}$/.test(s.value))return void e("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7");this.mobile=s.value;var t=$("code");clearInterval(this.t),setting.s=60,t.up().next().down("span").innerHTML="\u91cd\u65b0\u53d1\u9001("+setting.s+")",t.value="\u8f93\u5165\u77ed\u4fe1\u9a8c\u8bc1\u7801",t.up().next().down().next().addClassName("form_btn_disabled"),nova_request(function(t){if(t==-1)e("\u8bf7\u8f93\u5165\u624b\u673a\u53f7");else if(t==-6)e("\u77ed\u4fe1\u53d1\u9001\u8fc7\u4e8e\u9891\u7e41");else if(t==-8)e("\u8be5\u624b\u673a\u53f7\u5df2\u7ecf\u4e0e\u5176\u4ed6\u7684\u4f18\u9177\u5e10\u53f7\u7ed1\u5b9a");else if(t==-200||t==-214)_this.showMsg("\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41","",2);else if(t==-201)_this.showMsg("\u624b\u673a\u53f7\u4e0d\u5408\u6cd5","",2);else if(t==-202)_this.showMsg("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25","",2);else if(t==-215)_this.showMsg("\u540c\u4e00\u624b\u673a1\u5206\u949f\u5185\u53ea\u80fd\u4e0b\u53d1\u4e00\u6b21\u9a8c\u8bc1\u7801","",2);else if(t==-502)_this.showMsg("\u670d\u52a1\u7aef\u9519\u8bef","",2);else if(1==t||1==t){var a=$("_mob3");a.style.display="block",$("_mob2").style.display="none";var n=s.value;a.down(1).innerHTML=n.substr(0,3)+"***"+n.substr(7,4),setting.t=setInterval("setting.wait()",1e3)}else _this.showMsg("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25,\u8bf7\u68c0\u67e5\u540e\u91cd\u8bd5","",2)},"/u/bindMobile",{mobile:s.value},"post")},wait:function(){var e=this,s=$("code");setting.s=setting.s-1;var t=s.up().next().down("span");t.innerHTML="\u91cd\u65b0\u53d1\u9001("+setting.s+")";var a=e.mobile;if(setting.s<=0)return clearInterval(setting.t),t.innerHTML="\u53d1\u9001\u9a8c\u8bc1\u7801",s.up().next().down(".form_btn").removeClassName("form_btn_disabled"),$("_mob3").down().innerHTML=$("_mob3").down().innerHTML+'<span class="modify"><a href="#" _click="c_mobile2">\u4fee\u6539\u53f7\u7801</a></span>',t.stopObserving(),void t.observe("click",function(){s.up().next().down().next().hasClassName("form_btn_disabled")||nova_request(function(t){1==t||1==t?(clearInterval(setting.t),setting.s=60,s.up().next().down(".form_btn").addClassName("form_btn_disabled"),s.up().next().down("span").innerHTML="\u91cd\u65b0\u53d1\u9001(60)",$("_mob3").down().innerHTML="\u77ed\u4fe1\u9a8c\u8bc1\u7801\u5df2\u7ecf\u53d1\u9001\u5230\u4f60\u7684\u624b\u673a\uff1a<strong>"+a.substr(0,3)+"****"+a.substr(7,4)+"</strong>",setting.t=setInterval("setting.wait()",1e3)):t==-6?e.showMsg("\u77ed\u4fe1\u53d1\u9001\u8fc7\u4e8e\u9891\u7e41!",220,2):e.showMsg("\u53d1\u9001\u77ed\u4fe1\u5931\u8d25!",210,2)},"/u/bindMobile",{mobile:a},"post")})},wait_change_mobile:function(){var e=this,s=$("code_change_mobile");setting.s=setting.s-1;var t=s.next().down("span");t.innerHTML="\u91cd\u65b0\u53d1\u9001("+setting.s+")",t.parentNode.addClassName("form_btn_disabled");e.mobile;if(setting.s<=0)return clearInterval(setting.t),t.parentNode.removeClassName("form_btn_disabled"),t.innerHTML="\u53d1\u9001\u9a8c\u8bc1\u7801",t.stopObserving(),void t.observe("click",function(){setting.s>0||nova_request(function(s){s==-1?e.showMsg("\u8bf7\u8f93\u5165\u624b\u673a\u53f7","",2):s==-7?e.showMsg("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25","",2):s==-8?e.showMsg("\u8be5\u624b\u673a\u53f7\u4e0d\u5b58\u5728","",2):s==-6?e.showMsg("\u77ed\u4fe1\u53d1\u9001\u8fc7\u4e8e\u9891\u7e41","",2):s==-200||s==-214?e.showMsg("\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41","",2):s==-201?e.showMsg("\u624b\u673a\u53f7\u4e0d\u5408\u6cd5","",2):s==-202?e.showMsg("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25","",2):s==-215?e.showMsg("\u540c\u4e00\u624b\u673a1\u5206\u949f\u5185\u53ea\u80fd\u4e0b\u53d1\u4e00\u6b21\u9a8c\u8bc1\u7801","",2):s==-502?e.showMsg("\u670d\u52a1\u7aef\u9519\u8bef","",2):1==s||1==s?(setting.s=60,setting.t=setInterval("setting.wait_change_mobile()",1e3),$("_mob7").style.display="block"):e.showMsg("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25,\u8bf7\u68c0\u67e5\u540e\u91cd\u8bd5","",2)},"/u/~ajax/sendMobileCode",{mobile:e.mobile},"post")})},wait_bind_mobile:function(){var e=$("newmobile");setting.s=setting.s-1;var s=e.next().down("span");if(s.innerHTML="\u91cd\u65b0\u53d1\u9001("+setting.s+")",s.parentNode.addClassName("form_btn_disabled"),setting.s<=0)return clearInterval(setting.t),s.parentNode.removeClassName("form_btn_disabled"),s.innerHTML="\u53d1\u9001\u9a8c\u8bc1\u7801",void s.stopObserving()},bind_new_mobile_send_code:function(){var e=$("newmobile").value;if(!$("newmobile").next().hasClassName("form_btn_disabled")){if(!/^1[3,5,8,4,7]\d{9}$/.test(e))return void this.showMsg("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7","",2);var s=this;this.mobile=e,setting.s=60,nova_request(function(e){e==-1?s.showMsg("\u8bf7\u8f93\u5165\u624b\u673a\u53f7","",2):e==-6?s.showMsg("\u77ed\u4fe1\u53d1\u9001\u8fc7\u4e8e\u9891\u7e41","",2):e==-8?s.showMsg("\u8be5\u624b\u673a\u53f7\u5df2\u6ce8\u518c","",2):e==-200||e==-214?s.showMsg("\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41","",2):e==-201?s.showMsg("\u624b\u673a\u53f7\u4e0d\u5408\u6cd5","",2):e==-202?s.showMsg("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25","",2):e==-215?s.showMsg("\u540c\u4e00\u624b\u673a1\u5206\u949f\u5185\u53ea\u80fd\u4e0b\u53d1\u4e00\u6b21\u9a8c\u8bc1\u7801","",2):e==-502?s.showMsg("\u670d\u52a1\u7aef\u9519\u8bef","",2):1==e||1==e?(setting.s=60,setting.t=setInterval("setting.wait_bind_mobile()",1e3)):s.showMsg("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25,\u8bf7\u68c0\u67e5\u540e\u91cd\u8bd5","",2)},"/u/bindMobile",{mobile:s.mobile},"post")}},comfirm_new_mobile:function(){var e=$("newmobile").value;if(!/^1[3,5,8,4,7]\d{9}$/.test(e))return void this.showMsg("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7","",2);var s=$("bindsmscode").value;if(s!=parseInt(s)||6!=s.length)return void this.showMsg("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801","",2);var t=this;this.mobile=e,nova_request(function(e){e==-1?t.showMsg("\u6821\u9a8c\u9519\u8bef","",2):e==-2?t.showMsg("\u9a8c\u8bc1\u7801\u6709\u8bef","",2):e==-3?t.showMsg("\u7ed1\u5b9a\u624b\u673a\u53f7\u5931\u8d25","",2):e==-4?t.showMsg("\u8bf7\u5148\u9a8c\u8bc1\u65e7\u624b\u673a","",2):1!=e&&1!=e||($("_mob9").style.display="none",$("_mob8").style.display="block")},"/u/reCheckBindMobileCode",{code:s},"post")},cs_mobile:function(){var e=function(e){s.addClassName("form_input_error"),s.next().addClassName("error").update('<span class="ico__error"></span>'+e)},s=$("mobile");if(""==s.value)return void e("\u8bf7\u8f93\u5165\u624b\u673a\u53f7");if(!/^1[3,5,8,4,7]\d{9}$/.test(s.value))return void e("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7");var t=this,a=$("code");clearInterval(setting.t),setting.s=60,a.up().next().down("span").innerHTML="\u91cd\u65b0\u53d1\u9001("+setting.s+")",a.value="\u8f93\u5165\u77ed\u4fe1\u9a8c\u8bc1\u7801",nova_request(function(a){if(a==-1)e("\u8bf7\u8f93\u5165\u624b\u673a\u53f7");else if(a==-6)e("\u77ed\u4fe1\u53d1\u9001\u8fc7\u4e8e\u9891\u7e41");else if(a==-8)e("\u8be5\u624b\u673a\u53f7\u5df2\u7ecf\u4e0e\u5176\u4ed6\u7684\u4f18\u9177\u5e10\u53f7\u7ed1\u5b9a");else if(a==-200||a==-214)t.showMsg("\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41","",2);else if(a==-201)t.showMsg("\u624b\u673a\u53f7\u4e0d\u5408\u6cd5","",2);else if(a==-202)t.showMsg("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25","",2);else if(a==-215)t.showMsg("\u540c\u4e00\u624b\u673a1\u5206\u949f\u5185\u53ea\u80fd\u4e0b\u53d1\u4e00\u6b21\u9a8c\u8bc1\u7801","",2);else if(a==-502)t.showMsg("\u670d\u52a1\u7aef\u9519\u8bef","",2);else if(1==a||1==a){t.mobile=s.value;var n=$("_mob3");$("_mob1").style.display="none",n.style.display="block";var i=s.value;n.down(1).innerHTML=i.substr(0,3)+"****"+i.substr(7,4),setting.t=setInterval("setting.wait()",1e3)}else t.showMsg("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25,\u8bf7\u68c0\u67e5\u540e\u91cd\u8bd5","",2)},"/u/bindMobile",{mobile:s.value},"post")},unbind:function(){$("_mob4").style.display="none",$("_mob5").style.display="block"},_clear:function(e,s){e.addClassName("form_input_defaultvalue"),e.value="\u8bf7\u8f93\u5165\u539f\u6709\u624b\u673a\u53f7",e.next().removeClassName("error").update(""),s.addClassName("form_input_defaultvalue"),s.value="\u9a8c\u8bc1\u7801",s.next(1).removeClassName("error").update("")},unbind_chk:function(){var e=this.source.up(2),s=this.source.getAttribute("_t"),t="u"==s?e.down(1):e.down().next().down(),a="u"==s?e.down().next().down():e.down(1).next().down();if(t.next().removeClassName("error").update(""),a.next(1).removeClassName("error").update(""),"\u8bf7\u8f93\u5165\u539f\u6709\u624b\u673a\u53f7"==t.value)return t.next().addClassName("error").update('<span class="ico__error"></span>\u8bf7\u8f93\u5165\u624b\u673a\u53f7'),!1;if(!/^1[3,5,8,4,7]\d{9}$/.test(t.value))return t.next().addClassName("error").update('<span class="ico__error"></span>\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7'),!1;if(""==a.value||"\u9a8c\u8bc1\u7801"==a.value)return a.next(1).addClassName("error").update("<span class='ico__error'></span>"),!1;var n=this;nova_request(function(e){if(e<1&&(a.next().down(1).src="/page/usc/captcha?v="+Math.random()),e==-1)t.next().addClassName("error").update('<span class="ico__error"></span>\u89e3\u9664\u624b\u673a\u7ed1\u5b9a\u5931\u8d25');else if(e==-2)t.next().addClassName("error").update('<span class="ico__error"></span>\u53c2\u6570\u9519\u8bef');else if(e==-3)a.next(1).addClassName("error").update("<span class='ico__error'></span>");else if(e==-4)t.next().addClassName("error").update('<span class="ico__error"></span>\u624b\u673a\u53f7\u9519\u8bef');else if(1==e||1==e)if("u"==s){n.showMsg("\u89e3\u9664\u624b\u673a\u7ed1\u5b9a\u6210\u529f",180,1),n._clear(t,a),setTimeout(function(){$("_mob5").style.display="none",$("_mob1").style.display="block"},1300);var i=$("mobile");i.value="",i.removeClassName("form_input_error"),i.next().removeClassName("error").update("")}else"c"==s&&(n._clear(t,a),a.next().down(1).src="/page/usc/captcha?v="+Math.random(),$("_mob6").style.display="none",$("_mob2").style.display="block")},"/u/unbindOrChkMobile",{m:t.value,c:a.value,t:s},"post")},unbind_cancel:function(){var e=this.source.up(1).down(1).getAttribute("_t"),s="u"==e?this.source.up(2).down(1):this.source.up(2).down().next().down(),t="u"==e?this.source.up(2).down().next().down():this.source.up(2).down().next(1).down();this._clear(s,t),$("_mob4").style.display="block","u"==e?$("_mob5").style.display="none":$("_mob6").style.display="none"},cancel_bind:function(){var e=this.source.up(2),s=this;nova_request(function(t){1==t||1==t?(e.hide(),e.next().hide(),s.showMsg("\u53d6\u6d88\u7ed1\u5b9a\u6210\u529f!",190,1)):t==-1?s.showMsg("\u53d6\u6d88\u7ed1\u5b9a\u5931\u8d25!",190,2):2==t&&(e.up().innerHTML="\u6ca1\u6709\u6388\u6743\u7684\u5e94\u7528\u3002",s.showMsg("\u53d6\u6d88\u7ed1\u5b9a\u6210\u529f\u3002",190,1))},"/u/freeBind",{partner:e.getAttribute("data")},"post")},chs:function(){1==this.source.down().value?this.source.down().value=!1:this.source.down().value=!0},chk_bind:function(){var e=$("code");nova_request(function(e){return 1==e||1==e?void(document.location.href="/u/setting/sub_security/tab_mobile.html"):void _this.showMsg("\u77ed\u4fe1\u9a8c\u8bc1\u5931\u8d25!",190,2)},"/u/checkBindMobileCode",{code:e.value},"post")},init_pwd:function(){var e=$("valid_type"),s=e.readAttribute("_vt");3==s?(Event.observe(e,"change",function(s){1==e.value?($$('[_vt="mobile"]').invoke("show"),$$('[_vt="email"]').invoke("hide")):2==e.value&&($$('[_vt="mobile"]').invoke("hide"),$$('[_vt="email"]').invoke("show"))}),pwdUtil.init()):1==s&&pwdUtil.init()},send_mobile_code:function(){if(!setting.t){var e=this;nova_request(function(s){s==-1?e.showMsg("\u624b\u673a\u53f7\u4e3a\u7a7a","",2):s==-6?e.showMsg("\u77ed\u4fe1\u53d1\u9001\u8fc7\u4e8e\u9891\u7e41","",2):s==-8?e.showMsg("\u8be5\u624b\u673a\u53f7\u4e0d\u5b58\u5728","",2):s==-200||s==-214?e.showMsg("\u8bf7\u6c42\u8fc7\u4e8e\u9891\u7e41","",2):s==-201?e.showMsg("\u624b\u673a\u53f7\u4e0d\u5408\u6cd5","",2):s==-202?e.showMsg("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25","",2):s==-215?e.showMsg("\u540c\u4e00\u624b\u673a1\u5206\u949f\u5185\u53ea\u80fd\u4e0b\u53d1\u4e00\u6b21\u9a8c\u8bc1\u7801","",2):s==-502?e.showMsg("\u670d\u52a1\u7aef\u9519\u8bef","",2):1==s||1==s?(e.showMsg("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\u5230\u4f60\u7684\u624b\u673a","",1),setting.s=60,setting.t=setInterval("setting.wait_verify_mobile()",1e3)):e.showMsg("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25,\u8bf7\u68c0\u67e5\u540e\u91cd\u8bd5","",2)},"/u/~ajax/sendMobileCode2",{},"get")}},wait_verify_mobile:function(){setting.s=setting.s-1;var e=$("sendcode");if(e.innerHTML="\u91cd\u65b0\u53d1\u9001("+setting.s+")",e.parentNode.addClassName("form_btn_disabled"),setting.s<=0)return clearInterval(setting.t),setting.t=null,e.parentNode.removeClassName("form_btn_disabled"),e.innerHTML="\u53d1\u9001\u9a8c\u8bc1\u7801",void e.stopObserving()},verify_mobile_code:function(){var e=$("verifycode").value;if(""==e)return void this.showMsg("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",140,2);if(e!=parseInt(e)||6!=e.length)return void this.showMsg("\u9a8c\u8bc1\u7801\u8f93\u5165\u9519\u8bef",140,2);var s=this;nova_request(function(e){e==-1?s.showMsg("\u9a8c\u8bc1\u7801\u4e3a\u7a7a","",2):e==-2?s.showMsg("\u6821\u9a8c\u9a8c\u8bc1\u7801\u5931\u8d25","",2):e==-4?s.showMsg("\u8bf7\u5148\u767b\u5f55","",2):1!=e&&1!=e||($("step0").hide(),$("step11").show())},"/u/~ajax/verifyMobileCode2",{code:e},"get")},show_pwd_msg:function(e,s){e.next("div.msg").update("<span class='ico__error'></span>"+s).show(),e.addClassName("form_input_error")},sv_password:function(){var e=$("pwd"),s=$("r_pwd");
return e.next("div.msg").update("").hide(),e.removeClassName("form_input_error"),s.next("div.msg").update("").hide(),s.removeClassName("form_input_error"),""==e.value?void this.show_pwd_msg(e,"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"):""==s.value?void this.show_pwd_msg(s,"\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801"):e.value!=s.value?void this.show_pwd_msg(e,"\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u7b26"):e.value.length>16?void this.show_pwd_msg(e,"\u5bc6\u7801\u957f\u5ea6\u8d85\u8fc716\u5b57\u7b26"):e.value.length<6?void this.show_pwd_msg(e,"\u5bc6\u7801\u957f\u5ea6\u5c11\u4e8e6\u5b57\u7b26"):void nova_call("https://"+sslDomain+"/u/~ajax/resetPassword.html",{new:e.value,r_new:s.value},"setting.renewPwdCallback",void 0,1)},renewPwdCallback:function(e){var s=this;1==e||1==e?($("step11").hide(),$("step12").show(),setTimeout(logout,2e3)):e==-1?s.showMsg("\u53c2\u6570\u9519\u8bef","",2):e==-2?s.showMsg("\u5bc6\u7801\u9519\u8bef","",2):e==-3?s.showMsg("\u66f4\u65b0\u5931\u8d25","",2):e==-4?s.showMsg("\u9a8c\u8bc1\u5931\u8d25,\u8bf7\u91cd\u65b0\u767b\u5f55\u540e\u518d\u8bd5","",2):e==-5?s.showMsg("\u8be5\u7528\u6237\u88ab\u5c4f\u853d","",2):e==-6?s.showMsg("\u9a8c\u8bc1\u672a\u901a\u8fc7","",2):e==-7&&s.showMsg("\u8be5\u5bc6\u7801\u98ce\u9669\u6781\u9ad8\uff0c\u5efa\u8bae\u52a0\u5f3a\u5bc6\u7801","",2)},send_email:function(e){var s=this,t=Event.element(e),a=t.readAttribute("waiting");return 1==a?void s.showMsg("\u90ae\u4ef6\u53d1\u9001\u4e2d,\u8bf7\u7a0d\u5019\u518d\u8bd5","",2):(t.writeAttribute("waiting",1),void nova_request(function(e){1==e||1==e?($("step0").hide(),$("step21").show()):e==-4?s.showMsg("\u8bf7\u91cd\u65b0\u767b\u5f55\u540e\u518d\u8bd5","",2):e==-5?s.showMsg("\u8be5\u7528\u6237\u88ab\u5c4f\u853d","",2):e==-6?s.showMsg("\u90ae\u7bb1\u4e0d\u5b58\u5728","",2):e==-7?s.showMsg("\u90ae\u7bb1\u5f85\u9a8c\u8bc1","",2):e==-9?s.showMsg("60s\u5185\u53ea\u80fd\u4e0b\u53d1\u4e00\u5c01","",2):e==-10?s.showMsg("\u4e00\u5929\u53ea\u80fd\u4e0b\u53d15\u6b21","",2):s.showMsg("\u53d1\u9001\u5931\u8d25","",2),t.writeAttribute("waiting",0)},"/u/~ajax/sendEmail",{},"get"))},resend_mail:function(e){var s=this,t=Event.element(e),a=t.readAttribute("waiting");return 1==a?void s.showMsg("\u90ae\u4ef6\u53d1\u9001\u4e2d,\u8bf7\u7a0d\u5019\u518d\u8bd5","",2):(t.writeAttribute("waiting",1),void nova_request(function(e){1==e||1==e?s.showMsg("\u53d1\u9001\u6210\u529f\uff01",140,1):s.showMsg("\u53d1\u9001\u5931\u8d25",140,2),t.writeAttribute("waiting",0)},"/u/~ajax/sendEmail",{},"get"))},open_more:function(){$("more").toggle()},showMsg:function(e,s,t){if(1==t)var a="ico_msg";else if(2==t)var a="ico__prompt";var n=new Qwindow,i='<div class="YK_overlay_upload_ok" style="display: block;"><div class="prompt"><div class="msg"><span class="'+a+'"></span>'+e+"</div></div></div>";n.hideHandle(),n.setSize(s,50).setContent("html",i).show(),setTimeout(function(){n.hide()},1e3)},m_name:function(){var e=function(e,s,t,a,n){var i=new Qwindow,o='<div class="YK_overlay_modifyfail" style="display: block;"><div class="prompt"><h6><span class="ico__prompt"></span>'+a+"</h6><p>"+n+"</p></div></div>";i.setSize(e,s).setContent("html",o).show(),i.hideHandle(),setTimeout(function(){i.hide()},1500)},s=this.source.getAttribute("data");return 1==s?void e(210,70,2,"\u65e0\u6cd5\u4fee\u6539\u6635\u79f0","\u8ddd\u4e0a\u6b21\u4fee\u6539\u4e0d\u8db324\u5c0f\u65f6"):2==s?void e(210,70,2,"\u65e0\u6cd5\u4fee\u6539\u6635\u79f0","\u6635\u79f0\u5c1a\u672a\u901a\u8fc7\u5ba1\u6838"):(this.source.up(1).style.display="none",void(this.source.up(1).next().style.display="block"))},cancel_name:function(){this.source.up(1).previousSiblings()[0].removeClassName("error").update(""),this.source.up(2).down("input").value="",this.source.up(2).style.display="none",this.source.up(2).previousSiblings()[0].style.display="block"},change_name:function(){for(var e=0,s=trim(this.source.up(".entry").down("input").value),t=0;t<s.length;t++){var a=s.charCodeAt(t);a>=1&&a<=126||65376<=a&&a<=65439?e++:e+=2;var n=s.charAt(t).charCodeAt(0),i="u"+s.charCodeAt(t).toString(16).toLowerCase();if(32==n)return this.source.up(1).previousSiblings()[0].addClassName("error").update('<span class="ico__error"></span>\u53ea\u80fd\u4f7f\u7528\u4e2d\u6587\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u6216\u51cf\u53f7'),!1;if(0==(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||45==n||95==n||n>19543&&n<41652||5==i.length&&i>"u3040"&&i<"u309f"||5==i.length&&i>"u30a0"&&i<"u30ff"||5==i.length&&i>"u31f0"&&i<"u31ff"||5==i.length&&i>"uac00"&&i<"ud7ff"||3==i.length&&("u2d"==i||"u5f"==i)))return this.source.up(1).previousSiblings()[0].addClassName("error").update('<span class="ico__error"></span>\u53ea\u80fd\u4f7f\u7528\u4e2d\u6587\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u6216\u51cf\u53f7'),!1}if(""==s)return this.source.up(1).previousSiblings()[0].addClassName("error").update('<span class="ico__error"></span>\u8bf7\u8f93\u5165\u6635\u79f0'),!1;if(e>30)return this.source.up(1).previousSiblings()[0].addClassName("error").update('<span class="ico__error"></span>\u6635\u79f0\u4e0d\u80fd\u8d85\u8fc715\u4e2a\u6c49\u5b57\u621630\u4e2a\u5b57\u7b26'),!1;if(e<4)return this.source.up(1).previousSiblings()[0].addClassName("error").update('<span class="ico__error"></span>\u6635\u79f0\u81f3\u5c11\u8981\u67092\u4e2a\u6c49\u5b57\u62164\u4e2a\u5b57\u7b26'),!1;if(0==isNaN(s)&&s>0)return this.source.up(1).previousSiblings()[0].addClassName("error").update('<span class="ico__error"></span>\u6635\u79f0\u4e0d\u80fd\u5168\u90e8\u4f7f\u7528\u6570\u5b57'),!1;var o=function(e,s,t,a,n){if(1==t)var i="YK_overlay_modifysuccess",o="ico__success";else if(2==t){var i="YK_overlay_modifyfail",o="ico__prompt";n="<p>"+n+"</p>";var r=!0}var l=new Qwindow,d='<div class="'+i+'" style="display: block;"><div class="prompt"><h6><span class="'+o+'"></span>'+a+"</h6>"+n+"</div></div>";l.setSize(e,s).setContent("html",d).show(),r&&l.hideHandle(),setTimeout(function(){l.hide()},1500)}.bind(this),r=this.source;new Ajax.Request("/u/updateName",{method:"post",parameters:"name="+s,setRequestHeader:{"If-Modified-Since":"0"},onSuccess:function(e){var t=e.responseText;if(r.up(1).previousSiblings()[0].removeClassName("error").update(""),1==t){r.up(2).down("input").value="",r.up(2).style.display="none";var a='<label for="nickname">\u6635\u79f0\uff1a</label><span class="username">'+s+'</span><span class="modify"><a href="javascript:;" data="1" _click="m_name">\u4fee\u6539</a></span>';r.up(2).previousSiblings()[0].update(a),r.up(2).previousSiblings()[0].style.display="block","undefined"!=typeof update_login_status&&update_login_status(),o(170,50,1,"\u6635\u79f0\u4fee\u6539\u6210\u529f","")}else t==-1?r.up(1).previousSiblings()[0].addClassName("error").update('<span class="ico__error"></span>\u8be5\u6635\u79f0\u5df2\u88ab\u522b\u4eba\u62a2\u6ce8'):t==-2||t==-5?r.up(1).previousSiblings()[0].addClassName("error").update('<span class="ico__error"></span>\u7528\u6237\u4fe1\u606f\u67e5\u8be2\u5931\u8d25,\u8bf7\u91cd\u65b0\u767b \u5f55'):t==-3?r.up(1).previousSiblings()[0].addClassName("error").update('<span class="ico__error"></span>\u6ca1\u6709\u66f4\u6539\u6635\u79f0'):t==-4?r.up(1).previousSiblings()[0].addClassName("error").update('<span class="ico__error"></span>\u8be5\u6635\u79f0\u4e0d\u5141\u8bb8\u6ce8\u518c'):t==-9?r.up(1).previousSiblings()[0].addClassName("error").update('<span class="ico__error"></span>\u6635\u79f0\u4e0d\u80fd\u5168\u90e8\u4f7f\u7528\u6570\u5b57'):t==-10?o(210,70,2,"\u65e0\u6cd5\u4fee\u6539\u6635\u79f0","\u8ddd\u4e0a\u6b21\u4fee\u6539\u4e0d\u8db324\u5c0f\u65f6"):t==-11?o(210,70,2,"\u65e0\u6cd5\u4fee\u6539\u6635\u79f0","\u6635\u79f0\u5c1a\u672a\u901a\u8fc7\u5ba1\u6838"):r.up(1).previousSiblings()[0].addClassName("error").update('<span class="ico__error"></span>\u6635\u79f0\u4fee\u6539\u5931\u8d25')}})},sv_privacy:function(){var e=this;nova_request(function(s){s>0?e.showMsg("\u4fdd\u5b58\u6210\u529f\uff01",140,1):e.showMsg("\u4fdd\u5b58\u5931\u8d25\uff01",140,2),Nova.addScript("http://hz.youku.com/red/click.php?tp=1&cp=4007444&cpp=1000669&r="+Math.random())},"/u/~ajax/setPrivacy",$("sv_privacy").serialize(!0),"post")}},pwdUtil={pwd:null,re_pwd:null,isAllowSubmit:!1,init:function(){var e=$("pwd"),s=$("r_pwd");e&&s&&(this.pwd=e,this.re_pwd=s,Event.observe(this.pwd,"keyup",this.count_psd.bind(this)),Event.observe(this.pwd,"blur",this.chk_password.bind(this)),Event.observe(this.re_pwd,"blur",this.chk_re_password.bind(this)),Event.observe(this.re_pwd,"focus",this.op_re_password.bind(this)))},count_psd:function(){var e=this,s=e.pwd,t=s.next("div.msg");t.update("").hide();var a=e.chars(s.value),n=s.next("div.post-tips").down("div.strength");if(s.value.length>0&&s.value.length<6)n.innerHTML='\u5bc6\u7801\u5f3a\u5ea6\uff1a\u5f31<span class="pswd_state pswd_state_def"><span class="level level_0"></span><span class="level level_0_1"></span><span class="level level_0_2"></span></span><span class="pswd_result">\u5f3a</span>';else{if(9>=s.value.length&&s.value.length>=6&&1==a)return n.innerHTML="\u5bc6\u7801\u5f3a\u5ea6\uff1a<span class='pswd_state'><span class='level level_1'></span></span><span class='pswd_result'>\u5f31</span>",!1;if(9>=s.value.length&&s.value.length>=6&&2==a||16>=s.value.length&&s.value.length>=10&&1==a)return n.innerHTML="\u5bc6\u7801\u5f3a\u5ea6\uff1a<span class='pswd_state'><span class='level level_1'></span><span class='level level_2'></span></span><span class='pswd_result'>\u4e2d</span>",!1;if(9>=s.value.length&&s.value.length>=6&&3==a||16>=s.value.length&&s.value.length>=10&&2==a)return void(n.innerHTML="\u5bc6\u7801\u5f3a\u5ea6\uff1a<span class='pswd_state'><span class='level level_1'></span><span class='level level_2'></span><span class='level level_3'></span></span><span class='pswd_result'>\u5f3a</span>");if(s.value.length>16)return t.update("<span class='ico__error'></span>\u5bc6\u7801\u4e0d\u80fd\u8d85\u8fc716\u4f4d").show(),s.addClassName("form_input_error"),!1}return!0},chars:function(e){for(var s=0,t=0,a=0,n=0;n<e.length;n++)e.charAt(n).charCodeAt(0)>=48&&e.charAt(n).charCodeAt(0)<=57?s=1:e.charAt(n).charCodeAt(0)>=65&&e.charAt(n).charCodeAt(0)<=90||e.charAt(n).charCodeAt(0)>=97&&e.charAt(n).charCodeAt(0)<=122?t=1:a=1;return s+t+a},chk_zh:function(e){for(var s=0;s<e.length;s++){var t=e.charAt(s).charCodeAt(0);if(t<33||t>126)return-1}return 1},chk_password:function(){var e=this,s=e.pwd,t=e.re_pwd;s.removeClassName("form_input_error");var a=s.next("div.msg");a.update("").hide();var n="";if(""==s.value)n="\u8bf7\u8f93\u5165\u5bc6\u7801";else if(s.value.length>16)n="\u5bc6\u7801\u4e0d\u80fd\u8d85\u8fc716\u4f4d ";else if(s.value.length<6)n="\u5bc6\u7801\u81f3\u5c11\u8981\u67096\u4f4d";else if(""!=t.value&&""!=s.value&&t.value!=s.value)n="\u4e24\u904d\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4";else if(e.chk_zh(s.value)==-1)n="\u5305\u542b\u975e\u6cd5\u5b57\u7b26";else if(s.value.length>5&&s.value.length<17&&t.value==s.value)return e.pwd_ok(s,t),!0;return""==n||(s.addClassName("form_input_error"),a.update("<span class='ico__error'></span>"+n).show(),!1)},chk_re_password:function(){var e=this,s=e.pwd,t=e.re_pwd;t.removeClassName("form_input_error");var a=t.next("div.msg");a.update("").hide();var n="";return""==t.value?n="\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801":t.value!=s.value?n="\u5bc6\u7801\u8f93\u5165\u4e0e\u4e0a\u9762\u4e0d\u7b26":e.pwd_ok(s,t),""==n||(t.addClassName("form_input_error"),a.update("<span class='ico__error'></span>"+n).show(),!1)},pwd_ok:function(e,s){var t=this;t.count_psd()},op_re_password:function(){var e=this,s=e.re_pwd;s.next("div.msg").update("").hide()}};setting.init();