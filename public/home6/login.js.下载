!function(){var e=Array.prototype,i=Object.prototype;e.indexOf||(e.indexOf=function(e,i){var o=this.length;for(i=parseInt(i)||0,i<0&&(i+=o);i<o;i++)if(i in this&&this[i]===e)return i;return-1}),e.forEach||(e.forEach=function(e,i){for(var o=0,t=this.length;o<t;o++)o in this&&e.call(i,this[o],o,this)}),Object.keys||(Object.keys=function(e){var o,t=[];for(o in e)i.hasOwnProperty.call(e,o)&&t.push(o);return t})}(),function(e,i,o){function t(){Ke&&(i.querySelector("button").focus(),i.body.scrollTop=0)}function r(o){var t={mode:"popup",size:"normal",template:"tempA",needHideTitle:"",themes:["fe526e","ffbec9"],bgThemes:"#fff",fontColor:"#333",linkColor:"#333",callbackURL:"",frameID:"",from:"",clientId:"",loginModel:["mobile","normal"],loginTitleWord:"登录",loginURL:"",loginSuccessURL:"",registerSuccessURL:"",needHideRegister:"",passportInputWord:"手机/邮箱/优酷土豆账号",loginSubmitWord:"",loginSubmitStyle:"",changePsdName:"忘记密码？",changePsdLink:"http://id.youku.com/resetPwdView.htm",isQRlogin:!0,qrMsg:"请使用优酷APP扫码登录",isThirdPartLogin:!0,tlsiteAry:"",qrBu:["ykt",80,"false"],registerTitleWord:"注册",registerSubmitWord:"",registerSubmitStyle:"",regModel:["email","mobile"],regShowType:"in",regRules:["用户协议","http://mapp.youku.com/service/agreement","版权声明","http://mapp.youku.com/service/copyright"],checkNoLogin:function(){},loginSuccess:function(){},closeCallback:function(){},rememberMe:!0,accountDomain:"",cookieHosts:"",errorURL:"",needShowJAQ:"",placeholders:{login:{account:"手机/邮箱/优酷土豆账号",password:"登录密码"},reg:{emailReg:{account:"邮箱地址",password:"密码(6-16位字母、数字和符号)",repeatPassword:"确认密码",mobile:"手机号码（可用于找回密码）"},mobileReg:{account:"手机号码",password:"密码(6-16位字母、数字和符号)",repeatPassword:"确认密码",validate:"验证码"}}},errorTips:{account:{required:"请输入账号",valid_mobile:"请输入正确的手机号码",reg_email:"请输入邮箱地址",valid_email:"请输入正确的邮箱地址",notExist:"用户不存在",exist:'账号已存在，请直接<a href="javascript:;" class="YT-existToLogin" id="YT-existToLogin">登录</a>',check_passport:"请输入正确的绑定账号",not_exist_mobile:'该手机号未注册，可使用<a href="javascript:;" class="YT-existToLogin" id="YT-toMLogin">手机快捷登录</a>'},password:{required:"请输入密码",min_length:"密码位数必须在6-16位之间",max_Length:"密码位数必须在6-16位之间",valid_psdStrong:"密码必须由字母、数字和符号组成",valid_psd_n_s_spe:"密码不能为纯数字、纯字母或纯字符",cant_matches:"密码不能和登录名相同",is_psd_sick:"该密码安全性较低，请设置更复杂密码",cant_matchesEmail:"密码不能和邮箱前缀相同"},mobile:{required:"请输入手机号码",valid_mobile:"请输入正确的手机号码"},repeatPassword:{required:"请再次输入密码",matches:"两次密码输入不一致"},validate:{required:"请输入验证码"},smsCode:{noGet:"请先获取手机验证码",smsPsd:"请输入动态密码"},captcha:{required:"请输入图片验证码",error:"图片验证码不正确"},sliderCaptcha:{required:"请拖动滑块，完成验证",error:"滑块验证不正确"},errorCode:{defaults:"网络异常，请稍后再试",MOBILE_CODE_ERROR:"手机验证码不正确，请重新输入",system_error:"网络异常，请稍后再试",NEED_CAPTCHA:"需要验证码",CAPTCHA_ERROR:"图片验证码不正确",CAPTCHA_TIMEOUT:"图片验证码超时，请重新输入",timeout:"登录超时，请刷新后重试2",loginTimeout:"登录超时，请刷新后重试",regTimeout:"注册超时，请刷新后重试"}}},r=t.themes;He=m(!0,t,o),He.regModel=["mobile"],Qe||(He.accountDomain?ce=He.accountDomain.indexOf("http")>-1?He.accountDomain:ze.preDomain+He.accountDomain:i.getElementsByTagName("meta").accountDomain&&(ce=i.getElementsByTagName("meta").accountDomain.getAttribute("content"))),Ze=He.errorTips,He.qrBu=He.qrBu instanceof Array?He.qrBu:["ykt",80,"false"],$e=He.loginSuccess,He.loginModel&&He.loginModel instanceof Array||(He.loginModel=["normal","mobile"]),He.regModel&&He.regModel instanceof Array||(He.regModel=["mobile"]),Ke="tempMobile"==He.template||"tempTlsiteMobile"==He.template,Ce="normal"==He.loginModel[0]?"normal":"mobile",ye="mobile",we=He.themes,ge=He.mode,me=He.frameID;var n=new RegExp("^[0-9a-fA-F]{6}$");we[0]?n.test(we[0])&&n.test(we[1])||(we=r):we=r,Te=V(),de="",w(pe,Te)?(de=ue+Te,this.init()):He.callbackURL&&(e.location.href=He.callbackURL)}function n(i){if(Qe){var o=V().split(".")[0],t="";switch(i){case"tryVoiceBtn":t="click_type=voiceCode&source="+o;break;case"tryVoiceBtnH5":t="click_type=voiceCodeh5&source="+o;break;case"trySmsBtn":t="click_type=mobileCode&source="+o;break;case"getVoiceBtn":t="click_type=getvoiceCode&source="+o;break;case"getSmsBtn":t="click_type=getmobileCode&source="+o;break;case"sureVoiceBtn":t="click_type=getvoiceCodeh5&source="+o;break;case"question":t="click_type=doubt&source="+o;break;case"submit":t="click_type=submit&source="+o;break;case"success":t="verify=true&source="+o;break;case"isGetVoive":t="voice=true&source="+o}e.goldlog&&e.goldlog.record&&e.goldlog.record("/yt/YTvoice.anquan.clcik","CLK",t,"H1480571959")}}function s(i){var o=r.prototype;Ee=!0,P(I("YT-mloginSubmit"),"disabled"),P(I("YT-nloginSubmit"),"disabled");var t=I("YT-mloginSubmit")&&I("YT-mloginSubmit").getAttribute("title")?I("YT-mloginSubmit").getAttribute("title"):"登录",n=I("YT-nloginSubmit")&&I("YT-nloginSubmit").getAttribute("title")?I("YT-nloginSubmit").getAttribute("title"):"登录";switch(q(I("YT-mloginSubmit"),t),q(I("YT-nloginSubmit"),n),He.userInfoToken=i.userInfoToken,i.riskErrorCode){case"RISK_USER_WARN_FOR_BIND_MOBILE":case"RISK_USER_WARN_RESET_PWD":if(Ke){var s="http://www.youku.com";s="RISK_USER_WARN_FOR_BIND_MOBILE"==i.riskErrorCode?"/passport/bindMobileView.htm?formtoken="+i.formtoken+"&userInfoToken="+He.userInfoToken+"&passport="+i.passport:i.jumpUrl?i.jumpUrl:i.callback,I("YT-l_callback")?I("YT-l_callback").value=s:i.callback=s,o.mainLoginSuccess(i,i.buid,i.pid,i.template)}else xe=!0,We=!0,o.buildRiskDom(i),o.mainLoginSuccess(i,i.buid,i.pid,i.template);break;case"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE":case"RISK_USER_INTERCEPTOR_FOR_BIND_MOBILE":case"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE_WARN_RESET_PWD":Ke?e.location.href="/passport/bindMobileView.htm?formtoken="+i.formtoken+"&userInfoToken="+He.userInfoToken+"&passport="+i.passport:o.buildRiskDom(i);break;case"RISK_USER_INTERCEPTOR_FOR_RESET_PWD":e.location.href=i.jumpUrl;break;default:o.showErrTips(i.errorMsg)}}function a(o){Ie={},_e=!1,ke=!0;var t=o.tuid,s=o.buid,a=o.pid,l=(o.tlsite,o.formtoken),c=o.callback,u="",p=o.html,m=i.createElement("div");he="login",Ce="normal",Se=!0,m.id="YT-thirdLoginBox",U(m,"YT-third-loginbox");o.hiddenNickName;o.callback&&""!=o.callback&&(u='<input type="hidden" hidden name="YT-l_callback" id="YT-l_callback" value="'+o.callback+'">'),p='<div class="YT-thirdbox-wrap"><div class="YT-thirdbox-head">'+u+'<input type="hidden" id="YT-bindMobile-formtoken" value="'+l+'" /><input type="hidden" id="YT-bindMobile-countryRegin" data-deRegion="CN" data-deCode="86" data-deName="中国大陆" name="YT-bindMobile-countryRegin" hidden value="CN" /><div id="YT-thirdboxClose" class="YT-thirdbox-close" title="关闭"></div><div class="YT-third-header"></div><span class="YT-third-userinfo">绑定手机</span></div>'+p+"</div>",q(m,p);var Y=r.prototype;Y.showPopWindow(m),setTimeout(function(){h("YT-thirdLoginBox")},100);var f=!0;d("YT-bindMobile-mAccount","YT-bindMobile-countryRegin","YT-bindMobile-getMobileCode","YT-bindMobile-errorTips",function(){b(I("YT-bindMobile-mAccount"),"blur",function(){if("mobile"==g(L(I("YT-bindMobile-mAccount")),L(I("YT-bindMobile-countryRegin")))&&ve){if(!f)return!1;f=!1,Y.clearThisTips("YT-bindMobile-mAccount","YT-bindMobile-errorTips"),S({url:ce+"/passport/checkBindMobile.htm",data:{mobile:L(I("YT-bindMobile-mAccount")),bizType:"bind_mobile",buid:s,pid:a,formtoken:l,template:"tempA",region:L(I("YT-bindMobile-countryRegin"))},dataType:"jsonp",success:function(e){f=!0,"success"==e.result?(P(I("YT-bindMobile-getMobileCode"),"disabled"),Y.clearThisTips("","YT-bindMobile-errorTips")):(B(I("YT-bindMobile-getMobileCode"),"disabled"),Y.showErrTips(e.errorMsg,"","YT-bindMobile-errorTips"))}})}else ve&&Y.showErrTips(Ze.account.valid_mobile,"YT-bindMobile-mAccount","YT-bindMobile-errorTips")})}),T(I("YT-bindMobile-openListBtn"),I("YT-bindMobile-countryWrap"),I("YT-bindMobile-countryList"),I("YT-bindMobile-countryCode"),I("YT-bindMobile-getMobileCode"),I("YT-bindMobile-mAccount"),"YT-bindMobile-countryRegin"),b(I("YT-thirdboxClose"),"click",function(){if(Se=!1,r.prototype.clearPopWindow(),ge&&"embedded"==ge){var e=i.createElement("div");e.id="YT-errorTips",e.style.display="none";I("YT-loginFrameTitle").parentNode.appendChild(e)}});var v=!1;b(I("YT-popLink"),"click",function(){v?(v=!1,j("YT-msg-tips")):(v=!0,O("YT-msg-tips"))}),b(I("YT-use-other"),"click",function(){j("YT-bindMobile-hasAccount"),O("YT-bindMobile-noAccount")}),b(I("YT-bindMobile-getMobileCode"),"click",function(){if(N(I("YT-bindMobile-getMobileCode"),"disabled"))return!1;var e=[{name:"YT-bindMobile-mAccount",rules:"required|valid_mobile",errorMsg:Ze.mobile}],i=new ai("YT-bindMobile-mAccount",e,function(e,i){I("YT-bindMobile-errorTips");if(e.length>0)Y.showErrTips(e[0].message,"","YT-bindMobile-errorTips");else{Y.clearThisTips();var o=L(I("YT-bindMobile-mAccount"));Y.getMobileCode("YT-bindMobile-getMobileCode",o,"bind_mobile","YT-bindMobile-formtoken","YT-bindMobile-countryRegin","YT-bindMobile-errorTips",s,a,"tempA")}});setTimeout(function(){i._validateForm()},200)});var y=!0;b(I("YT-bindMobile-hasMobileSubmit"),"click",function(){y&&(Y.clearThisTips("","YT-hasMobile-errorTips"),y=!1,B(I("YT-bindMobile-hasMobileSubmit"),"disabled"),S({url:ce+"/thirdparty/bindMobileConfirm.json",data:{bizType:"bind_mobile",buid:s,pid:a,tuid:t,formtoken:l,callback:c,template:"tempA",bindNewMobile:!1,sendCodeType:De},dataType:"jsonp",success:function(i){"success"==i.result?S({url:ce+"/login/checkLogin.json",data:{buid:s,pid:a},dataType:"jsonp",success:function(i){"success"==i.result?i.msg.login&&r.prototype.mainLoginSuccess(i,s,a,"tempA"):e.parent.close()}}):(y=!0,P(I("YT-bindMobile-hasMobileSubmit"),"disabled"),Y.showErrTips(i.errorMsg,"","YT-hasMobile-errorTips"))}}))}),b(I("YT-bindMobile-noMobileSubmit"),"click",function(){if(y){if(""==I("YT-bindMobile-mAccount").value)return Y.showErrTips("请输入手机号码","","YT-bindMobile-errorTips"),!1;if("mobile"!=g(L(I("YT-bindMobile-mAccount")),L(I("YT-bindMobile-countryRegin"))))return Y.showErrTips("请输入正确的手机号码","","YT-bindMobile-errorTips"),!1;if(""==I("YT-bindMobile-getMobile").value)return Y.showErrTips("请输入验证码","","YT-bindMobile-errorTips"),!1;y=!1,B(I("YT-bindMobile-hasMobileSubmit"),"disabled"),n("submit"),"voiceCode"==De&&n("isGetVoive"),S({url:ce+"/thirdparty/bindMobileConfirm.json",data:{mobile:L(I("YT-bindMobile-mAccount")),bizType:"bind_mobile",buid:s,pid:a,tuid:t,formtoken:l,callback:c,template:"tempA",region:L(I("YT-bindMobile-countryRegin")),mobileCode:L(I("YT-bindMobile-getMobile")),bindNewMobile:!0,sendCodeType:De},dataType:"jsonp",success:function(i){"success"==i.result?(n("success"),S({url:ce+"/login/checkLogin.json",data:{buid:s,pid:a},dataType:"jsonp",success:function(i){"success"==i.result?i.msg.login&&r.prototype.mainLoginSuccess(i,s,a,"tempA"):e.parent.close()}})):(y=!0,P(I("YT-bindMobile-noMobileSubmit"),"disabled"),Y.showErrTips(i.errorMsg,"","YT-bindMobile-errorTips"))}})}})}function l(o){if(I("YT-thirdList")){var t,r=I("YT-thirdList").getElementsByTagName("span");t=r.length>5?r.length-2:r.length;for(var n=0,s=t;n<s;n++)!function(o){var t=r[o],n=t.getAttribute("data-link"),s=t.getAttribute("data-site"),a=I("ikuBox")?I("ikuBox").getAttribute("data-from"):"",l=n+"&domain="+V()+"&protocol="+e.location.protocol;b(t,"click",function(){if(i.domain=V(),!I("ikuBox")||"Iku"!=a&&"itudou"!=a)Ke||I("ikuBox")?e.location.href=l:newWin=e.open(l,"thirdPartLoginWindow","height=600,width=1000,top=0,left=0,toolbar=no,menubar=no,scrollbars=auto,resizable=yes,location=no,status=no");else{var o='{"data":{"url":"'+l+'","site":"'+s+'"}}';e.external.execute("iku","iku://|login|2|3|"+o)}})}(n);b(I("YT-showAllThirdPart"),"click",function(){var e=I("YT-thirdList").getElementsByTagName("span");if(e.length>4)for(var i=0,o=e.length;i<o;i++)P(e[i],"hide");j("YT-showAllThirdPart"),W("YT-hideThirdPart","display","inline-block")}),b(I("YT-hideThirdPart"),"click",function(){for(var e=I("YT-thirdList").getElementsByTagName("span"),i=4,o=e.length-2;i<o;i++)B(e[i],"hide");W("YT-showAllThirdPart","display","inline-block"),j("YT-hideThirdPart")})}}function c(i){var o=!1,t=m(!0,{},i);this.getQRCode=function(){S({url:t.mainSiteUrl+"/qrcode/show.json",data:{callback:t.callback,buid:t.buid,pid:t.pid,template:t.template,size:200,logo:t.qrBu[0]?t.qrBu[0]:"ykt",logosize:t.qrBu[1]?t.qrBu[1]:80,logoOnTop:t.qrBu[2]?t.qrBu[2]:"false"},dataType:"jsonp",success:function(i){if("success"==i.result){if(i.msg.qrImgUrl){I("YT-qrImg").src=i.msg.qrImgUrl,O("YT-qrImg");var o=i.msg.code;be&&(clearInterval(be),be=null),be=setInterval(function(){if(!I("ikuBox")&&I("YT-qrLogin")&&"none"==I("YT-qrLogin").style.display)return clearInterval(be),!1;S({url:t.mainSiteUrl+"/qrcode/loginByCode.json",data:{buid:t.buid,pid:t.pid,template:t.template,code:o},dataType:"jsonp",success:function(i){var o=r.prototype;if("success"==i.result)clearInterval(be),be=null,i.msg.riskErrorCode?(He.userInfoToken=i.msg.userInfoToken,o.buildRiskDom(i)):(j("YT-qrLogining"),O("YT-qrLoginOK"),o.mainLoginSuccess(i,He.buid,He.pid,He.template));else if(i.riskErrorCode)switch(clearInterval(be),i.riskErrorCode){case"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE":case"RISK_USER_INTERCEPTOR_FOR_BIND_MOBILE":case"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE_WARN_RESET_PWD":He.userInfoToken=i.userInfoToken,o.buildRiskDom();break;case"RISK_USER_INTERCEPTOR_FOR_RESET_PWD":e.location.href=i.jumpUrl;break;default:o.showErrTips(i.errorMsg)}else"QR_CODE_ERROR"!=i.errorCode&&"QR_CODE_NOT_EXIST"!=i.errorCode||(O("YT-invalidTips"),clearInterval(be),be=null)}})},3e3)}}else O("YT-invalidTips")}})};var n=this;b(I("YT-qrbtn"),"click",function(){u(),o?("mobile"==Ce&&(O("YT-mobileLogin"),P(I("YT-showNormalLogin"),"active"),r.prototype.changeTitle("手机快捷登录")),"normal"==Ce&&(O("YT-normalLogin"),P(I("YT-showMobileLogin"),"active"),r.prototype.changeTitle("账号登录")),validateResult={},Ee=!0,be&&(clearInterval(be),be=null),o=!1,j("YT-qrLogin"),O("YT-thirdParyBody"),P(I("YT-qrbtn"),"topc"),I("YT-qrbtn").title="扫码登录",j("YT-errorTips"),I("YT-errorTips").innerHTML="",j("YT-invalidTips")):(j("YT-mobileLogin"),j("YT-normalLogin"),B(I("YT-showMobileLogin"),"active"),B(I("YT-showNormalLogin"),"active"),r.prototype.changeTitle("扫码登录"),O("YT-qrLogin"),j("YT-thirdParyBody"),B(I("YT-qrbtn"),"topc"),I("YT-qrbtn").title="普通登录",r.prototype.cleanErrTips("YT-normalLogin"),r.prototype.cleanErrTips("YT-mobileLogin"),o=!0,n.getQRCode(),r.prototype.delCaptcha(),j("YT-errorTips"),b(I("YT-reGetQRCode"),"click",function(){j("YT-invalidTips"),n.getQRCode()}))});var s=H("YT-qr-imgtips")[0];b(I("YT-showHelp"),"mouseenter",function(){B(s,"show")}),b(I("YT-showHelp"),"mouseleave",function(){P(s,"show")})}function d(e,i,o,t,n){function s(){"mobile"==g(L(I(e)),L(I(i)))&&ve?(r.prototype.clearThisTips(e,t),P(I(o),"disabled")):B(I(o),"disabled"),n&&"function"==typeof n&&n()}b(I(e),"keyup",function(){s()}),b(I(e),"change",function(){s()})}function T(e,o,t,r,n,s,a){function l(){P(e,"active"),P(o,"active"),I("YT-mobileBack")&&P(I("YT-mobileBack"),"active"),Y(i,"click",l)}if(I("YT-mobileBack")&&I("YT-mobileBack")&&I("YT-countryWrap")&&(i.getElementsByTagName("body")[0].appendChild(I("YT-mobileBack")),i.getElementsByTagName("body")[0].appendChild(I("YT-countryWrap"))),b(e,"mouseleave",function(){b(i,"click",l)}),b(e,"mouseenter",function(){Y(i,"click",l)}),b(e,"click",function(){N(o,"active")?l():(B(e,"active"),B(o,"active"),I("YT-mobileBack")&&B(I("YT-mobileBack"),"active"))}),b(I("YT-mobileBack"),"click",function(){l()}),b(I("YT-country-cancel"),"click",function(){l()}),t)for(var a=a||"YT-countryRegin",c=t.getElementsByTagName("li"),d=0,T=c.length;d<T;d++)!function(e){b(c[e],"click",function(){N(c[e],"line")||L(I(a))!=D(c[e],"country")&&(I("YT-countryName")&&q(I("YT-countryName"),D(c[e],"countryName")),q(r,"+"+D(c[e],"countryCode")),A(I(a),D(c[e],"country")),A(n,""),l())})}(d)}function u(){qe=!0,Ue=!0,setTimeout(function(){qe=!1,Ue=!1},ze.blurLockTime)}function p(e){return e.replace(/<script.*?>.*?<\/script>/gi,"")}function m(e,i,o){for(var t in o){var r=o[t];e&&r instanceof Array?i[t]=m(e,[],r):e&&r instanceof Object&&"function"!=typeof r?i[t]=m(e,{},r):e&&"string"==typeof r&&""!=r?i[t]=p(r):e&&"boolean"==typeof r?i[t]=r:e&&""!=r&&(i[t]=r)}return i}function g(e,i){if(e){if(ze.emailReg.test(e))return"email";var o=i||"CN";return new RegExp(ze.allMobileRegExp[o]).test(e)?"mobile":"string"}}function b(e,i,o){e&&(e.addEventListener?e.addEventListener(i,o,!1):e.attachEvent&&e.attachEvent("on"+i,o))}function Y(e,i,o){e&&(e.removeEventListener?e.removeEventListener(i,o,!1):e.detachEvent&&e.detachEvent("on"+i,o))}function f(i){var o=e.event||i,t=o.target||o.srcElement;return 3==t.nodeType&&(t=t.parentNode),t}function h(i){if(I(i)){for(var o=I(i).getElementsByTagName("input"),t=(I("YT-ytaccount")||I("YT-passport"),0);t<o.length;t++)N(o[t],"YT-form-input")&&(b(o[t],"focus",function(e){v(f(e))}),b(o[t],"blur",function(e){var i=f(e);y(i,L(i))}),""!=L(o[t])&&B(o[t].parentNode.getElementsByTagName("label")[0],"hideholder"));setTimeout(function(){for(var e=0;e<o.length;e++)N(o[e],"YT-form-input")&&""!=L(o[e])&&B(o[e].parentNode.getElementsByTagName("label")[0],"hideholder")},150);for(var r=[I("YT-ytpassword"),I("YT-regPassword"),I("YT-mPassword")],t=0;t<r.length;t++){var n=r[t],s=!1;if(n){b(n,e.attachEvent?"propertychange":"input",function(e){var i=f(e);s||""==L(i)||(s=!0,v(i),s=!1)})}}}}function v(e){if(e){B(e.parentNode.getElementsByTagName("label")[0],"hideholder")}}function y(e,i){var o=e.parentNode.getElementsByTagName("label")[0];""==i&&P(o,"hideholder")}function C(e,i){e.split("");return"rgba("+(16*k(e[0])+k(e[1]))+","+(16*k(e[2])+k(e[3]))+","+(16*k(e[4])+k(e[5]))+","+i+")"}function k(e){return"a"==e||"A"==e?10:"b"==e||"B"==e?11:"c"==e||"C"==e?12:"d"==e||"D"==e?13:"e"==e||"E"==e?14:"f"==e||"F"==e?15:parseInt(e)}function M(e){if(e)return e.replace(/(^\s*)|(\s*$)/g,"")}function _(e){for(var i in e)if(e.hasOwnProperty(i))return!1;return!0}function E(e,o,t){new Date;i.cookie=e+"="+escape(o)+";domain="+t+";path=/;"}function R(e){var i=[];for(var o in e)i.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return i.join("&")}function S(o){var o=o||{};if(o.callback="jsonpCallback",!o.url&&"login"!=o.data.bizType&&"register"!=o.data.bizType&&"bind_mobile"!=o.data.bizType)throw new Error("参数不完整");o.time=ze.jsonpTimeout;var t="jsonp_"+(new Date).getTime()+Math.floor(9999*Math.random()+1).toString(),r=i.getElementsByTagName("head")[0];o.data[o.callback]=t;var n=R(o.data),s=i.createElement("script");r.appendChild(s),e[t]=function(i){if(r.removeChild(s),clearTimeout(s.timer),o.blur&&qe)return void(e[t]=null);o.success&&o.success(i),e[t]=null},o.url&&(s.src=o.url+"?"+n),o.time&&(s.timer=setTimeout(function(){e[t]=null,r.removeChild(s),o.fail&&o.fail({message:"超时"})},o.time))}function w(e,i){for(var o in e)if(e[o]==i)return!0;return!1}function I(e){return!!e&&i.getElementById(e)}function L(e){return!!e&&e.value}function A(e,i){e&&(e.value=i)}function V(i,o){i&&(i=/^(?:(?:https?:)?\/\/)?([\w-.]+)/i.exec(i)),i=i&&i[1]||e.location.hostname;var t=i.split(".");return o=Math.min(t.length,Math.abs(parseInt(o))||2),t.slice(-o).join(".")}function N(e,i){return!!e.className&&e.className.indexOf(i)>-1}function P(e,i){if(!e||!e.className)return!1;var o=new RegExp("(\\s|^)"+i+"(\\s|$)");e.className=e.className.replace(o,"")}function B(e,i){if(!e)return!1;N(e,i)||(e.className+=" "+i)}function x(e,i){if(I(e)){if(I(e).currentStyle)return I(e).currentStyle[i];return I(e).ownerDocument.defaultView.getComputedStyle(I(e),null)[i]}}function W(e,i,o){I(e)&&(I(e).style[i]=o)}function O(e){W(e,"display","block")}function j(e){W(e,"display","none")}function F(e,i,o){e&&e.setAttribute(i,o)}function D(e,i){if(e)return e.getAttribute(i)}function q(e,i){e&&(e.innerHTML=i)}function U(e,i){e&&(e.className=i)}function H(e){var o=[];_el=i.getElementsByTagName("*");for(var t=0,r=_el.length;t<r;t++)try{for(var n=_el[t].className.split(" "),s=0,a=n.length;s<a;s++)n[s]==e&&o.push(_el[t])}catch(l){}return o}function z(e,o){for(var t=/^https?:/g,r=i.getElementsByTagName("script"),n=0,s=r.length;n<s;n++){var a=r[n].src.replace(t,"");if(a&&0===a.indexOf(e))return}K(e,o)}function K(o,t,r){"function"==typeof t&&(r=t,t={}),t||(t={});var n=i.createElement("script");n.type="text/javascript";for(var s in t)n.setAttribute(s,t[s]);n.src=o,i.getElementsByTagName("head")[0].appendChild(n),r&&"function"==typeof r&&(e.attachEvent?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,r())}:n.onload=function(){n.onload=null,r()})}function G(e){return Z(Q(X(e)))}function Q(e){return ee(ie(J(e),8*e.length))}function Z(e){for(var i,o=ii?"0123456789ABCDEF":"0123456789abcdef",t="",r=0;r<e.length;r++)i=e.charCodeAt(r),t+=o.charAt(i>>>4&15)+o.charAt(15&i);return t}function X(e){for(var i,o,t="",r=-1;++r<e.length;)i=e.charCodeAt(r),o=r+1<e.length?e.charCodeAt(r+1):0,55296<=i&&i<=56319&&56320<=o&&o<=57343&&(i=65536+((1023&i)<<10)+(1023&o),r++),i<=127?t+=String.fromCharCode(i):i<=2047?t+=String.fromCharCode(192|i>>>6&31,128|63&i):i<=65535?t+=String.fromCharCode(224|i>>>12&15,128|i>>>6&63,128|63&i):i<=2097151&&(t+=String.fromCharCode(240|i>>>18&7,128|i>>>12&63,128|i>>>6&63,128|63&i));return t}function J(e){for(var i=Array(e.length>>2),o=0;o<i.length;o++)i[o]=0;for(var o=0;o<8*e.length;o+=8)i[o>>5]|=(255&e.charCodeAt(o/8))<<o%32;return i}function ee(e){for(var i="",o=0;o<32*e.length;o+=8)i+=String.fromCharCode(e[o>>5]>>>o%32&255);return i}function ie(e,i){e[i>>5]|=128<<i%32,e[14+(i+64>>>9<<4)]=i;for(var o=1732584193,t=-271733879,r=-1732584194,n=271733878,s=0;s<e.length;s+=16){var a=o,l=t,c=r,d=n;o=te(o,t,r,n,e[s+0],7,-680876936),n=te(n,o,t,r,e[s+1],12,-389564586),r=te(r,n,o,t,e[s+2],17,606105819),t=te(t,r,n,o,e[s+3],22,-1044525330),o=te(o,t,r,n,e[s+4],7,-176418897),n=te(n,o,t,r,e[s+5],12,1200080426),r=te(r,n,o,t,e[s+6],17,-1473231341),t=te(t,r,n,o,e[s+7],22,-45705983),o=te(o,t,r,n,e[s+8],7,1770035416),n=te(n,o,t,r,e[s+9],12,-1958414417),r=te(r,n,o,t,e[s+10],17,-42063),t=te(t,r,n,o,e[s+11],22,-1990404162),o=te(o,t,r,n,e[s+12],7,1804603682),n=te(n,o,t,r,e[s+13],12,-40341101),r=te(r,n,o,t,e[s+14],17,-1502002290),t=te(t,r,n,o,e[s+15],22,1236535329),o=re(o,t,r,n,e[s+1],5,-165796510),n=re(n,o,t,r,e[s+6],9,-1069501632),r=re(r,n,o,t,e[s+11],14,643717713),t=re(t,r,n,o,e[s+0],20,-373897302),o=re(o,t,r,n,e[s+5],5,-701558691),n=re(n,o,t,r,e[s+10],9,38016083),r=re(r,n,o,t,e[s+15],14,-660478335),t=re(t,r,n,o,e[s+4],20,-405537848),o=re(o,t,r,n,e[s+9],5,568446438),n=re(n,o,t,r,e[s+14],9,-1019803690),r=re(r,n,o,t,e[s+3],14,-187363961),t=re(t,r,n,o,e[s+8],20,1163531501),o=re(o,t,r,n,e[s+13],5,-1444681467),n=re(n,o,t,r,e[s+2],9,-51403784),r=re(r,n,o,t,e[s+7],14,1735328473),t=re(t,r,n,o,e[s+12],20,-1926607734),o=ne(o,t,r,n,e[s+5],4,-378558),n=ne(n,o,t,r,e[s+8],11,-2022574463),r=ne(r,n,o,t,e[s+11],16,1839030562),t=ne(t,r,n,o,e[s+14],23,-35309556),o=ne(o,t,r,n,e[s+1],4,-1530992060),n=ne(n,o,t,r,e[s+4],11,1272893353),r=ne(r,n,o,t,e[s+7],16,-155497632),t=ne(t,r,n,o,e[s+10],23,-1094730640),o=ne(o,t,r,n,e[s+13],4,681279174),n=ne(n,o,t,r,e[s+0],11,-358537222),r=ne(r,n,o,t,e[s+3],16,-722521979),t=ne(t,r,n,o,e[s+6],23,76029189),o=ne(o,t,r,n,e[s+9],4,-640364487),n=ne(n,o,t,r,e[s+12],11,-421815835),r=ne(r,n,o,t,e[s+15],16,530742520),t=ne(t,r,n,o,e[s+2],23,-995338651),o=se(o,t,r,n,e[s+0],6,-198630844),n=se(n,o,t,r,e[s+7],10,1126891415),r=se(r,n,o,t,e[s+14],15,-1416354905),t=se(t,r,n,o,e[s+5],21,-57434055),o=se(o,t,r,n,e[s+12],6,1700485571),n=se(n,o,t,r,e[s+3],10,-1894986606),r=se(r,n,o,t,e[s+10],15,-1051523),t=se(t,r,n,o,e[s+1],21,-2054922799),o=se(o,t,r,n,e[s+8],6,1873313359),n=se(n,o,t,r,e[s+15],10,-30611744),r=se(r,n,o,t,e[s+6],15,-1560198380),t=se(t,r,n,o,e[s+13],21,1309151649),o=se(o,t,r,n,e[s+4],6,-145523070),n=se(n,o,t,r,e[s+11],10,-1120210379),r=se(r,n,o,t,e[s+2],15,718787259),t=se(t,r,n,o,e[s+9],21,-343485551),o=ae(o,a),t=ae(t,l),r=ae(r,c),n=ae(n,d)}return Array(o,t,r,n)}function oe(e,i,o,t,r,n){return ae(le(ae(ae(i,e),ae(t,n)),r),o)}function te(e,i,o,t,r,n,s){return oe(i&o|~i&t,e,i,r,n,s)}function re(e,i,o,t,r,n,s){return oe(i&t|o&~t,e,i,r,n,s)}function ne(e,i,o,t,r,n,s){return oe(i^o^t,e,i,r,n,s)}function se(e,i,o,t,r,n,s){return oe(o^(i|~t),e,i,r,n,s)}function ae(e,i){var o=(65535&e)+(65535&i);return(e>>16)+(i>>16)+(o>>16)<<16|65535&o}function le(e,i){return e<<i|e>>>32-i}var ce,de,Te,ue,pe,me,ge,be,Ye,fe,he="login",ve=!0,ye="email",Ce="normal",ke=!0,Me=!1,_e=!1,Ee=!0,Re=!0,Se=!1,we=["fb5570","ffbec9"],Ie={},Le=!1,Ae="",Ve=!0,Ne={},Pe=null,Be=null,xe=!1,We=!1,Oe=0,je="",Fe=!0,De="",qe=!1,Ue=!1,He={},ze=e.YTL_CONFIG={preDomain:"https://",homePage:"http://www.youku.com",jsonpTimeout:5e3,emailReg:/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]{1,4}$/,numberReg:/^\d+$/,codeReg:/^[A-Za-z]+$/,specialReg:/^\W+$/,chineseCharReg:/[^\x00-\xff]/,psdtest:/^[a-zA-Z\d~!@#'"\/\+\=\-\_|\\\$%\^&\*\[\]\{\}\|;:\?.,]{6,16}$/,allMobileRegExp:{CN:"^1[3,4,5,7,8]\\d{9}$",US:"^\\d{7,11}$",CA:"^\\d{7,11}$",KR:"^\\d{7,11}$",AU:"^\\d{7,11}$",JP:"^\\d{7,11}$",SG:"^\\d{7,11}$",MY:"^\\d{7,11}$",NZ:"^\\d{7,11}$",PH:"^\\d{7,11}$",VN:"^\\d{7,11}$",AE:"^\\d{7,11}$",PK:"^\\d{7,11}$",HK:"^\\d{7,11}$",MO:"^\\d{7,11}$",TW:"^\\d{7,11}$",FR:"^\\d{7,11}$",DE:"^\\d{7,11}$",GB:"^\\d{7,11}$",IT:"^\\d{7,11}$"},blurLockTime:300},ce=ze.preDomain+"account.youku.com";i.domain=V(),ue=ze.preDomain+"account.",pe=["youku.com","laifeng.com","tudou.com","soku.com","cibntv.net","wasu.tv"];var $e,Ke,Ge=["youku.com","laifeng.com","tudou.com","soku.com"],Qe=w(Ge,V()),Ze={},Xe={NCData:{},loadedTimes:0,needSliderCaptcha:!1,sliderCaptchResult:!0,_loadNC:function(){var e=this,i=Ke?"//g.alicdn.com/sd/nch5/index.js?t=":"//g.alicdn.com/sd/ncpc/nc.js?t=",o=i+e._getSt();e.ncloaded||K(o,function(){e.ncloaded=!0})},_getSt:function(){var e=new Date;return[e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours()].join("")},_createH5Dom:function(e){var i=this,o=['<div class="wap-header">安全验证<a href="javascript:;" class="go-back" id="YT-risk-close"></a></div>','<div class="con">','\t<div class="icon-logo"></div>',"\t<p>您的账户存在异常</p>","\t<p>请拖动滑块检测您的账户是否安全</p>",'\t<div id="YT-captchaWrap" class="risk-wap">','<div id="__nc">','<div id="'+e+'" class="nc-container"></div>',"</div>","</div>","</div>"].join("");q(I("YT-riskWarp"),o),B(I("YT-riskWarp"),"YT-risk-active"),b(I("YT-risk-close"),"click",function(){i._hideH5()})},_hideH5:function(){var e=this;P(I("YT-riskWarp"),"YT-risk-active"),e.NCObj&&delete e.NCObj,q(I("YT-riskWarp"),"")},_createDom:function(e,i){var o='<div id="'+e+'" class="nc-container"></div>';Se&&(i="YT-thirdCaptchaWrap"),q(I(i),o),O(i)},isNeedSlider:function(e){var i=this;e?(i._loadNC(),i.needSliderCaptcha=!0,i.sliderCaptchResult=!1):(i.needSliderCaptcha=!1,i.sliderCaptchResult=!0)},delNCInstance:function(){var e=this;(e.NCObj||e.needSliderCaptcha)&&(e.NCObj&&delete e.NCObj,e.isNeedSlider(!1),I("YT-captchaWrap")&&q(I("YT-captchaWrap"),""),I("YT-mCaptchaWrap")&&q(I("YT-mCaptchaWrap"),""))},resetNCInstance:function(e){var i=this;i.isNeedSlider(!0),i.NCObj?i.NCObj.reset():i.getNCInstance(e)},getNCInstance:function(e){var i=this,o="login"==he?Ce:ye,t="mobile"==o?"YT-mCaptchaWrap":"YT-captchaWrap",r=o+(Se?"_1":"_0"),n="nc_"+r+"_box";if(i.isNeedSlider(!0),i.NCObj)return void i.resetNCInstance(e);Ke?i._createH5Dom(n):i._createDom(n,t),i._getInstance(n,t,e)},_getInstance:function(i,o,r){var n,s=this,a=("undefined"!=typeof umx?umx.getToken():"")||["FFFF00000000016514CE",(new Date).getTime(),Math.random()].join(":");if(Ke?(n="login"===he?"login_h5":"register_h5",t()):n="login"===he?"Login":"Register",!e.NoCaptcha&&!e.noCaptcha)return s.loadedTimes<=5?setTimeout(function(){s._getInstance(i,o,r),s.loadedTimes++},1e3):s.isNeedSlider(!1),!1;var l={renderTo:i,appkey:"FFFF00000000016514CE",token:a,scene:n,isEnabled:!0,callback:function(e){s.sliderCaptchResult=!0,s.NCData=e,s.NCData.token=a,r&&r(e);var i=I("YT-errorTips");j("YT-errorTips"),q(i,""),I("YT-riskWarp")&&s._hideH5()},error:function(){s.isNeedSlider(!1)}};Ke?(l.renderTo="#"+i,s.NCObj=new NoCaptcha(l),s.NCObj.setEnabled(!0)):(l.customWidth=o,s.NCObj=new noCaptcha(l))}};Qe&&(z("//g.alicdn.com/alilog/mlog/aplus_o.js",{id:"beacon-aplus",async:!0,exparams:"clog=o&aplus&sidx=aplusSidx&ckx=aplusCkx"}),z("//aeu.alicdn.com/ctl/ctl.js",{"data-env":"cn"}));var Je=null,ei=setInterval(function(){"undefined"==typeof e.ctl||Je||(Je=e.ctl.noConflict(),Je.ready(function(){}),Je.config()),Je&&Je.getUA()&&clearInterval(ei)},500);r.prototype={init:function(){var e=this;e.checkMainSiteLogin(),e.loadStyleSheet()},buildLoginDom:function(i){var o=this;He.from=i||He.from,he="login",_e=!1,ke=!0,Ee=!0,Ie={},qe=!0,S({url:ce+"/loginView.htm",data:{callback:He.callbackURL,buid:He.buid,pid:He.pid,template:He.template,loginModel:He.loginModel,isQRlogin:He.isQRlogin,isThirdPartLogin:He.isThirdPartLogin,size:He.size,tlsiteAry:He.tlsiteAry},dataType:"jsonp",success:function(i){setTimeout(function(){qe=!1},ze.blurLockTime),o.appendDom(i);var t={};if(t.isExist=!0,Ce=He.loginModel[0],o.changeLoginType(Ce),b(I("YT-showMobileLogin"),"click",function(){var e=L(I("YT-ytaccount")),i=L(I("YT-countryRegin"));""!=e&&"mobile"==g(e,i)&&(A(I("YT-mAccount"),e),B(I("YT-mAccount").parentNode.getElementsByTagName("label")[0],"hideholder"),P(I("YT-getMobileCode"),"disabled")),o.changeLoginType("mobile")}),b(I("YT-showNormalLogin"),"click",function(){var e=L(I("YT-mAccount")),i=L(I("YT-countryRegin"));""!=e&&"mobile"==g(e,i)&&(A(I("YT-ytaccount"),e),B(I("YT-ytaccount").parentNode.getElementsByTagName("label")[0],"hideholder")),o.changeLoginType("normal")}),""!=Ae){var r=L(I("YT-countryRegin")),n=g(Ae,r);"email"==n?(A(I("YT-ytaccount"),Ae),o.changeLoginType("normal"),Ae=""):"mobile"==n&&(A(I("YT-mAccount"),Ae),o.changeLoginType("mobile"),P(I("YT-getMobileCode"),"disabled"),Ae="")}o.setUI(),o.bindBlurEvent({inputId:"YT-ytaccount",checkExist:!0,ajaxCheck:{url:"",bizType:"login",callback:function(e){}}}),o.bindBlurEvent({inputId:"YT-ytpassword"}),d("YT-mAccount","YT-countryRegin","YT-getMobileCode"),T(I("YT-openListBtn"),I("YT-countryWrap"),I("YT-countryList"),I("YT-countryCode"),I("YT-mPassword"),I("YT-mAccount")),o.bindBlurEvent({inputId:"YT-mAccount",checkType:"mobile",typeSuccess:function(){t.isMobile=!0,o.clearThisTips("YT-mAccount"),t.isExist=!0,ve&&P(I("YT-getMobileCode"),"disabled")},typeFail:function(){t.isMobile=!1,o.showErrTips(Ze.account.valid_mobile,"YT-mAccount"),o.clearThisTips("YT-mAccount"),B(I("YT-getMobileCode"),"disabled")},checkExist:!0,ajaxCheck:{url:"",bizType:"login",callback:function(e){}}}),o.bindBlurEvent({inputId:"YT-mPassword"});var s,a=!0;if(b(I("YT-nloginSubmit"),"click",function(){if(!a)return!1;s=new ai("YT-normalLogin",[{name:"YT-ytaccount",rules:"required",errorMsg:Ze.account},{name:"YT-ytpassword",rules:"required",errorMsg:Ze.password}],function(e,i){I("YT-errorTips");if(e.length>0)o.showErrTips(e[0].message);else{if(o.clearThisTips(),!t.isExist)return void o.showErrTips(Ze.account.notExist,"YT-ytaccount");if(_e&&!ke)return void(""==L(I("YT-captcha"))?o.showErrTips(Ze.captcha.required,"YT-captcha"):o.showErrTips(Ze.captcha.error,"YT-captcha"));if("none"==x("YT-normalLogin","display"))return;if(Xe.needSliderCaptcha&&!Xe.sliderCaptchResult)return Xe.getNCInstance(function(){Ke&&o.loginSubmit()}),void o.showErrTips(Ze.sliderCaptcha.required);o.loginSubmit()}}),setTimeout(function(){_e&&s._addField({name:"YT-captcha",display:"验证码",rules:"required",errorMsg:Ze.captcha},"YT-captcha"),s._validateForm()},300)}),b(I("YT-mloginSubmit"),"click",function(){s=new ai("YT-mobileLogin",[{name:"YT-mAccount",rules:"required|valid_mobile",errorMsg:Ze.mobile},{name:"YT-mPassword",rules:"required",errorMsg:{required:Ze.smsCode.smsPsd}}],function(e,i){I("YT-errorTips");if(e.length>0)o.showErrTips(e[0].message);else{if(o.clearThisTips(),_e&&!ke)return void(""==L(I("YT-captcha"))?o.showErrTips(Ze.captcha.required):o.showErrTips(Ze.captcha.error));if(!Me)return o.showErrTips("请先获取动态密码"),!1;if("none"==x("YT-mobileLogin","display"))return;if(Xe.needSliderCaptcha&&!Xe.sliderCaptchResult)return Xe.getNCInstance(function(){Ke&&o.loginSubmit()}),
void o.showErrTips(Ze.sliderCaptcha.required);o.loginSubmit()}}),setTimeout(function(){_e&&s._addField({name:"YT-captcha",display:"验证码",rules:"required",errorMsg:Ze.captcha},"YT-captcha"),s._validateForm()},300)}),b(I("YT-getMobileCode"),"click",function(){if(N(I("YT-getMobileCode"),"disabled"))return!1;new ai("YT-mobileLogin",[{name:"YT-mAccount",rules:"required|valid_mobile",errorMsg:Ze.mobile}],function(e,i){I("YT-errorTips");if(e.length>0)o.showErrTips(e[0].message);else{o.clearThisTips();var t=L(I("YT-mAccount"));I("YT-voiceVerifyTips").setAttribute("data-name","mobileCode"),I("YT-voiceVerifyTips").setAttribute("mobileNo",t),I("YT-voiceVerifyTips").setAttribute("bizType","login");var r=N(I("YT-getMobileCode"),"smsCode")?"sms_login_bind":"login";o.getMobileCode("YT-getMobileCode",t,r)}})._validateForm()}),He.rememberMe||(I("YT-ytremember").checked=!1,I("YT-ytremember").parentNode.style.display="none"),He.isQRlogin&&!Ke&&"tempTlsite"!=He.template)var p=new c({callback:""==He.callbackURL?e.location.href:He.callbackURL,mainSiteUrl:ce,buid:He.buid,pid:He.pid,template:He.template,qrBu:He.qrBu,loginType:Ce});if(I("ikuBox")&&(p.getQRCode(),I("YT-reGetQRCode")&&b(I("YT-reGetQRCode"),"click",function(){j("YT-invalidTips"),p.getQRCode()})),He.isThirdPartLogin){new l(He.template)}if(b(I("YT-useTlsite-other"),"click",function(i){if(!a)return!1;e.location.href=D(I("YT-useTlsite-other"),"data-url")}),b(I("YT-useTlsite"),"click",function(){if(!a)return!1;var e=L(I("YT-state"));S({url:ce+"/tlsite/thirdparty_account_login.json",dataType:"jsonp",data:{state:e},blur:!0,success:function(e){"success"==e.result?o.mainLoginSuccess(e,He.buid,He.pid,He.template):e.errorMsg&&""!=e.errorMsg?o.showMobileErr(e.errorMsg):o.showMobileErr(Ze.errorCode.defaults)}})}),Ke&&(b(I("YT-isShowPsd"),"click",function(){this.checked?(I("YT-ytpassword").type="text",B(I("YT-switchCheck"),"checked")):(I("YT-ytpassword").type="password",P(I("YT-switchCheck"),"checked"))}),b(I("YT-cleanNormal"),"click",function(){u(),A(I("YT-ytaccount"),""),A(I("YT-ytpassword"),""),j("YT-cleanNormal")}),b(I("YT-cleanMobile"),"click",function(){u(),A(I("YT-mAccount"),""),A(I("YT-mPassword"),""),j("YT-cleanMobile"),o.removeVerifyChoose(),Fe=!1,Oe=0}),b(I("YT-ytaccount"),"input",function(){O("YT-cleanNormal")}),b(I("YT-mAccount"),"input",function(){O("YT-cleanMobile")})),b(I("YT-registeBtn"),"click",function(){"in"==He.regShowType?o.buildRegDom():e.location.href=ce+"/register.htm"}),I("isUserAlreadyBind")&&setTimeout(function(){o.showErrTips("该第三方已经绑定其他账号")},1500),b(I("YT-mAccount"),"keyup",function(){var e=L(I("YT-mAccount"));o.isSameNumber(e)&&""!=e||(o.removeVerifyChoose(),Fe=!1,Oe=0)}),I("YT-countryList"))for(var m=I("YT-countryList").getElementsByTagName("li"),Y=0,f=m.length;Y<f;Y++)!function(e){b(m[e],"click",function(){o.removeVerifyChoose(),Fe=!1,Oe=0})}(Y);I("YT-agreement-checked")&&b(I("YT-agreement-checked"),"click",function(){I("YT-agreement-checked").checked?(P(I("YT-nloginSubmit"),"disabled"),I("YT-mloginSubmit")&&P(I("YT-mloginSubmit"),"disabled"),I("YT-useTlsite")&&P(I("YT-useTlsite"),"disabled"),I("YT-useTlsite-other")&&P(I("YT-useTlsite-other"),"disabled"),o.clearThisTips(),a=!0):(B(I("YT-nloginSubmit"),"disabled"),I("YT-mloginSubmit")&&B(I("YT-mloginSubmit"),"disabled"),I("YT-useTlsite")&&B(I("YT-useTlsite"),"disabled"),I("YT-useTlsite-other")&&B(I("YT-useTlsite-other"),"disabled"),o.showErrTips("请勾选协议"),a=!1)})}})},buildRegDom:function(i){var o=this;He.from=i||He.from,he="reg",_e=!1,ke=!0,Re=!0,Ie={},Le=!1,Ae="",o.clearGetMobileCode(),"in"!=He.regShowType&&(e.location.href=ce+"/register.htm"),qe=!0,S({url:ce+"/registerView.htm",data:{callback:He.callbackURL,buid:He.buid,pid:He.pid,template:He.template,regModel:He.regModel,size:He.size},dataType:"jsonp",success:function(e){function i(e){if(Ie={},Re=!0,r={},r.isExist=!1,Le=!1,Me=!1,ye=e,o.delCaptcha(),Xe.delNCInstance(),u(),U(I("YT-psdStrong"),"YT-psd-strong"),U(I("YT-psdStrong2"),"YT-psd-strong"),W("YT-mobileReg","display","mobile"==e?"block":"none"),W("YT-emailReg","display","mobile"==e?"none":"block"),o.cleanErrTips("mobile"==e?"YT-emailReg":"YT-mobileReg"),o.changeTitle("mobile"==e?"手机注册":"邮箱注册"),o.clearGetMobileCode("mobile"==e?"YT-getMobileCode01":"YT-getMobileCode02"),A(I("YT-countryRegin"),D(I("YT-countryRegin"),"data-deRegion")),q(I("YT-countryCode"),"+"+D(I("YT-countryRegin"),"data-deCode")),q(I("YT-countryName"),D(I("YT-countryRegin"),"data-deName")),q(I("YT-countryCode-email"),"+"+D(I("YT-countryRegin"),"data-deCode")),P(I("mobile"==e?"YT-openListBtn-email":"YT-openListBtn"),"active"),P(I("mobile"==e?"YT-countryWrap-email":"YT-countryWrap"),"active"),"mobile"==e?(B(I("YT-showMobileReg"),"active"),P(I("YT-showEmailReg"),"active")):(B(I("YT-showEmailReg"),"active"),P(I("YT-showMobileReg"),"active")),"popup"==He.mode&&"tempA"==He.template){var i=-I("YT-loginFramePop").clientHeight/2;W("YT-loginFramePop","marginTop",(i<-300?-300:i)+"px")}}setTimeout(function(){qe=!1},ze.blurLockTime),ye=He.regModel[0],o.appendDom(e),o.setUI(),Re=!0;var t=!0,r={};r.isExist=!1,b(I("YT-gotoLogin"),"click",function(){o.buildLoginDom()}),i(ye),b(I("YT-showMobileReg"),"click",function(){i("mobile")}),b(I("YT-showEmailReg"),"click",function(){i("email")}),o.bindCheckPsdStrong("YT-regPassword","YT-psdStrong"),o.bindBlurEvent({inputId:"YT-passport",checkType:"email",typeSuccess:function(){r.isEmail=!0,o.clearThisTips("YT-passport"),Ae="",o.clearThisTips("YT-passport"),r.isExist=!1;var e=L(I("YT-countryRegin"));I("YT-regPhone")&&"mobile"==g(L(I("YT-regPhone")),e)&&ve&&P(I("YT-getMobileCode01"),"disabled")},typeFail:function(){r.isEmail=!1,o.showErrTips(Ze.account.valid_email,"YT-passport"),r.isExist=!0,B(I("YT-getMobileCode01"),"disabled"),Ae=L(I("YT-passport"))},checkExist:!0,ajaxCheck:{url:"",bizType:"register",callback:function(e){}}}),o.bindBlurEvent({inputId:"YT-regPassword",checkPsdValid:!0,matchInput:"YT-passport"}),o.bindRepeatPsdEvent("YT-regPassword","YT-repeatPsd"),o.bindBlurEvent({inputId:"YT-regPhone",checkType:"mobile",typeSuccess:function(){o.clearThisTips("YT-regPhone"),r.isMobile=!0,ve&&P(I("YT-getMobileCode01"),"disabled")},typeFail:function(){r.isMobile=!1,B(I("YT-getMobileCode01"),"disabled"),o.showErrTips(Ze.mobile.valid_mobile,"YT-regPhone")}}),o.bindBlurEvent({inputId:"YT-validateCode"}),b(I("YT-mPassport"),"keyup",function(){var e=L(I("YT-mPassport"));o.isSameNumber(e)&&""!=e||(o.removeVerifyChoose(),Fe=!1,Oe=0)});for(var n=I("YT-countryList").getElementsByTagName("li"),s=0,a=n.length;s<a;s++)!function(e){b(n[e],"click",function(){o.removeVerifyChoose(),Fe=!1,Oe=0})}(s);o.bindBlurEvent({inputId:"YT-mPassport",checkType:"mobile",typeSuccess:function(){o.clearThisTips("YT-mPassport"),r.isMobile=!0,r.isExist=!1,ve&&P(I("YT-getMobileCode02"),"disabled"),o.clearThisTips("YT-mPassport"),Ae=""},typeFail:function(){r.isMobile=!1,o.showErrTips(Ze.mobile.valid_mobile,"YT-mPassport"),r.isExist=!0,B(I("YT-getMobileCode02"),"disabled"),Ae=L(I("YT-mPassport"))},checkExist:!0,ajaxCheck:{url:"",bizType:"register",callback:function(e){}}}),o.bindCheckPsdStrong("YT-mPassword","YT-psdStrong2"),o.bindBlurEvent({inputId:"YT-mPassword",checkPsdValid:!0}),o.bindRepeatPsdEvent("YT-mPassword","YT-mRepeatPsd"),o.bindBlurEvent({inputId:"YT-mValidateCode"}),b(I("YT-regPhone"),"keyup",function(){"mobile"==g(L(I("YT-regPhone")),L(I("YT-countryRegin")))&&ve&&!r.isExist?P(I("YT-getMobileCode01"),"disabled"):B(I("YT-getMobileCode01"),"disabled")}),b(I("YT-regPhone"),"change",function(){"mobile"==g(L(I("YT-regPhone")),L(I("YT-countryRegin")))&&ve&&!r.isExist?P(I("YT-getMobileCode01"),"disabled"):B(I("YT-getMobileCode01"),"disabled")}),b(I("YT-mPassport"),"keyup",function(){var e=I("YT-mPassport");L(e)&&A(e,M(L(e)))}),b(I("YT-passport"),"keyup",function(){var e=I("YT-passport");L(e)&&A(e,M(L(e)))}),Ke||T(I("YT-openListBtn-email"),I("YT-countryWrap-email"),I("YT-countryList-email"),I("YT-countryCode-email"),I("YT-validateCode"),I("YT-regPhone")),T(I("YT-openListBtn"),I("YT-countryWrap"),I("YT-countryList"),I("YT-countryCode"),I("YT-mValidateCode"),I("YT-mPassport"));var l=[{name:"YT-passport",rules:"required|valid_email",errorMsg:{required:Ze.account.reg_email,valid_email:Ze.account.valid_email}},{name:"YT-regPassword",rules:"required|cant_matches[YT-passport]|min_length[6]|max_length[16]|valid_psd_n_s_spe|!callback_is_psd_sick|!callback_cant_matchesEmail",errorMsg:Ze.password},{name:"YT-repeatPsd",rules:"required|matches[YT-regPassword]",errorMsg:Ze.repeatPassword},{name:"YT-regPhone",rules:"required|!valid_mobile",errorMsg:Ze.mobile}],c=l.concat();c.push({name:"YT-validateCode",rules:"required",errorMsg:Ze.validate});var d=[{name:"YT-mPassport",rules:"required|valid_mobile",errorMsg:Ze.mobile}];"tempA"==He.template&&(d.push({name:"YT-mPassword",rules:"required|min_length[6]|max_length[16]|valid_psd_n_s_spe|!callback_is_psd_sick",errorMsg:Ze.password}),d.push({name:"YT-mRepeatPsd",rules:"required|matches[YT-mPassword]",errorMsg:Ze.repeatPassword}));var p=[{name:"YT-mPassport",rules:"required|valid_mobile",errorMsg:Ze.mobile},{name:"YT-mPassword",rules:"required|min_length[6]|max_length[16]|valid_psd_n_s_spe|!callback_is_psd_sick",errorMsg:Ze.password},{name:"YT-mValidateCode",rules:"required",errorMsg:Ze.validate}];"tempA"==He.template&&p.push({name:"YT-mRepeatPsd",rules:"required|matches[YT-mPassword]",errorMsg:Ze.repeatPassword}),b(I("YT-getMobileCode01"),"click",function(){if(N(this,"disabled"))return!1;var e=new ai("YT-emailReg",l,function(e,i){I("YT-errorTips");if(e.length>0)o.showErrTips(e[0].message);else{o.clearThisTips();var t=L(I("YT-regPhone"));o.getMobileCode("YT-getMobileCode01",t,"register")}});e.registerCallback("is_psd_sick",function(e){return!Le}).setMessage("is_psd_sick",Ze.password.is_psd_sick),e.registerCallback("cant_matchesEmail",function(e){var i=L(I("YT-passport")),o=i.substring(0,i.indexOf("@"));return L(I("YT-regPassword"))!=o}).setMessage("cant_matchesEmail",Ze.password.cant_matchesEmail),setTimeout(function(){e._validateForm()},200)}),b(I("YT-getMobileCode02"),"click",function(){if(N(this,"disabled"))return!1;var e=new ai("YT-mobileReg",d,function(e,i){I("YT-errorTips");if(e.length>0)o.showErrTips(e[0].message);else{o.clearThisTips();var t=L(I("YT-mPassport"));I("YT-voiceVerifyTips").setAttribute("data-name","mobileCode"),I("YT-voiceVerifyTips").setAttribute("mobileNo",t),I("YT-voiceVerifyTips").setAttribute("bizType","register"),o.getMobileCode("YT-getMobileCode02",t,"register")}});e.registerCallback("is_psd_sick",function(e){return!Le}).setMessage("is_psd_sick",Ze.password.is_psd_sick),setTimeout(function(){e._validateForm()},200)});var m;b(I("YT-eRegSubmit"),"click",function(){if(!t)return o.showErrTips("请先同意注册条款!"),!1;m=new ai("YT-emailReg",c,function(e,i){I("YT-errorTips");if(e.length>0)o.showErrTips(e[0].message);else{if(o.clearThisTips(),r.isExist)return o.showErrTips(Ze.account.exist),!1;if(!Me)return o.showErrTips(Ze.smsCode.noGet),!1;if(_e&&(ke||(""==L(I("YT-captcha"))?o.showErrTips(Ze.captcha.required):o.showErrTips(Ze.captcha.error))),"none"==x("YT-emailReg","display"))return;if(Xe.needSliderCaptcha&&!Xe.sliderCaptchResult)return Xe.getNCInstance(function(){Ke&&o.regSubmit()}),void o.showErrTips(Ze.sliderCaptcha.required);o.regSubmit()}}),setTimeout(function(){_e&&m._addField({name:"YT-captcha",display:"验证码",rules:"required",errorMsg:Ze.captcha},"YT-captcha"),m._validateForm()},250)}),b(I("YT-mRegSubmit"),"click",function(){if(!t)return o.showErrTips("请先同意注册条款!"),!1;m=new ai("YT-mobileReg",p,function(e,i){I("YT-errorTips");if(e.length>0)o.showErrTips(e[0].message);else{if(o.clearThisTips(),r.isExist)return o.showErrTips(Ze.account.exist),!1;if(!Me)return o.showErrTips(Ze.smsCode.noGet),!1;if(_e&&!ke)return void(""==L(I("YT-captcha"))?o.showErrTips(Ze.captcha.required):o.showErrTips(Ze.captcha.error));if("none"==x("YT-mobileReg","display"))return;if(Xe.needSliderCaptcha&&!Xe.sliderCaptchResult)return Xe.getNCInstance(function(){Ke&&o.regSubmit()}),void o.showErrTips(Ze.sliderCaptcha.required);o.regSubmit()}}),setTimeout(function(){_e&&m._addField({name:"YT-captcha",display:"验证码",rules:"required",errorMsg:Ze.captcha},"YT-captcha"),m._validateForm()},250)}),b(I("YT-rulesLabel"),"click",function(){I("YT-agreeRegRules").checked?(B(this,"checked"),t=!0):(P(this,"checked"),t=!1)})}})},buildRiskDom:function(o){var t=this;he="login",_e=!1,ke=!0,Ee=!0,Ie={},qe=!0;var r=He.callbackURL;if(o&&o.jumpUrl)r=o.jumpUrl;else var o=He;S({url:ce+"/verifyIdentityAndLoginView.htm",data:{callback:r,buid:o.buid,pid:o.pid,template:"tempInterceptor",size:"normal",userInfoToken:o.userInfoToken},dataType:"jsonp",success:function(r){function n(){He&&He.callbackUrl?e.location.href=He.callbackUrl:He&&He.callbackURL?e.location.href=He.callbackURL:$e()}if("success"!=r.result)return"AUTH_CODE_NOT_EXIST"==r.errorCode||"LOGIN_AUTH_CODE_NULL"==r.errorCode?(t.showErrTips('页面过期了哦，请重新<a href="//account.youku.com">登录</a>'),!1):(t.showErrTips(r.errorMsg),!1);setTimeout(function(){qe=!1},ze.blurLockTime),I("ikuBox")&&(r.html='<div class="YT-riskBox-head"><span class="YT-risk-header"></span><span class="YT-risk-userinfo">安全中心</span></div>'+r.html),t.appendDom(r);var s={};s.isExist=!0;r.formtoken;he="risk",t.setUI(),I("YT-mAccount")&&(d("YT-mAccount","YT-countryRegin","YT-getMobileCode"),T(I("YT-openListBtn"),I("YT-countryWrap"),I("YT-countryList"),I("YT-countryCode"),I("YT-mPassword"),I("YT-mAccount")),t.bindBlurEvent({inputId:"YT-mAccount",checkType:"mobile",typeSuccess:function(){s.isMobile=!0,t.clearThisTips("YT-mAccount"),s.isExist=!0,ve&&P(I("YT-getMobileCode"),"disabled")},typeFail:function(){s.isMobile=!1,t.showErrTips(Ze.account.valid_mobile,"YT-mAccount"),B(I("YT-getMobileCode"),"disabled")}})),I("telLine")&&b(I("telLine"),"click",function(){e.open("http://os3.cs.tudou.com/new/client.php?arg=yktd&style=28")});var a,l=!1;I("YT-direct-change")&&b(I("YT-direct-change"),"click",function(){if(a&&(clearInterval(a),a=null),I("YT-risk-hasMobile"))var o="verify_user";else var o="add_mobile";var r={IsFromSdk:"false",jumpUrl:L(I("YT-risk-jumpUrl")),sdkUserInfoToken:"false",pid:He.pid,aliRiskSwitchOn:L(I("YT-aliRiskSwitchOn")),mobileNo:L(I("YT-risk-mobileNo")),passport:L(I("YT-risk-passport")),riskErrorCode:L(I("YT-riskErrorCode")),userInfoToken:He.userInfoToken,formtoken:L(I("YT-formtoken")),bizType:o};I("ikuBox")&&(openIntentLink=i.createElement("a"),openIntentLink.id="openSchemeLink",openIntentLink.style.display="none",i.body.appendChild(openIntentLink),openIntentLink.setAttribute("target","_blank")),S({url:ce+"/passport/modifyMobile.htm",dataType:"jsonp",data:r,time:1e3,success:function(i){if("success"==i.result)a=setInterval(function(){S({url:ce+"/passport/verifyResult.htm",dataType:"jsonp",data:{pid:He.pid,token:i.msg.token},success:function(e){"S"==e.msg.state?(clearInterval(a),a=null,A(I("YT-mPassword"),e.msg.authCode),l=!0,I("YT-riskloginSubmit").click()):"SYS_EXCEPTION"==e.errorCode||null==e.msg.state?(clearInterval(a),a=null,t.showErrTips('页面过期了哦，请重新<a href="//account.youku.com">登录</a>')):""!=e.errorMsg&&(clearInterval(a),a=null,t.showErrTips(e.errorMsg))}})},3e3),I("ikuBox")?(openIntentLink.href=i.msg.modifyMobileUrl,openIntentLink.click()):e.open(i.msg.modifyMobileUrl);else{if("SYS_EXCEPTION"!=i.errorCode)return t.showErrTips(i.errorMsg),!1;I("ikuBox")?(openIntentLink.href="https://id.youku.com/modifyMobileByTradeView.htm",openIntentLink.click()):e.open("https://id.youku.com/modifyMobileByTradeView.htm")}},fail:function(i){I("ikuBox")?(openIntentLink.href="https://id.youku.com/modifyMobileByTradeView.htm",openIntentLink.click()):e.open("https://id.youku.com/modifyMobileByTradeView.htm")}})}),b(I("YT-riskloginSubmit"),"click",function(){if(I("YT-risk-hasMobile"))var e=[{name:"YT-mPassword",rules:"required",errorMsg:{required:Ze.smsCode.smsPsd}}];else var e=[{name:"YT-mAccount",rules:"required|valid_mobile",errorMsg:Ze.mobile},{name:"YT-mPassword",rules:"required",errorMsg:{required:Ze.smsCode.smsPsd}}];loginValidate=new ai("YT-mobileLogin",e,function(e,i){var r=(I("YT-errorTips"),"mobileCode");if(I("YT-voiceVerifyTips").getAttribute("voice-flag")&&"true"==I("YT-voiceVerifyTips").getAttribute("voice-flag")&&(r="voiceCode"),l&&(r="authCode"),e.length>0)t.showErrTips(e[0].message);else{if(t.clearThisTips(),I("YT-risk-hasMobile"))var s={bizType:"verify_user",buid:He.buid,pid:He.pid,userInfoToken:He.userInfoToken,formtoken:L(I("YT-formtoken")),verifyCode:L(I("YT-mPassword")),sendCodeType:r},a=ce+"/passport/verifyIdentityAndLogin.htm";else var s={receiver:L(I("YT-mAccount")),bizType:"add_mobile",buid:He.buid,pid:He.pid,userInfoToken:He.userInfoToken,formtoken:L(I("YT-formtoken")),region:L(I("YT-countryRegin")),verifyCode:L(I("YT-mPassword")),sendCodeType:r},a=ce+"/passport/bindMobileAndLogin.htm";canDirectBind=!1,B(I("YT-riskloginSubmit"),"disabled"),S({url:a,data:s,success:function(e){"success"==e.result?(canDirectBind=!1,S({url:ce+"/login/checkLogin.json",data:{buid:"${buid!'youku'}",pid:"${pid!'20160317PLF000211'}"},dataType:"jsonp",success:function(e){"success"==e.result&&e.msg.login&&(I("YT-warn-pwd")?(xe=!0,o=e,j("YT-risk-mobile"),O("YT-warn-pwd"),t.mainLoginSuccess(e,He.buid,He.pid)):We?n():t.mainLoginSuccess(e,He.buid,He.pid))}})):(canDirectBind=!0,P(I("YT-riskloginSubmit"),"disabled"),t.showErrTips(e.errorMsg))}})}}),setTimeout(function(){loginValidate._validateForm()},300)}),I("YT-direct-login")&&b(I("YT-direct-login"),"click",function(){n()}),b(I("YT-getMobileCode"),"click",function(){if(N(I("YT-getMobileCode"),"disabled"))return!1;new ai("YT-mAccount",[{name:"YT-mAccount",rules:"required|valid_mobile",errorMsg:Ze.mobile}],function(e,i){I("YT-errorTips");if(e.length>0)t.showErrTips(e[0].message);else{t.clearThisTips();var o=L(I("YT-mAccount"));I("YT-voiceVerifyTips").setAttribute("data-name","mobileCode"),I("YT-voiceVerifyTips").setAttribute("mobileNo",o),I("YT-risk-hasMobile")?(I("YT-voiceVerifyTips").setAttribute("bizType","verify_user"),t.getMobileCode("YT-getMobileCode",o,"verify_user")):(I("YT-voiceVerifyTips").setAttribute("bizType","add_mobile"),t.getMobileCode("YT-getMobileCode",o,"add_mobile"))}})._validateForm()}),b(I("YT-mAccount"),"keyup",function(){var e=L(I("YT-mAccount"));t.isSameNumber(e)&&""!=e||(t.removeVerifyChoose(),Fe=!1,Oe=0)})}})},changeLoginType:function(e){var i=this;Ee=!0,validateResult={},validateResult.isExist=!0,validateResult.isMobile=!0,Me=!1,u(),"mobile"==e?(B(I("YT-showMobileLogin"),"active"),P(I("YT-showNormalLogin"),"active")):(i.clearGetMobileCode("YT-getMobileCode"),P(I("YT-showMobileLogin"),"active"),B(I("YT-showNormalLogin"),"active")),Ce="mobile"==e?"mobile":"normal",W("YT-normalLogin","display","mobile"==e?"none":"block"),W("YT-mobileLogin","display","mobile"==e?"block":"none"),i.cleanErrTips("mobile"==e?"YT-normalLogin":"YT-mobileLogin"),i.changeTitle("mobile"==e?"手机快捷登录":"账号登录"),i.delCaptcha(),Xe.delNCInstance(),A(I("YT-countryRegin"),D(I("YT-countryRegin"),"data-deRegion")),q(I("YT-countryCode"),"+"+D(I("YT-countryRegin"),"data-deCode")),q(I("YT-countryName"),D(I("YT-countryRegin"),"data-deName")),P(I("YT-countryWrap"),"active"),P(I("YT-openListBtn"),"active")},appendDom:function(o){var t=this;if(ge&&"embedded"==ge){if(!me)return void alert("请传入嵌入容器的ID");q(I(me),o.html),j("YT-closeLoginFrame")}else{var r;i.getElementsByTagName("body")[0],I("YT-loginFramePop")?r=I("YT-loginFramePop"):(r=i.createElement("div"),r.id="YT-loginFramePop",B(r,"YT-loginFrame-popbox")),q(r,o.html),t.showPopWindow(r),b(I("YT-closeLoginFrame"),"click",function(){t.closeFrame(He.closeCallback)})}Pe||(Pe=setInterval(function(){t.sendData()},1e4)),!Be&&e.loginData&&(Be=new loginData({clickCountEl:["YT-qrbtn","YT-showNormalLogin","YT-showMobileLogin","YT-getMobileCode","YT-nloginSubmit","YT-mloginSubmit","YT-showMobileReg","YT-getMobileCode01","YT-getMobileCode02","YT-eRegSubmit","YT-mRegSubmit","YT-registeBtn","YT-gotoLogin"],mouseoverCountEl:["YT-showHelp"],sendEl:["YT-registeBtn","YT-gotoLogin","YT-closeLoginFrame"],sendTimeout:1e4}))},bindCheckPsdStrong:function(e,i){var o=I(e);b(o,"keyup",function(){var e=L(o),t=0;e.match(/[a-z]/g)&&t++,e.match(/[0-9]/g)&&t++,e.match(/[A-Z]/g)&&t++,e.match(/(.[^a-z0-9])/g)&&t++,e.length<6||e.length>16?t=0:(ze.numberReg.test(e)||ze.codeReg.test(e)||ze.specialReg.test(e))&&(t=1),0==t&&U(I(i),"YT-psd-strong strong0"),1==t&&U(I(i),"YT-psd-strong strong1"),2==t&&U(I(i),"YT-psd-strong strong2"),t>=3&&U(I(i),"YT-psd-strong strong3")})},bindBlurEvent:function(e){if(e){var i=this,o=I(e.inputId);b(o,"blur",function(){var t=L(o);if(!M(t))return void i.clearThisTips(e.inputId);var r=!1;if(e.checkType&&(""!=t||t)){var n;"mobile"==e.checkType&&(n=L(I("YT-countryRegin"))||"CN"),g(t,n)==e.checkType?(r=!0,e.typeSuccess&&e.typeSuccess()):(r=!1,e.typeFail&&e.typeFail())}if(e.checkExist)if(""!=t){if(e.checkType&&!r)return;var s=(o.name,{buid:He.buid,pid:He.pid,passport:t,formtoken:L(I("YT-formtoken")),template:He.template,bizType:e.ajaxCheck.bizType});("login"==e.ajaxCheck.bizType&&"mobile"==Ce||"register"==e.ajaxCheck.bizType&&"mobile"==ye)&&(s.region=L(I("YT-countryRegin"))),s.jsToken=Je?Je.getUmidToken():"",S({url:e.ajaxCheck.url,dataType:"jsonp",data:s,blur:!0,success:function(i){e.ajaxCheck.callback(i)}})}else i.clearThisTips(e.inputId);if(e.checkPsdValid&&""!=t){if(e.matchInput)var a=L(I(e.matchInput)),l=a.substring(0,a.indexOf("@"));if(t.length<6||t.length>16)return void i.showErrTips(Ze.password.min_length,e.inputId);if(e.matchInput&&t==L(I(e.matchInput)))return void i.showErrTips(Ze.password.cant_matches,e.inputId);if(e.matchInput&&l&&t==l)return void i.showErrTips(Ze.password.cant_matchesEmail,e.inputId);if(!ze.psdtest.test(t))return void i.showErrTips(Ze.password.valid_psdStrong,e.inputId);if(ze.numberReg.test(t)||ze.codeReg.test(t)||ze.specialReg.test(t))return void i.showErrTips(Ze.password.valid_psd_n_s_spe,e.inputId);j("YT-errorTips"),i.clearThisTips(e.inputId),Le=!1,S({url:ce+"/passport/isPasswordValid.json",dataType:"jsonp",blur:!0,data:{formtoken:L(I("YT-formtoken")),buid:He.buid,pid:He.pid,password:t,bizType:"register",jsToken:Je?Je.getUmidToken():""},success:function(o){"fail"==o.result&&"FORM_TIMEOUT"!=o.errorCode?(Le=!0,i.showErrTips(o.errorMsg,e.inputId)):(Le=!1,j("YT-errorTips"),i.clearThisTips(e.inputId))}})}})}},bindRepeatPsdEvent:function(e,i){var o=this,t=I(i),r=I(e);b(t,"blur",function(){var e=L(t);""!=e&&e&&e!=L(r)?o.showErrTips(Ze.repeatPassword.matches,i):o.clearThisTips(i)})},loginSubmit:function(){var i=this,o={};if(!Ee)return!1;if(Ee=!1,"normal"==Ce){var t=L(I("YT-ytaccount")),r=I("YT-ytpassword")?G(L(I("YT-ytpassword"))):"";o.passport=t,o.password=r,o.loginType="passport_pwd",B(I("YT-nloginSubmit"),"disabled"),q(I("YT-nloginSubmit"),"正在进入...")}if("mobile"==Ce){var t=L(I("YT-mAccount")),r=L(I("YT-mPassword"));o.passport=t,o.smsCode=r,o.loginType="mobile_sms_code",o.region=L(I("YT-countryRegin")),B(I("YT-mloginSubmit"),"disabled"),q(I("YT-mloginSubmit"),"正在进入...")}if(o.formtoken=L(I("YT-formtoken")),_e&&"login"==he&&"normal"==Ce){var s=L(I("YT-captcha"));o.captcha=s}var a=I("YT-ytremember");a&&a.checked&&(o.rememberMe=!0),o.state=L(I("YT-state")),o.buid=He.buid,o.pid=He.pid,o.template=He.template,o.clientId=He.clientId,o.mode=He.mode,o.actionFrom=He.from,o.sendCodeType=De,o.callback=He.callbackURL,Xe.needSliderCaptcha&&(o.sliderCaptchaToken=Xe.NCData.token,o.sliderCaptchaSessionId=Xe.NCData.csessionid,o.sliderCaptchaSig=Xe.NCData.sig),Je&&(o.UA=Je.getUA(),o.jsToken=Je?Je.getUmidToken():"");var l="/login/confirm.json";"tempTlsite"!=He.template&&"tempTlsiteMobile"!=He.template||(l=I("YT-has-passport")?"/tlsite/recommend_account_login.json":"/tlsite/youku_account_login.json"),n("submit"),"voiceCode"==De&&n("isGetVoive"),S({type:"POST",url:ce+l,data:o,dataType:"jsonp",success:function(t){if("success"==t.result)if(Ke){if(t.msg.riskErrorCode)if("RISK_USER_WARN_FOR_BIND_MOBILE"==t.msg.riskErrorCode){var r="/passport/bindMobileView.htm?formtoken="+o.formtoken+"&userInfoToken="+t.msg.userInfoToken+"&passport="+o.passport;I("YT-l_callback")?I("YT-l_callback").value=r:t.msg.callback=r}else"RISK_USER_WARN_RESET_PWD"==t.msg.riskErrorCode&&(I("YT-l_callback")?I("YT-l_callback").value=t.msg.jumpUrl:t.msg.callback=t.msg.jumpUrl);i.mainLoginSuccess(t,He.buid,He.pid,He.template)}else t.msg.riskErrorCode?(He.userInfoToken=t.msg.userInfoToken,xe=!0,We=!0,i.buildRiskDom(t),i.mainLoginSuccess(t,He.buid,He.pid,He.template)):i.mainLoginSuccess(t,He.buid,He.pid,He.template);else if(t.riskErrorCode){Ee=!0,P(I("YT-mloginSubmit"),"disabled"),P(I("YT-nloginSubmit"),"disabled");var n=I("YT-mloginSubmit")&&I("YT-mloginSubmit").getAttribute("title")?I("YT-mloginSubmit").getAttribute("title"):"登录",s=I("YT-nloginSubmit")&&I("YT-nloginSubmit").getAttribute("title")?I("YT-nloginSubmit").getAttribute("title"):"登录";switch(q(I("YT-mloginSubmit"),n),q(I("YT-nloginSubmit"),s),t.riskErrorCode){case"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE":case"RISK_USER_INTERCEPTOR_FOR_BIND_MOBILE":case"RISK_USER_INTERCEPTOR_FOR_VALIDATE_MOBILE_WARN_RESET_PWD":Ke?e.location.href="/passport/bindMobileView.htm?formtoken="+o.formtoken+"&userInfoToken="+t.userInfoToken+"&passport="+o.passport:(He.userInfoToken=t.userInfoToken,i.buildRiskDom());break;case"RISK_USER_INTERCEPTOR_FOR_RESET_PWD":e.location.href=t.jumpUrl;break;default:i.showErrTips(t.errorMsg)}}else{Ee=!0,P(I("YT-mloginSubmit"),"disabled"),P(I("YT-nloginSubmit"),"disabled");var n=I("YT-mloginSubmit")&&I("YT-mloginSubmit").getAttribute("title")?I("YT-mloginSubmit").getAttribute("title"):"登录",s=I("YT-nloginSubmit")&&I("YT-nloginSubmit").getAttribute("title")?I("YT-nloginSubmit").getAttribute("title"):"登录";q(I("YT-mloginSubmit"),n),q(I("YT-nloginSubmit"),s),_e&&(ke=!1,i.changeCaptcha("login",He.buid,He.pid)),Xe.needSliderCaptcha&&(Ke?Xe.isNeedSlider(!0):Xe.resetNCInstance()),"FORM_TIMEOUT"==t.errorCode?i.showErrTips(Ze.errorCode.loginTimeout):"NEED_CAPTCHA"==t.errorCode||"CAPTCHA_CODE_NULL"==t.errorCode||"CAPTCHA_KEY_NULL"==t.errorCode?"login"==he&&"normal"==Ce&&i.createCaptcha("","","","login",3):"NEED_SLIDER_CAPTCHA"==t.errorCode?(!Ke&&t.errorMsg&&i.showErrTips(t.errorMsg),Xe.needSliderCaptcha&&!Ke||Xe.resetNCInstance(function(){Ke&&i.loginSubmit()})):"CAPTCHA_ERROR"==t.errorCode?(_e||(_e=!0,i.createCaptcha("","","","login",3)),ke=!1,i.showErrTips(Ze.errorCode.CAPTCHA_ERROR)):t.errorMsg&&""!=t.errorMsg?i.showErrTips(t.errorMsg):i.showErrTips(Ze.errorCode.defaults)}}})},regSubmit:function(){var e=this,i={};if(!Re)return!1;Re=!1,"email"==ye&&(i.email=L(I("YT-passport")),i.password=L(I("YT-regPassword")),i.repeatPassword=L(I("YT-repeatPsd")),i.bindMobile=L(I("YT-regPhone")),i.smsCode=L(I("YT-validateCode")),B(I("YT-eRegSubmit"),"disabled"),q(I("YT-eRegSubmit"),"正在注册...")),"mobile"==ye&&(i.mobile=L(I("YT-mPassport")),i.password=L(I("YT-mPassword")),i.repeatPassword=L(I("YT-mRepeatPsd")),i.smsCode=L(I("YT-mValidateCode")),B(I("YT-mRegSubmit"),"disabled"),q(I("YT-mRegSubmit"),"正在注册...")),_e&&(i.captcha=L(I("YT-captcha"))),Xe.needSliderCaptcha&&(i.sliderCaptchaToken=Xe.NCData.token,i.sliderCaptchaSessionId=Xe.NCData.csessionid,i.sliderCaptchaSig=Xe.NCData.sig),Ke&&(i.repeatPassword=i.password),i.formtoken=L(I("YT-formtoken")),i.buid=He.buid,i.pid=He.pid,i.template=He.template,i.mode=He.mode,i.actionFrom=He.from,i.sendCodeType=De,i.region=L(I("YT-countryRegin")),Je&&(i.UA=Je.getUA(),i.jsToken=Je?Je.getUmidToken():"");var o="/register/confirm.json";"tempTlsite"!=He.template&&"tempTlsiteMobile"!=He.template||(o="/tlsite/registerAndBindAlipay.json"),n("submit"),"voiceCode"==De&&n("isGetVoive"),S({url:ce+o,data:i,dataType:"jsonp",success:function(i){if("success"==i.result)n("success"),e.mainLoginSuccess(i,He.buid,He.pid,He.template);else{Re=!0,P(I("YT-eRegSubmit"),"disabled"),P(I("YT-mRegSubmit"),"disabled");var o=I("YT-mRegSubmit")&&I("YT-mRegSubmit").getAttribute("title")?I("YT-mRegSubmit").getAttribute("title"):"注册";q(I("YT-eRegSubmit"),"注册"),q(I("YT-mRegSubmit"),o),_e&&(ke=!1,e.changeCaptcha("register",He.buid,He.pid)),Xe.needSliderCaptcha&&(Ke?Xe.isNeedSlider(!0):Xe.resetNCInstance()),"FORM_TIMEOUT"==i.errorCode?e.showErrTips(Ze.errorCode.regTimeout):"NEED_SLIDER_CAPTCHA"==i.errorCode?(!Ke&&i.errorMsg&&e.showErrTips(i.errorMsg),Xe.needSliderCaptcha&&!Ke||Xe.resetNCInstance(function(){Ke&&e.regSubmit()})):"NEED_CAPTCHA"==i.errorCode||"CAPTCHA_CODE_NULL"==i.errorCode||"CAPTCHA_KEY_NULL"==i.errorCode?e.createCaptcha("","","","register",6):"CAPTCHA_ERROR"==i.errorCode?(_e||(_e=!0,e.createCaptcha("","","","register",6)),ke=!1,e.showErrTips(Ze.errorCode.CAPTCHA_ERROR)):"MOBILE_CODE_ERROR"==i.errorCode?e.showErrTips(Ze.errorCode.MOBILE_CODE_ERROR):i.errorMsg&&""!=i.errorMsg?e.showErrTips(i.errorMsg):e.showErrTips(Ze.errorCode.defaults)}}})},mainLoginSuccess:function(i,o,t,r){var n=this;if(i.msg||(i.msg=i),i.msg.domains&&0!=i.msg.domains.length)n.crossFiveDomain(i,o,t,r);else{var s=L(I("l_callback"))||i.msg.callback||i.callback;if(s){if(xe)return!1;var s=L(I("l_callback")),a=V(s);if(a==V(ce))E("P_j_scl","hadCheckLogin",a),e.location.href=s;else{var l=ue+a;n.crossdomain(i,l,o,t,r)}}else V(de)==V(ce)?(E("P_j_scl","hadCheckLogin",V(de)),$e()):n.crossdomain(i,de,o,t,r)}},crossdomain:function(i,o,t,r,n){o||(o=de),i.msg||(i.msg=i),i.msg.token&&S({url:o+"/login/crossdomain.json",data:{buid:t,pid:r,template:n,token:i.msg.token},dataType:"jsonp",success:function(i){if("success"!=i.result)throw new Error(i.errorMsg);if(i.msg.callback){var o=V(i.msg.callback);if(E("P_j_scl","hadCheckLogin",o),xe)return He.callbackUrl=i.msg.callback,!1;e.location.href=L(i.msg.callback)}else if(I("YT-l_callback")&&""!=L(I("YT-l_callback"))){var o=V(L(I("YT-l_callback")));if(E("P_j_scl","hadCheckLogin",o),xe)return He.callbackUrl=i.msg.callback,!1;e.location.href=L(I("YT-l_callback"))}else{if(E("P_j_scl","hadCheckLogin",V(de)),xe)return He.loginFun=!0,!1;$e()}}})},crossFiveDomain:function(i,o,t,r){i.msg||(i.msg=i);for(var n=i.msg.domains,s=i.msg.callback,a={},l=n.length,c=r,o=o,d=0;d<l;d++)!function(e){a["crossTimes"+e]=0,a["crossStatu"+e]=!0;var i=n[e];a["cross"+e]=setInterval(function(){return a["crossOver"+e]||a["crossTimes"+e]>=3?(a["cross"+e]&&(clearInterval(a["cross"+e]),a["cross"+e]=null),a["crossOver"+e]=!0,!1):!!a["crossStatu"+e]&&(a["crossStatu"+e]=!1,S({url:ce+"/login/checkLogin.json",data:{template:r,buid:o,pid:t},dataType:"jsonp",success:function(r){if("fail"==r.result)return a["crossTimes"+e]++,a["crossStatu"+e]=!0,!1;r.msg.token&&S({url:ze.preDomain+i+"/login/crossdomain.json",data:{buid:o,pid:t,template:c,token:r.msg.token},dataType:"jsonp",success:function(o){a["crossTimes"+e]++,a["crossStatu"+e]=!0,"success"==o.result&&(E("P_j_scl","hadCheckLogin",V(i)),clearInterval(a["cross"+e]),a["cross"+e]=null,a["crossOver"+e]=!0,a["crossStatu"+e]=!1)},fail:function(i){a["crossTimes"+e]++,a["crossStatu"+e]=!0}})},fail:function(i){a["crossTimes"+e]++,a["crossStatu"+e]=!0}}),void(a["crossTimes"+e]>=3&&(clearInterval(a["cross"+e]),a["cross"+e]=null,a["crossOver"+e]=!0)))},100)}(d);if(xe)return s?He.callbackUrl=s:I("YT-l_callback")&&""!=L(I("YT-l_callback"))?He.callbackUrl=L(I("YT-l_callback")):He.loginFun=!0,!1;var T=setInterval(function(){for(var i=0,o=0;o<l;o++)!function(e){a["crossOver"+e]&&i++}(o);if(i>=l){clearInterval(T),T=null;var t=I("ikuBox")?I("ikuBox").getAttribute("data-from"):"";if(I("ikuBox")&&("Iku"==t||"itudou"==t))return $e(),!1;if(s)return e.location.href=s,!1;I("YT-l_callback")&&""!=L(I("YT-l_callback"))?e.location.href=L(I("YT-l_callback")):$e()}},100)},createCaptcha:function(e,o,t,r,n){var s=this;_e=!0,ke=!0;var n=n||"",a=He?He.buid?He.buid:"":e||"",l=He?He.pid?He.pid:"":o||"",t=He?He.template?He.template:"":t||"",r=r,c=ce+"/passport/captcha.htm?bizType="+r+"&buid="+a+"&pid="+l+"&time="+(new Date).getTime(),d="";if(Ke){
if(d='<label class="YT-a-cont label-icon icon-captcha" for="captcha"><input type="text" class="YT-form-input" maxlength="4" name="YT-captcha" id="YT-captcha" tabindex="'+n+'" placeholder="验证码"></label><img src="'+c+'" width="90" height="34" alt="" maxlength="4" class="absolute-right" id="YT-captchaImg">',I("YT-captchaWrap"))T=I("YT-captchaWrap");else{var T=i.createElement("li");T.id="YT-captchaWrap"}"login"==he&&"normal"==Ce?I("YT-normalLoginList").appendChild(T):"login"==he&&"mobile"==Ce?I("YT-mobileLoginList").appendChild(T):"reg"==he&&"mobile"==ye&&I("YT-registerList").appendChild(T),q(T,d),O("YT-captchaWrap")}else d='<div class="YT-form-group no-icon"><img id="YT-captchaImg" class="YT-captcha-img" title="点击更换验证码" src="'+c+'" width="100"><input type="text" maxLength="4" tabindex="'+n+'" class="YT-form-input short-input" id="YT-captcha" name="YT-captcha"></div>',"login"==he?Se?(q(I("YT-thirdCaptchaWrap"),d),I("YT-captchaWrap")&&q(I("YT-captchaWrap"),""),I("YT-mCaptchaWrap")&&q(I("YT-mCaptchaWrap"),"")):"normal"==Ce?q(I("YT-captchaWrap"),d):"mobile"==Ce?q(I("YT-mCaptchaWrap"),d):q(I("YT-captchaWrap"),d):"reg"==he?"normal"==ye&&I("YT-captchaWrap")?q(I("YT-captchaWrap"),d):"mobile"==ye&&I("YT-mCaptchaWrap")?q(I("YT-mCaptchaWrap"),d):q(I("YT-captchaWrap"),d):q(I("YT-captchaWrap"),d);b(I("YT-captchaImg"),"click",function(){s.changeCaptcha(r,a,l)}),ke=!0},changeCaptcha:function(e,i,o){ke=!0;var t=I("YT-captchaImg");t&&(t.src=ce+"/passport/captcha.htm?bizType="+(e||"")+"&buid="+(i||"")+"&pid="+o+"&time="+(new Date).getTime(),A(I("YT-captcha"),""))},delCaptcha:function(){var e=this;_e&&(I("YT-captchaWrap")&&q(I("YT-captchaWrap"),""),I("YT-mCaptchaWrap")&&q(I("YT-mCaptchaWrap"),""),He&&Ke&&I("YT-captchaWrap")&&I("YT-captchaWrap").parentNode.removeChild(I("YT-captchaWrap")),e.clearThisTips("YT-captcha"),_e=!1,ke=!0)},getMobileCode:function(e,i,o,t,r,s,a,l,c,d){var T=this;Me=!1;var a=He?He.buid:a,l=He?He.pid:l,c=He?He.template:c,t=t||"YT-formtoken",r=r||"YT-countryRegin",u=I(e).innerHTML;if(Ke?De=I("YT-voiceVerifyTips").getAttribute("voice-flag")&&"true"==I("YT-voiceVerifyTips").getAttribute("voice-flag")?"voiceCode":"mobileCode":I("YT-bindMobile-getMobileCode")?De=I("YT-bindMobile-getMobileCode").getAttribute("data-name"):I("YT-getMobileCode")?De=I("YT-getMobileCode").getAttribute("data-name"):I("YT-getMobileCode02")&&(De=I("YT-getMobileCode02").getAttribute("data-name")),""!=je&&i!=je&&"voiceCode"==De)return void T.removeVerifyChoose();if("voiceCode"==De&&void 0!=He&&"tempMobile"!=He.template||"voiceCode"==De&&void 0==He?n("getVoiceBtn"):"mobileCode"==De&&n("getSmsBtn"),i)var p={buid:a,pid:l,formtoken:L(I(t)),template:c,mobileNo:i,bizType:o,region:L(I(r)),jsToken:Je?Je.getUmidToken():"",sendCodeType:De};else var p={buid:a,pid:l,formtoken:L(I(t)),userInfoToken:He.userInfoToken,bizType:o,sendCodeType:De};ve&&S({url:ce+"/passport/sendMobileCode.json",data:p,dataType:"jsonp",success:function(o){if(I("YT-voiceVerifyTips")&&I("YT-voiceVerifyTips").setAttribute("voice-flag","false"),"success"==o.result){if(je=i,"voiceCode"==De&&(O("YT-voiceVerifyTipsSuccess"),T.addVoiceVerifySuccess()),""!=o.msg)var t=o.msg;else var t=5;var r=setTimeout(function(){j("YT-voiceVerifyTipsSuccess"),T.removeVoiceVerifySuccess(),clearTimeout(r)},1e3*t);Oe+=1,Me=!0,ve=!1,B(I(e),"disabled"),B(I("YT-voiceVerifyTry"),"disabled-color"),B(I("YT-voiceVerifyTryMobile"),"disabled-color"),B(I("YT-smsVerifyTry"),"disabled-color"),B(I("YT-smsVerifyTryMobile"),"disabled-color");var n=59;Ye=setInterval(function(){if(!I(e))return void clearInterval(Ye);q(I(e),n+" 秒后重发"),--n<0&&(clearInterval(Ye),ve=!0,P(I(e),"disabled"),q(I(e),u),"mobileCode"==De&&"2"==Oe&&(I("YT-bindMobile-countryRegin")?"CN"==L(I("YT-bindMobile-countryRegin"))&&T.addVoiceVerify():"CN"!=L(I("countryRegin"))&&"CN"!=L(I("YT-countryRegin"))||T.addVoiceVerify()),P(I("YT-voiceVerifyTry"),"disabled-color"),P(I("YT-voiceVerifyTryMobile"),"disabled-color"),P(I("YT-smsVerifyTry"),"disabled-color"),P(I("YT-smsVerifyTryMobile"),"disabled-color"),!Fe&&Oe<"2"&&T.removeVerifyChoose())},1e3)}else T.showErrTips(o.errorMsg,"",s)}})},isSameNumber:function(e){return""==je||!e||je==e},addVoiceVerifyTips:function(){var e=['<div class="triangle-up1"></div>','<div class="triangle-up2"></div>',"<p>我们会通过拨打您的手机号告知动态密码，动态密码是您听到的6位数字</p>"].join(""),i=['<div class="triangle-up1"></div>','<div class="triangle-up2"></div>',"<p>我们会通过拨打您的手机号告知验证码，验证码是您听到的6位数字</p>"].join("");I("YT-bindMobile-getMobileCode")?(q(I("YT-voiceVerifyTipsHover-noMobile"),i),B(I("YT-voiceVerifyTipsHover-noMobile"),"YT-voiceVerifyTipsHover")):I("YT-getMobileCode")?(q(I("YT-voiceVerifyTipsHover"),e),B(I("YT-voiceVerifyTipsHover"),"YT-voiceVerifyTipsHover")):(q(I("YT-voiceVerifyTipsHover"),i),B(I("YT-voiceVerifyTipsHover"),"YT-voiceVerifyTipsHover"))},addVoiceVerifySuccess:function(){var e=this;if(I("YT-voiceVerifyTipsSuccess")){if(I("YT-mRegSubmit")||I("YT-bindMobile-noMobileSubmit")){var i=['<p class="voiceVerifyTips-title">温馨提示</p><p class="voiceVerifyTips-cont">请注意接听来自 0571-86756617 电话，验证码是您听到的6位数字</p>'].join("");B(I("YT-voiceVerifyTipsSuccess"),"mt_0")}else if(I("YT-mloginSubmit"))var i=['<p class="voiceVerifyTips-title">温馨提示</p><p class="voiceVerifyTips-cont">请注意接听来自 0571-86756617 电话，动态密码是您听到的6位数字</p>'].join("");I("YT-bindMobile-getMobileCode")?(q(I("YT-voiceVerifyTipsSuccess-noMobile"),i),B(I("YT-voiceVerifyTipsSuccess-noMobile"),"YT-voiceVerifyTipsSuccess"),j("YT-voiceVerifyTips-noMobile"),j("YT-smsVerifyTips-noMobile")):(q(I("YT-voiceVerifyTipsSuccess"),i),B(I("YT-voiceVerifyTipsSuccess"),"YT-voiceVerifyTipsSuccess"))}b(I("YT-mPassword"),"keyup",function(){e.removeVoiceVerifySuccess()}),b(I("YT-mValidateCode"),"keyup",function(){e.removeVoiceVerifySuccess()}),b(I("YT-bindMobile-getMobile"),"keyup",function(){e.removeVoiceVerifySuccess()})},removeVoiceVerifySuccess:function(){I("YT-bindMobile-getMobileCode")?(q(I("YT-voiceVerifyTipsSuccess-noMobile"),""),P(I("YT-voiceVerifyTipsSuccess-noMobile"),"YT-voiceVerifyTipsSuccess"),O("YT-voiceVerifyTips-noMobile"),O("YT-smsVerifyTips-noMobile")):I("YT-voiceVerifyTipsSuccess")&&(q(I("YT-voiceVerifyTipsSuccess"),""),P(I("YT-voiceVerifyTipsSuccess"),"YT-voiceVerifyTipsSuccess"))},addSmsVerify:function(){function e(){ve&&(I("YT-bindMobile-getMobileCode")?(I("YT-bindMobile-getMobileCode").innerHTML="获取验证码",I("YT-bindMobile-getMobileCode").setAttribute("data-name","mobileCode"),q(I("YT-smsVerifyTips-noMobile"),""),P(I("YT-smsVerifyTips-noMobile"),"YT-smsVerifyTips")):(I("YT-getMobileCode")?(I("YT-getMobileCode").innerHTML="获取动态密码",I("YT-getMobileCode").setAttribute("data-name","mobileCode")):I("YT-getMobileCode02")&&(I("YT-getMobileCode02").innerHTML="获取动态密码",I("YT-getMobileCode02").setAttribute("data-name","mobileCode")),I("YT-voiceVerifyTips").setAttribute("data-name","mobileCode"),q(I("YT-smsVerifyTips"),""),P(I("YT-smsVerifyTips"),"YT-smsVerifyTips")),i.addVoiceVerify(),n("trySmsBtn"),Y(I("YT-smsVerifyTry"),"click",e))}var i=this,o=['<span id="YT-smsVerifyTry" class="YT-smsVerifyTry">使用短信获取</span>'].join("");I("YT-bindMobile-getMobileCode")?(q(I("YT-smsVerifyTips-noMobile"),o),B(I("YT-smsVerifyTips-noMobile"),"YT-smsVerifyTips"),b(I("YT-smsVerifyTry"),"click",e)):N(I("YT-smsVerifyTips"),"YT-smsVerifyTips")||(q(I("YT-smsVerifyTips"),o),B(I("YT-smsVerifyTips"),"YT-smsVerifyTips"),b(I("YT-smsVerifyTry"),"click",e))},removeVerifyChoose:function(){this.removeVoiceVerifySuccess(),q(I("YT-smsVerifyTips"),""),P(I("YT-smsVerifyTips"),"YT-smsVerifyTips"),q(I("YT-voiceVerifyTips"),""),P(I("YT-voiceVerifyTips"),"YT-voiceVerifyTips"),q(I("YT-smsVerifyTips-noMobile"),""),P(I("YT-smsVerifyTips-noMobile"),"YT-smsVerifyTips"),q(I("YT-voiceVerifyTips-noMobile"),""),P(I("YT-voiceVerifyTips-noMobile"),"YT-voiceVerifyTips"),ve&&(I("YT-getMobileCode")?(I("YT-getMobileCode").innerHTML="获取动态密码",I("YT-getMobileCode").setAttribute("data-name","mobileCode")):I("YT-getMobileCode02")&&(I("YT-getMobileCode02").innerHTML="获取验证码",I("YT-getMobileCode02").setAttribute("data-name","mobileCode")),I("YT-bindMobile-getMobileCode")&&(I("YT-bindMobile-getMobileCode").innerHTML="获取验证码",I("YT-bindMobile-getMobileCode").setAttribute("data-name","mobileCode")))},addVoiceVerify:function(){function e(){ve&&(I("YT-bindMobile-getMobileCode")?(I("YT-bindMobile-getMobileCode").innerHTML="获取语音验证码",I("YT-bindMobile-getMobileCode").setAttribute("data-name","voiceCode"),I("YT-voiceVerifyTips-noMobile").setAttribute("data-name","voiceCode"),q(I("YT-voiceVerifyTips-noMobile"),""),P(I("YT-voiceVerifyTips-noMobile"),"YT-voiceVerifyTips")):(I("YT-getMobileCode")?(I("YT-getMobileCode").innerHTML="获取语音动态密码",I("YT-getMobileCode").setAttribute("data-name","voiceCode")):I("YT-getMobileCode02")&&(I("YT-getMobileCode02").innerHTML="获取语音验证码",I("YT-getMobileCode02").setAttribute("data-name","voiceCode")),I("YT-voiceVerifyTips").setAttribute("data-name","voiceCode"),q(I("YT-voiceVerifyTips"),""),P(I("YT-voiceVerifyTips"),"YT-voiceVerifyTips")),i.addSmsVerify(),n("tryVoiceBtn")),Y(I("YT-voiceVerifyTry"),"click",e)}var i=this,o=['<span class="YT-noGet">未收到？</span><span id="YT-voiceVerifyTry" class="YT-voiceVerifyTry">试试语音获取</span>','<div class="YT-m-icon YT-icon-question questionIcon" id="questionIcon">&#xe9ba;</div>'].join(""),t=['<span class="YT-noGet">未收到？</span><span id="YT-voiceVerifyTryMobile" class="YT-voiceVerifyTry">试试语音获取</span>'].join("");I("YT-bindMobile-getMobileCode")?(q(I("YT-voiceVerifyTips-noMobile"),o),q(I("YT-smsVerifyTips-noMobile"),""),B(I("YT-voiceVerifyTips-noMobile"),"YT-voiceVerifyTips"),b(I("YT-voiceVerifyTry"),"click",e)):N(I("YT-voiceVerifyTips"),"YT-voiceVerifyTips")||(Ke?(q(I("YT-voiceVerifyTips"),t),b(I("YT-voiceVerifyTryMobile"),"click",function(){ve&&(i.alertH5Voice(),n("tryVoiceBtnH5"))})):(q(I("YT-voiceVerifyTips"),o),b(I("YT-voiceVerifyTry"),"click",e)),q(I("YT-smsVerifyTry"),""),B(I("YT-voiceVerifyTips"),"YT-voiceVerifyTips")),b(I("YT-bindMobile-mAccount"),"keyup",function(){var e=L(I("YT-bindMobile-mAccount"));i.isSameNumber(e)&&""!=e||(i.removeVerifyChoose(),Fe=!1,Oe=0)}),b(I("questionIcon"),"mouseover",function(){i.addVoiceVerifyTips()}),b(I("questionIcon"),"mouseout",function(){I("YT-bindMobile-getMobileCode")?(q(I("YT-voiceVerifyTipsHover-noMobile"),""),P(I("YT-voiceVerifyTipsHover-noMobile"),"YT-voiceVerifyTipsHover")):(q(I("YT-voiceVerifyTipsHover"),""),P(I("YT-voiceVerifyTipsHover"),"YT-voiceVerifyTipsHover"))})},alertH5Voice:function(){var e=this;$.mDialog.confirm({title:"提示",content:"您将收到来自0571-86756617的，电话验证码是您听到的6位数字",yesBtnText:"取消",cancelBtnText:"确认",yes:function(){$.mDialog.closeWindow(),I("YT-voiceVerifyTips").setAttribute("voice-flag","false")},cancel:function(){$.mDialog.closeWindow(),I("YT-voiceVerifyTips").setAttribute("voice-flag","true"),I("YT-voiceVerifyTips").setAttribute("data-name","voiceCode"),I("YT-getMobileCode")&&N(I("YT-getMobileCode"),"smsCode")?e.getMobileCode("YT-getMobileCode",I("YT-voiceVerifyTips").getAttribute("mobileNo"),"sms_login_bind"):I("YT-mPassport")?e.getMobileCode("YT-getMobileCode02",I("YT-voiceVerifyTips").getAttribute("mobileNo"),"register"):I("YT-mAccount")&&e.getMobileCode("YT-getMobileCode",I("YT-voiceVerifyTips").getAttribute("mobileNo"),"login"),n("sureVoiceBtn")}})},clearGetMobileCode:function(e){Me=!1,ve=!0,clearInterval(Ye),Ye=null,e&&I(e)&&("login"==he?(q(I(e),"获取动态密码"),B(I(e),"disabled")):(q(I(e),"获取验证码"),B(I(e),"disabled")))},chouseErr:function(e,i){var o=this,t=[];for(var r in Ie)t.push(Ie[r]);var n=t.length;if(He&&Ke)o.showMobileErr(t[n-1]);else{O(i);var s=t[n-1].replace(/<[^>]+>/g,"");if(e.innerText==s)return;q(e,t[n-1])}b(I("YT-existToLogin"),"click",function(){o.buildLoginDom()}),b(I("YT-toMLogin"),"click",function(){var e=L(I("YT-ytaccount")),i=L(I("YT-countryRegin"));""!=e&&"mobile"==g(e,i)&&(A(I("YT-mAccount"),e),B(I("YT-mAccount").parentNode.getElementsByTagName("label")[0],"hideholder")),setTimeout(function(){o.changeLoginType("mobile"),P(I("YT-getMobileCode"),"disabled")},200)})},showErrTips:function(e,i,o){var t=this,o=o||"YT-errorTips",r=I(o);if(r){i&&(Ie[i]=e),_(Ie)?He&&Ke?t.showMobileErr(e):(O(o),q(r,e)):t.chouseErr(r,o);var n=I("YT-notice");if(n&&He&&"tempA"==He.template&&(n.style.display="none"),He)for(var s in Ze){var a=Ze[s];for(var l in a)a[l]==e&&(Ne[s+l]?Ne[s+l]++:Ne[s+l]=1)}}},showMobileErr:function(e){if(!I("YT-errorCont")){var o=i.createElement("div");o.id="YT-errorCont",U(o,"YT-errorCont"),I("YT-errorTips").appendChild(o)}fe=setTimeout(function(){Ue||(Ve||""==I("YT-errorCont").innerHTML)&&(q(I("YT-errorCont"),e),B(I("YT-errorTips"),"showErr"),O("YT-errorTips"),Ve=!1,setTimeout(function(){P(I("YT-errorTips"),"showErr"),B(I("YT-errorTips"),"hideErr"),setTimeout(function(){q(I("YT-errorCont"),""),P(I("YT-errorTips"),"hideErr"),j("YT-errorTips"),Ve=!0},150)},1500))},100)},clearThisTips:function(e,i){var o=this,i=i||"YT-errorTips",t=I(i);if(t)if(e&&Ie[e]&&delete Ie[e],_(Ie)){Ke||(j(i),q(t,""));var r=I("YT-notice");r&&He&&"tempA"==He.template&&(r.style.display="")}else o.chouseErr(t)},cleanErrTips:function(e,o,t){Ie={};var t=t||"YT-errorTips",r=I(t);j(t),q(r,"");var e=i.forms[e];if(e)try{var n=e.getElementsByTagName("input");if(!o||"tempMobile"!=o&&"tempTlsiteMobile"!=o)for(var s=0,a=n.length;s<a;s++)if(""==n[s].getAttribute("type")||"text"==n[s].getAttribute("type")||"password"==n[s].getAttribute("type")){A(n[s],"");var l=n[s].parentNode.getElementsByTagName("label")[0];P(l,"hideholder")}}catch(c){}},checkMainSiteLogin:function(){He.checkNoLogin()},changeTitle:function(e){q(I("YT-loginFrameTitle"),e)},showPopTips:function(e){var o=this,t=i.createElement("div"),r={title:"注册",type:"success",content:"<h3>恭喜您，注册成功！</h3><p>您可以使用此账号登录优酷、土豆、来疯等优酷土豆集团旗下产品。</p>",autoClose:3,callback:function(){}};r=m(!0,r,e),t.id="YT-popErrorBox",U(t,"YT-popErrorBox");var n="success"==r.type?"&#xe611;":"&#xe610;",s='<div class="YT-errbox-wrap"><div id="YT-errboxClose" class="YT-errbox-close"></div><div class="YT-errbox-head">'+r.title+'</div><div class="YT-errbox-body"><div class="YT-errbox-icon"><i class="YT-m-icon icon-large icon-'+r.type+'">'+n+'</i></div><div class="YT-errbox-cont">'+r.content+'</div></div><div class="YT-errbox-foot"><div id="YT-autoClose"></div>';if(q(t,s),o.showPopWindow(t),b(I("YT-errboxClose"),"click",function(){t.parentNode.removeChild(t),I("YT-loginFrameshade").parentNode.removeChild(I("YT-loginFrameshade")),r.callback()}),r.autoClose){var a=r.autoClose;q(I("YT-autoClose"),'<span style="color:#f9546f;">'+a+"</span> 秒后自动关闭");var l=setInterval(function(){if(a--,!I("YT-autoClose"))return void clearInterval(l);q(I("YT-autoClose"),'<span style="color:#f9546f;">'+a+"</span> 秒后自动关闭"),a<=0&&(clearInterval(l),l=null,t.parentNode.removeChild(t),I("YT-loginFrameshade").parentNode.removeChild(I("YT-loginFrameshade")),r.callback())},1e3)}},clearPopWindow:function(){I("YT-loginFrameshade")&&I("YT-loginFrameshade").parentNode.removeChild(I("YT-loginFrameshade")),I("YT-loginFramePop")&&I("YT-loginFramePop").parentNode.removeChild(I("YT-loginFramePop")),I("YT-errorTips")&&I("YT-errorTips").parentNode.removeChild(I("YT-errorTips")),I("YT-thirdLoginBox")&&I("YT-thirdLoginBox").parentNode.removeChild(I("YT-thirdLoginBox"))},showPopWindow:function(e){this.clearPopWindow();var o,t=i.getElementsByTagName("body")[0],r=(i.documentElement.clientHeight,i.body.clientHeight,i.body.scrollTop,i.createElement("iframe"));r.src="about:blank",r.id="YT-iframeBack",r.frameBorder=0;try{iframe.document.write(""),iframe.document.clear()}catch(n){}I("YT-loginFrameshade")?o=I("YT-loginFrameshade"):(o=i.createElement("div"),o.id="YT-loginFrameshade",U(o,"YT-loginFrame-shade"),t.appendChild(o)),t.appendChild(e),e.appendChild(r),setTimeout(function(){var i=-e.clientHeight/2,o=-e.clientWidth/2;W(e.id,"marginTop",(i<-300?-300:i)+"px"),W(e.id,"marginLeft",(o<-450?-450:o)+"px"),W(e.id,"visibility","visible")},100)},setUI:function(){function e(e,i){H(e)[0]&&i&&q(H(e)[0],i)}function o(e,o){var t=i.createElement("div"),r=i.createElement("img");if(r.src=o[0],t.appendChild(r),"top"==e){t.id="YT-frameTopBanner";var n=H("YT-loginFrame-func");I("YT-loginWrap").insertBefore(t,n[0]),W("YT-frameTopBanner","position","absolute"),W("YT-frameTopBanner","top",o[1]+"px"),W("YT-frameTopBanner","left",o[2]+"px")}else"bottom"==e&&(t.id="YT-frameBottomBanner",I("YT-loginWrap").appendChild(t),W("YT-frameBottomBanner","position","absolute"),W("YT-frameBottomBanner","bottom",o[1]+"px"),W("YT-frameBottomBanner","left",o[2]+"px"))}var t=He.placeholders;if("login"==he)I("YT-ytaccount")&&"tempA"!=He.template&&I("YT-ytaccount").setAttribute("placeholder",He.passportInputWord),e("YT-l-account-tips",t.login.account),e("YT-l-password-tips",t.login.password),e("YT-l-mobile-tips",t.login.mobile),He.loginTitleWord&&q(I("login"),He.loginTitleWord),He.registerTitleWord&&q(I("toRegiste"),He.registerTitleWord),I("toRegiste")&&("false"==He.needHideRegister?I("toRegiste").style.display="none":(I("toRegiste").style.display="block",q(I("toRegiste"),He.registerTitleWord))),He.pwdLoginTitleWord&&q(I("YT-showNormalLogin"),He.pwdLoginTitleWord),He.smsLoginTitleWord&&q(I("YT-showMobileLogin"),He.smsLoginTitleWord),He.isQRlogin&&q(I("YT-QRWordTips"),He.qrMsg),He.loginSubmitWord&&(q(I("YT-nloginSubmit"),He.loginSubmitWord),q(I("YT-mloginSubmit"),He.loginSubmitWord)),He.loginSubmitStyle&&(I("YT-nloginSubmit")&&(I("YT-nloginSubmit").style.backgroundColor=He.loginSubmitStyle),I("YT-mloginSubmit")&&(I("YT-mloginSubmit").style.backgroundColor=He.loginSubmitStyle)),He.loginModel.length<2&&(I("YT-tab-nav")&&(I("YT-tab-nav").style.display="none"),"normal"==He.loginModel[0]?q(I("login"),He.pwdLoginTitleWord):"mobile"==He.loginModel[0]&&q(I("login"),He.smsLoginTitleWord)),I("YT-forgetPsd")&&He.changePsdLink&&(F(I("YT-forgetPsd"),"href",He.changePsdLink),q(I("YT-forgetPsd"),He.changePsdName));else if("reg"==he){e("YT-r-eAccount-tips",t.reg.emailReg.account),e("YT-r-ePassword-tips",t.reg.emailReg.password),e("YT-r-eRepeatPsd-tips",t.reg.emailReg.repeatPassword),e("YT-r-eMobile-tips",t.reg.emailReg.mobile),e("YT-r-eValidate-tips",t.reg.emailReg.validate),e("YT-r-mAccount-tips",t.reg.mobileReg.account),e("YT-r-mPassword-tips",t.reg.mobileReg.password),e("YT-r-mRepeatPsd-tips",t.reg.mobileReg.repeatPassword),e("YT-r-mValidate-tips",t.reg.mobileReg.validate);var r="";He.regRules[2]&&(r=He.regRules[2].indexOf("//")>-1?'和<a href="'+He.regRules[2]+'" target="_blank">版权声明</a>':'和<a href="'+He.regRules[3]+'" target="_blank">'+He.regRules[2]+"</a>"),I("YT-rulesBody")&&q(I("YT-rulesBody"),'<a href="'+He.regRules[1]+'" target="_blank">'+He.regRules[0]+"</a>"+r),He.registerTitleWord&&q(I("toRegiste"),He.registerTitleWord),He.loginTitleWord&&q(I("toLogin"),He.loginTitleWord),""!=He.needHideTitle&&"false"==He.needHideTitle&&I("YT-wap-header")&&(I("YT-wap-header").style.display="none"),He.registerSubmitWord&&q(I("YT-mRegSubmit"),He.registerSubmitWord),I("YT-mRegSubmit")&&He.registerSubmitStyle&&(I("YT-mRegSubmit").style.backgroundColor=He.registerSubmitStyle)}var n=He.bannerTopImg;n&&n instanceof Array&&o("top",n);var s=He.bannerBottomImg;s&&s instanceof Array&&o("bottom",s),setTimeout(function(){h("YT-loginWrap")},100)},loadStyleSheet:function(){var e=i.getElementsByTagName("head")[0]||i.body,o=He.padding,t="";o&&o instanceof Array&&o.length>0&&(t=2==o.length?".YT-loginWrap."+He.size+"{ padding:"+o[0]+"px "+o[1]+"px;}":4==o.length?".YT-loginWrap."+He.size+"{ padding:"+o[0]+"px "+o[1]+"px "+o[2]+"px "+o[3]+"px;}":".YT-loginWrap."+He.size+"{ padding:"+o[0]+"px;}");var r=/url\((\S*)\)/,n=He.bgThemes.match(r);if(n){(new Image).src=n[1]}var s=(C(we[1],.4),C(we[1],.7),we[1]),a=we[0],l=".YT-loginWrap a:hover,.YT-third-loginbox a:hover,.YT-loginWrap .YT-change-logintype:hover,.YT-loginWrap .YT-change-logintype i,.YT-loginWrap .YT-loginFrame-foot .YT-registe-btn:hover,.YT-loginWrap .YT-loginFrame-body .YT-qr-login .YT-qr-func a:hover{color:#"+a+"}.YT-loginWrap .YT-form .YT-form-btn,.YT-third-loginbox .YT-no-bing-submit,.YT-third-loginbox .YT-thirdbox-body .YT-form .YT-form-btn,.YT-loginWrap .YT-qrLogin .YT-qr-tips-btn,.YT-loginWrap .YT-loginFrame-body .YT-qr-login .YT-qrImg-box .YT-invalid-tips .YT-form-btn,.YT-loginWrap .YT-qrLogin .YT-qr-tips-btn:hover,.YT-loginWrap .YT-form .YT-psd-strong{background-color:#"+a+"}.YT-loginWrap .YT-frame-close{color:#"+a+"}.YT-loginWrap .YT-change-logintype,.YT-loginWrap .YT-loginFrame-body .YT-qr-login .YT-qrImg-box{border-color:#"+s+"}.YT-loginWrap{background:"+He.bgThemes+" !important;color:"+He.fontColor+" !important;}.YT-loginWrap .YT-noGet,.YT-loginWrap .disabled-color{color:"+He.fontColor+" !important;}.YT-loginWrap a{color:"+He.linkColor+" !important;}"+t;Ke&&(l=".YT-loginWrap .YT-tabnav-list li.active{color:#"+a+"; border-bottom:2px solid #"+a+"}.YT-loginWrap .YT-form .YT-form-btn,.YT-loginWrap .YT-switch-check.checked{background-color:#"+a+"}.YT-loginWrap .YT-switch-check.checked:before{ border-left: 6px solid #"+a+"}.YT-loginWrap .YT-noGet,.YT-loginWrap .disabled-color{color:"+He.fontColor+" !important;}.YT-loginWrap .YT-check-label.checked:before{color: #"+a+"}");var c,d=e.getElementsByTagName("style");if(0==d.length?(c=i.createElement("style"),e.appendChild(c)):c=d[0],c.type="text/css",c.media="screen",c.styleSheet?c.styleSheet.cssText+=l:c.innerHTML+=l,!i.getElementById("YT-loginFrameCss")){var T=i.createElement("link");T.id="YT-loginFrameCss",T.rel="stylesheet",T.href=Ke?"https://account.youku.com/static-resources/css/frame_mobile.css":"mini"==He.size?"https://account.youku.com/static-resources/css/frame_mini.css":"https://account.youku.com/static-resources/css/frame_common.css";var u=e.getElementsByTagName("style");u.length>0?e.insertBefore(T,u[0]):e.appendChild(T)}},sendData:function(){},closeFrame:function(e){var i=this;i.clearPopWindow(),i.sendData(),clearInterval(Pe),Pe=null,clearInterval(be),be=null,clearInterval(Ye),Ye=null,e&&"function"==typeof e&&e()}},e.loginFrame=e.loginFrame||r,e.riskConnect=e.riskConnect||s,e.thirdConnect=e.thirdConnect||a,e.thirdPartInit=e.thirdPartInit||l,e.qrLoginFrame=e.qrLoginFrame||c;var ii=0,oi={messages:{required:" %s 必填",matches:" %s 与 %s 不相同。",cant_matches:"%s 不能与 %s 相同",defaults:"The %s field is still set to default, please change.",valid_email:" %s 必须是邮箱地址。",valid_mobile:" %s 必须是手机号。",min_length:"长度过小。",max_length:"长度过大。",numeric:" %s 只能是数字。",integer:" %s 只能是整数。",decimal:" %s 只能是十进制数。",valid_psdStrong:" %s 强度不够",valid_psd_n_s_spe:" s% 不能为纯数字、纯字母或纯字符"},callback:function(e){}},ti=/^(.+?)\[(.+)\]$/,ri=/^[0-9]+$/,ni=/^\-?[0-9]+$/,si=/^\-?[0-9]*\.?[0-9]+$/,ai=function(e,i,o){this.callback=o||oi.callback,this.errors=[],this.fields={},this.form=this._formByNameOrNode(e)||{},this.messages={},this.handlers={},this.conditionals={};for(var t=0,r=i.length;t<r;t++){var n=i[t];if((n.name||n.names)&&n.rules)if(n.names)for(var s=0,a=n.names.length;s<a;s++)this._addField(n,n.names[s]);else this._addField(n,n.name)}this.form.onsubmit;this.form.onsubmit=function(){return!1}},li=function(e,i){var o;{if(!(e.length>0)||"radio"!==e[0].type&&"checkbox"!==e[0].type)return e[i];for(o=0,elementLength=e.length;o<elementLength;o++)if(e[o].checked)return e[o][i]}};ai.prototype.setMessage=function(e,i){return this.messages[e]=i,this},ai.prototype.registerCallback=function(e,i){return e&&"string"==typeof e&&i&&"function"==typeof i&&(this.handlers[e]=i),this},ai.prototype.registerConditional=function(e,i){return e&&"string"==typeof e&&i&&"function"==typeof i&&(this.conditionals[e]=i),this},ai.prototype._formByNameOrNode=function(e){return"object"==typeof e?e:i.forms[e]},ai.prototype._addField=function(e,i){this.fields[i]={name:i,display:e.display||i,rules:e.rules,depends:e.depends,errorMsg:e.errorMsg,id:null,element:null,type:null,value:null,checked:null}},ai.prototype._validateForm=function(e){this.errors=[];for(var i in this.fields)if(this.fields.hasOwnProperty(i)){var o=this.fields[i]||{},t=this.form[o.name];t&&void 0!==t&&(o.id=li(t,"id"),o.element=t,o.type=t.length>0?t[0].type:t.type,o.value=li(t,"value"),o.checked=li(t,"checked"),o.depends&&"function"==typeof o.depends?o.depends.call(this,o)&&this._validateField(o):o.depends&&"string"==typeof o.depends&&this.conditionals[o.depends]?this.conditionals[o.depends].call(this,o)&&this._validateField(o):this._validateField(o))}return"function"==typeof this.callback&&this.callback(this.errors,e),this.errors.length,!0},ai.prototype._validateField=function(e){for(var i=e.rules.split("|"),o=e.rules.indexOf("required"),t=!e.value||""===e.value||void 0===e.value,r=(e.ajaxCheck,0),n=i.length;r<n;r++){var s=i[r],a=null,l=!1,c=ti.exec(s);if((-1!==o||-1!==s.indexOf("!callback_")||!t)&&(c&&(s=c[1],a=c[2]),"!"===s.charAt(0)&&(s=s.substring(1,s.length)),"function"==typeof this._hooks[s]?this._hooks[s].apply(this,[e,a])||(l=!0):"callback_"===s.substring(0,9)&&(s=s.substring(9,s.length),"function"==typeof this.handlers[s]&&!1===this.handlers[s].apply(this,[e.value,a,e])&&(l=!0)),l)){var d=this.messages[e.name+"."+s]||this.messages[s]||oi.messages[s],T="An error has occurred with the "+e.display+" field.";d&&(T=d.replace("%s",e.display),a&&(T=T.replace("%s",this.fields[a]?this.fields[a].display:a)),e.errorMsg&&(T=e.errorMsg[s])),this.errors.push({id:e.id,element:e.element,name:e.name,message:T,rule:s});break}}},ai.prototype._hooks={required:function(e){var i=e.value;return"checkbox"===e.type||"radio"===e.type?!0===e.checked:null!==i&&""!==i},defaults:function(e,i){return e.value!==i},matches:function(e,i){var o=this.form[i];return!!o&&e.value===o.value},cant_matches:function(e,i){var o=this.form[i];return!o||e.value!==o.value},valid_psdStrong:function(e){return ze.psdtest.test(e.value)},valid_psd_n_s_spe:function(e){return!(ze.numberReg.test(e.value)||ze.codeReg.test(e.value)||ze.specialReg.test(e.value))},valid_email:function(e){return ze.emailReg.test(e.value)},valid_mobile:function(e,o){var t="CN",r=i.getElementById("YT-countryRegin");return r&&(t=r.value),new RegExp(ze.allMobileRegExp[t]).test(e.value)},min_length:function(e,i){return!!ri.test(i)&&e.value.length>=parseInt(i,10)},max_length:function(e,i){return!!ri.test(i)&&e.value.length<=parseInt(i,10)},numeric:function(e){return ri.test(e.value)},integer:function(e){return ni.test(e.value)},decimal:function(e){return si.test(e.value)}},e.FormValidator=ai}(window,document);