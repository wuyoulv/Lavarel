/**
 * @modified $Author: 牟少峰 $
 * @version $Rev: 3c9e50e557fdd35741c5bde3344edca7dd43d4ad $
 */
!function(e,t,n){t.config({enable_ozma:true});n("page/find/custom/custom",["tui/view","tui/net","module/domain","tui/art","tui/cookie","module/login/login"],function(t,n,i,r,a,o,s,l){l.init=function(){var t=a("__ysuid");o.one("checklogin",function(n){if(n)url="http://ykrec.youku.com/pdrawer/packed/list.json?apptype=1&pg=8&module=20&cate=999&picSize=1&uid="+o.uid()+"&guid="+t+"&pn=0&pl=5&il=9";else url="http://ykrec.youku.com/pdrawer/packed/list.json?apptype=1&pg=8&module=20&cate=999&picSize=1&guid="+t+"&pn=0&pl=5&il=9";e.ajax({type:"get",url:url,dataType:"jsonp",jsonp:"callback",data:"jsonp",timeout:1e4,success:function(t){var n='<% data.forEach(function(t, i) { %>\n<div class="mod mod-new" name="m_pos" id="m_<%=t.id%>">\n<div class="h">\n<h3><%=t.drawerName%></h3><span class="tips"><%=t.recReason%></span>\n</div>\n<%if(t.layout == 3 || t.layout == 5){%>\n<div class="c">\n<% t.videos.forEach(function(v, n) { %>\n<div class="<% if(n==0){%>yk-col8<%}else if(n==7 || n==8){%>yk-col4 colx<%}else{%>yk-col4<%}%>">\n<div class="<%if(n==0){%>yk-pack p-list p-large<%}else if(n>=1 && n<=4){%>yk-pack p-list mb20<%}else{%>yk-pack p-list<%}%>">\n<div class="p-thumb"><a href="<%=v.playLink%>" title="<%=v.title%>" recClickLogUrl="<%=v.recClickLogUrl%>" target="_blank"></a><i class="bg"></i><img class="quic" src="<%=v.picUrl%>"></div>\n<ul class="p-info pos-bottom">\n<li class="status hover-hide"><span class="p-time"><i class="ibg"></i><span><%=getTimeModel(v.totalTime)%> </span></span></li>\n</ul>\n<ul class="info-list">\n<li class="title short-title"><a href="<%=v.playLink%>" title="<%=v.title%>" recClickLogUrl="<%=v.recClickLogUrl%>" target="_blank"><%=v.title%></a></li>\n<li><span><%=v.playAmount%>万次播放</span><span><%=v.commentCount%>次评论</span></li>\n</ul>\n</div>\n</div>\n<% }); %>\n</div>\n<%}else if(t.layout == 1 || t.layout == 6 || !t.layout){%>\n<div class="c">\n<% t.videos.forEach(function(v, n) {%>\n<%if(n <= 5){%>\n<div class="yk-col4 <% if(n == 5){%> colx <%}%>">\n<div class="yk-pack p-list">\n<div class="p-thumb"><a href="<%=v.playLink%>" title="<%=v.title%>" recClickLogUrl="<%=v.recClickLogUrl%>" target="_blank"></a><i class="bg"></i><img class="quic" src="<%=v.picUrl%>"></div>\n<ul class="p-info pos-bottom">\n<li class="status hover-hide"><span class="p-time hover-hide"><i class="ibg"></i><span><%=getTimeModel(v.totalTime)%></span></span></li>\n</ul>\n<ul class="info-list">\n<li class="title short-title"><a href="<%=v.playLink%>" title="<%=v.title%>" recClickLogUrl="<%=v.recClickLogUrl%>" target="_blank"><%=v.title%></a></li>\n<li><span><%=v.playAmount%>万次播放</span><span><%=v.commentCount%>次评论</span></li>\n</ul>\n</div>\n</div>\n<%}%>\n<%})%>\n</div>\n<%}else if(t.layout == 2){%>\n<div class="c">\n<div class="yk-row yk-row-sm">\n<div class="modPSlide mod_pslide">\n<ul class="panel" >\n<% t.videos.forEach(function(v, n) { %>\n<%if( n <= 5){%>\n<li class="yk-col4 <% if(n==5){%>colx<%}%>">\n<div class="yk-pack pack-film">\n<div class="p-thumb"><a href="//v.youku.com/v_nextstage/id_<%=v.codeId%>" title="<%=v.title%>" recClickLogUrl=" <%=v.recClickLogUrl%>" target="_blank"></a><i class="bg"></i><img class="quic" src="<%=v.vPicUrl%>"></div>\n<ul class="p-info pos-bottom">\n<li class="status hover-hide"><span class="p-time"><i class="ibg"></i><%if(v.summary!=""){%><span><%=v.summary%></span><%}%></span></li>\n</ul>\n<ul class="info-list">\n<li class="title short-title"><a href="//v.youku.com/v_nextstage/id_<%=v.codeId%>" recClickLogUrl="<%=v.recClickLogUrl%>" target="_blank"><%=v.title%></a></li>\n<li class="subtitle"><span><%=v.subTitle%></span></li>\n</ul>\n</div>\n</li>\n<%}%>\n<%})%>\n</ul>\n</div>\n</div>\n</div>\n<%}%>\n</div>\n<% }); %>\n';r.helper("getTimeModel",function(e){var t,n,i,r=[];t=Math.floor(e/3600);e%=3600;n=Math.floor(e/60);i=parseInt(e%60);t>0?r.push(t):"";n>9?r.push(n):r.push("0"+n);i>9?r.push(i):r.push("0"+i);return r.join(":")});html=r.compile(n)({data:t.data});e("#custom").append(html)}})});e(document).on("click","#custom .yk-pack",function(e){var t=e.target.getAttribute("recClickLogUrl");n.getRequest(t)})}});n("module/stat/cmslog",["tui/net","module/global","module/stat/common","module/login/login"],function(t,n,i,r){var a={vReg:/^\/\/v\.youku\.com\/v_show\/id_([^\.]+?)(?:_\w*)?\.html/i,sReg:/\/\/www\.youku\.com\/show_page\/id_z([^\.]+)\.html/,uReg:/\/\/(i|u)\.youku\.com\/(u|user_show)\/(id_)?([^\.\?]+)/,repLogIds:{},asyModuleIds:[],logUrl:"//gm.mmstat.com/yt/show.index.module",clickLogUrl:"//gm.mmstat.com/yt/click.index.module",logParams:"",init:function(){var t=this,n;e.merge(e("#personList"),e(".cmsmod")).each(function(n,i){t.asyModuleIds.push(e(i).closest("[name=m_pos]").attr("id"))});t.initParam();t.mshow();e(window).scroll(function(){n&&clearTimeout(n);n=setTimeout(function(){t.mshow()},300)});e(document.body).on("click",function(e){var n=e.target||e.srcElement;t.reportClickLog(n)});e(document).on("domChanged",function(){t.mshow()})},initParam:function(){var e=[],t=this._getSpm();e.push("pvid="+n.pvid);e.push("did="+this._getUa());t&&e.push("SPM="+t);this.logParams=e.join("&")},mshow:function(){var t=this;e(".yk-content").find("div[name=m_pos][modshow!=1]").each(function(n,i){var i=e(i);if(!t.checkPosition(i))return;if(0!=i.find(".modSwitch").length){i=i.attr("modshow",1).find("[name=m_pos]:visible");if("1"==i.attr("modshow"))return;var r=i.attr("id")}else var r=i.attr("id");if(!r)return true;a.getDataIds(r)})},checkPosition:function(t){if(!t.is(":visible")||t.attr("modshow")||!t.height()||e(window).height()+e(document).scrollTop()<t.offset().top+t.height()/2)return false;return true},getDataIds:function(t){var n=[],i=this,r=e("#"+t);if(0!=r.find("div[name='m_pos']").length){i.reportShowLog(t,n,r);return false}var a=0!=r.find(".user-list").length?r.find(".user-vertical dt a"):r.find(".yk-pack .p-thumb> a");if(a.length<=0&&e.inArray(t,i.asyModuleIds)!=-1)return false;else{n=i.makeParam(a);i.reportShowLog(t,n,r)}},makeParam:function(t){var n=[],i=[],r=[],a=[],o,s,l=this;t.each(function(e,t){if(t&&t.href)if((s=t.href.match(l.vReg))&&s[1]){if(o=l._decodeVid(s[1]))i.push(o)}else if((s=t.href.match(l.sReg))&&s[1])r.push(s[1]);else if((s=t.href.match(l.uReg))&&s[s.length-1])if(o=l._decodeVid(s[s.length-1]))a.push(o)});if((i=e.unique(i))&&i.length>0)n.push("vids="+i.join(","));if((r=e.unique(r))&&r.length>0)n.push("sids="+r.join(","));if((a=e.unique(a))&&a.length>0)n.push("uids="+a.join(","));return n},reportShowLog:function(t,n,i){i.attr("modshow","1");if(this.repLogIds[t])return;this.repLogIds[t]=1;var r=e.inArray(t,this.asyModuleIds);if(i.data("cmsext"))n.push("ext="+i.data("cmsext"));var a=n.join("&");this.reportLog(t.substr(2),"show",a)},reportClickLog:function(t){var n=this,i,r,a,o=[],s,l;var u=e(t).closest("[name=m_pos]").attr("id");var c={A:1,INPUT:1,BUTTON:1};if(!u)return false;if(c[t.tagName]?c[t.tagName]:c[t.parentNode.tagName]){if(c[t.parentNode.tagName])t=t.parentNode;if(e(t).attr("data-id"))a=e(t).attr("data-id");if((s=t.href.match(n.vReg))&&(l=n._decodeVid(s[1])))i=l;else if((s=t.href.match(n.sReg))&&s[1])r=s[1];else if((s=t.href.match(n.uReg))&&(l=n._decodeVid(s[s.length-1])))a=l}else return;if(i)o.push("vid="+i);if(r)o.push("sid="+r);if(a)o.push("uid="+a);var f="";if(o.length>0)f+=o.join("&");this.reportLog(u.substr(2),"click",f)},reportLog:function(e,n,i){if(!e)return;var r="click"==n?this.clickLogUrl:this.logUrl;var a=this._getModuleName(e);if(a)r+="?mid="+e+"&"+this.logParams+"&mname="+a+"&etime="+(new Date).getTime();else r+="?mid="+e+"&"+this.logParams+"&etime="+(new Date).getTime();i=i||0;if(i)r+="&"+i;t.getRequest(r)},_getUa:function(){if(navigator.userAgent.indexOf("iPad")>0)return 2;else return 1},_getSpm:function(){if("undefined"!==typeof pageIdNum)return e("[name=data-spm]").attr("content")+"."+(2e7+parseInt(pageIdNum));else return""},_getModuleName:function(t){var n=e("#m_"+t),i=n.parent();if(i.hasClass("tab-c"))return this._getTabTitle(i);else return this._getModuleTitle(n)},_getTabTitle:function(t){var n=t.index(),i=e(".t_tab",t.parent().prev()),r=e("a",i);return r.eq(n).html()},_getModuleTitle:function(t){var n=e("h3",t).eq(0),i=e("h2",t).eq(0);if(!(n.length||i.length))return"";var r=n.length?n:i;if(r.closest("[name=m_pos]").attr("id")!=t.attr("id"))return"";var a=e("a",r),o=e("img",r);if(o.length)return o.attr("title");if(a.length)return a.html();return r.html()},_decodeVid:function(e){var t=this;if(!e)return false;return t._decode64(e.toString().substr(1))>>2},_decode64:function(e){if(!e)return"";var t="ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789+/"+"=";var n="";var i,r,a;var o,s,l,u;var c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{o=t.indexOf(e.charAt(c++));s=t.indexOf(e.charAt(c++));l=t.indexOf(e.charAt(c++));u=t.indexOf(e.charAt(c++));i=o<<2|s>>4;r=(15&s)<<4|l>>2;a=(3&l)<<6|u;n+=String.fromCharCode(i);if(64!==l)n+=String.fromCharCode(r);if(64!==u)n+=String.fromCharCode(a)}while(c<e.length);return this._U8_16(n)},_U8_16:function(e){var t,n,i;var r,a;var o=[];n=e.length;t=0;while(t<n){i=e.charCodeAt(t++);switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o.push(e.charAt(t-1));break;case 12:case 13:r=e.charCodeAt(t++);o.push(String.fromCharCode((31&i)<<6|63&r));break;case 14:r=e.charCodeAt(t++);a=e.charCodeAt(t++);o.push(String.fromCharCode((15&i)<<12|(63&r)<<6|(63&a)<<0))}}return o.join("")}};return a});n("page/find/main/model",["tui/event","tui/net","module/login/login"],function(t,n,i){var r=t.extend({initialize:function(){var e=this;r.superClass.initialize.call(e);this.cookie_id=i.guid();e.op={callbackName:"callback",charset:"utf-8"};e.config={recommendNumber:10,anonymousRecommendNumber:10,req_id:"",session:e.randomStr(3),stime:0,hasNoData:false,maxRefreshCount:3}},getRecommendData:function(){var e=this,t,r=e.config;if(i.isLogin())t="//ykrec.youku.com/find/packed/list.json?apptype=1&pg=23&module=10&pl="+r.recommendNumber+"&picSize=1&session="+r.session+"&uid="+i.uid()+"&stime="+r.stime;else t="//ykrec.youku.com/find/packed/list.json?apptype=1&pg=23&module=10&pl="+r.anonymousRecommendNumber+"&picSize=1&session="+r.session+"&stime="+r.stime;n.getJSON(t,{guid:e.cookie_id},function(t){var n=t.data;e.config.req_id=t.req_id;e.config.hasNoData=t.hasNoData;e.config.stime++;if("undefined"==typeof n||n.length<r.recommendNumber)e.trigger("recommend:none");else e.trigger("recommend:success",[n])},e.op)},getOneData:function(t,r){var a=this,o;var s=a.config;var l={};if(t)l=e.extend(t,{guid:a.cookie_id,fb_reqId:a.config.req_id,fb_type:1});else a.trigger("recommendOne:none",{vid:t.fb_id});if(i.isLogin())o="//ykrec.youku.com/find/packed/list.json?apptype=1&pg=23&module=10&pl=1&picSize=1&session="+s.session+"&uid="+i.uid()+"&stime="+s.stime;else o="//ykrec.youku.com/find/packed/list.json?apptype=1&pg=23&module=10&pl=1&picSize=1&session="+s.session+"&stime="+s.stime;n.getJSON(o,l,function(e){var n=e.data;a.config.req_id=e.req_id;a.config.hasNoData=e.hasNoData;a.config.stime++;if("undefined"==typeof n||0==n.length)a.trigger("recommendOne:none",{vid:t.fb_id});else a.trigger("recommendOne:success",{data:n,vid:t.fb_id})},a.op)},randomStr:function(e){var t="0123456789qwertyuioplkjhgfdsazxcvbnm";var n="";var i=(new Date).getTime();for(var r=0;r<e;r++)n+=t.charAt(Math.ceil(1e8*Math.random())%t.length);return i+n}});return r});n("page/find/main/view/recommend",["tui/net","module/login/login","tui/view","tui/art","tui/util/num","tui/util/date","page/find/main/model","tui/event","module/stat/cmslog"],function(t,n,i,r,a,o,s,l,u){return i.extend({el:e("#ykRecommend"),video:"",mapData:{},hasDrawback:false,timer:{},events:{"click .feedback-btns a":"handleFeedback","click .rec-drawback":"handleDrawback","click .p-thumb a":"recClickLog","click .info-list a":"recClickLog","click .p-close":"removeDom","click #rec-login":"login"},initialize:function(){var t=this;this.parent=e(".yk-recommend-wrap");this.mod=this.$el.closest("[name=m_pos]");this.recData=[];this.data=new s;this.config=this.data.config;this.data.bind("recommend:success",this.renderREC.bind(this));this.data.bind("recommend:none",this.dataNone.bind(this));this.data.bind("recommendOne:success",this.renderRecOne.bind(this));this.data.bind("recommendOne:none",this.oneDataNone.bind(this));t.data["getRecommendData"].call(t.data);this.recEvent=new l;if(0!=e(".yk-rec-refresh").length)e(".yk-rec-refresh").click(function(){t.refreshDom.call(t)});e("#rec-login").bind("click",function(){t.login.call(t)});e(document).bind("click",function(t){var n=t.target;if(e(n).hasClass("p-close")){var i=e(n).closest(".yk-pack").find(".feedback-cover");e(".feedback-cover:visible .deleting:hidden").parent().not(i).hide();e(".p-close:hidden").not(n).css("visibility","visible");i=null;return}var r=e(n).closest(".feedback-cover"),a=e(".feedback-cover:visible .deleting:hidden");if(0!=r.length)return;if(0!=a.length){a.parent().hide();e(".p-close:hidden").css("visibility","visible")}});this.recEvent.bind("refresh:success",function(e){var i=(t.data.cookie_id||"")+"||"+(t.config.req_id||"")+"||"+(n.uid()||"");t.mod.attr("data-cmsext",i);if(t.config.stime>1)t.reportCmsLog();else u.mshow()})},reportCmsLog:function(){var t=e("#ykRecommend").find(".yk-pack .p-thumb > a"),n=0==t.length?[]:u.makeParam(t);n.push("ext="+this.mod.attr("data-cmsext"));u.reportLog(this.mod.attr("id").substr(2),"show",n.join("&"))},sendShowLog:function(e){var i="//r.l.youku.com/recikupushshow?",r="";for(var a=0;a<e.length;a++){var o=e[a],s=[];s.push(o.id,o.type,o.dma,o.algInfo);r+=s.join("_")+","}r=r.substr(0,r.length-1);var l=i+"cookie_id="+this.data.cookie_id+"&apptype=1&pg=23&module=10&abver=A&ord=0&req_id="+this.config.req_id+"&showlist="+r;if(n.uid())l+="&uid="+n.uid();l=decodeURIComponent(l);t.getRequest(l)},renderREC:function(e){this.recData=e;this.renderData(e)},renderRecOne:function(t){var n=t.vid;var i=e("#ykRecommend .yk-pack[data-vid="+n+"]");if(this.hasDrawback||0==i.find(".rec-drawback").length)return;var r=t.data[0];var s='<div class="p-thumb"> <a href="'+r.playLink+'" title="'+r.title+'" target="new"></a><i class="bg"></i><img class="quic" src="'+r.picUrl+'"><i class="p-close"></i></div><ul class="p-info pos-bottom"><li class="status"> <span class="p-time hover-hide"> <i class="ibg"></i> <span>'+o.beautyTime(r.totalTime,false)+'</span> </span> </li></ul><ul class="info-list"> <li class="title"> <a href="'+r.playLink+'" target="_blank">'+r.title+"</a> </li> <li> <span >"+a.field(r.playAmount)+"次播放</span> <span>"+a.field(r.commentCount)+'次评论</span> </li> </ul><div class="feedback-cover"><div class="feedback-content"><i class="feedback-bg"></i><p>可以告诉小酷不喜欢的原因吗？</p><div class="feedback-btns" fblog="'+r.recFeedbackLogUrl+'" ><a href="javascript:void(0)" class="blue" >猜的不准</a><a href="javascript:void(0)" class="gray">举报内容</a></div></div><div class="deleting"><p><span class="deleting-img"></span> <br/>正在删除...优化算法中</p><a href="javascript:;" class="rec-drawback">撤销</a> </div></div>';i.attr("data-vid",r.id).attr("log",r.recClickLogUrl).attr("loghjlj",r.recClickLogUrlHJLJ).html(s)},renderData:function(t){var i='<% data.forEach(function(t, i){ %>\n<% if (config.loginStatus==true) { %>\n<% var module=1 %>\n<% }else { %>\n<% var module=3 %>\n<% } %>\n<%log=encodeURIComponent(t.recClickLogUrl)%>\n<%feedbackLog=encodeURIComponent(t.recFeedbackLogUrl)%>\n<% if (i%2==0) { %>\n<div class="yk-col4 <%if (i==8){%>  colx  <%}%>">\n<% } %>\n<div class="yk-pack p-list <% if(i%2==0){%> mb20 <%}%>" data-vid="<%=t.id%>" log="<%=log%>">\n<div class="p-thumb">\n<a href="<%=t.playLink%>" title="<%=t.title%>" target="_blank"></a>\n<i class="bg"></i>\n<img class="quic" src="<%=t.picUrl%>">\n<i class="p-close"></i>\n</div>\n<ul class="p-info pos-bottom">\n<li class="status">\n<span class="p-time hover-hide">\n<i class="ibg"></i>\n<span><%=sec(t.totalTime,false)%></span>\n</span>\n</li>\n</ul>\n<ul class="info-list">\n<li class="title ">\n<a href="<%=t.playLink%>" target="_blank"><%=t.title%></a>\n</li>\n<li>\n<span><%=num(t.playAmount)%>次播放</span>\n<span><%=num(t.commentCount)%>次评论</span>\n</li>\n</ul>\n<div class="feedback-cover">\n<div class="feedback-content">\n<i class="feedback-bg"></i>\n<p>可以告诉小酷不喜欢的原因吗？</p>\n<div class="feedback-btns" fblog="<%=feedbackLog%>">\n<a href="javascript:void(0)" class="blue">猜的不准</a>\n<a href="javascript:void(0)" class="gray">举报内容</a>\n</div>\n</div>\n<div class=\'deleting\'><p><span class="deleting-img"></span> <br/>正在删除...优化算法中</p><a href=\'javascript:;\'\nclass=\'rec-drawback\'>撤销</a>\n</div>\n</div>\n</div>\n<% if (i%2==1){ %>\n</div>\n<% } %>\n<% }); %>\n',s=this,l=r.compile(i)({data:t,num:a.field,sec:o.beautyTime,encodeURIComponent:encodeURIComponent,config:this.config}),u=e("#ykRecommend");if(0!=u.find(".yk-row").length){u.removeClass("ajax-loading");u.find(".yk-row").empty().append(l)}else{if(n.isLogin())s.parent.find(".tips").html("看得越多，推荐的内容越符合你的口味哟~");var c="<div class='yk-row'>"+l+"</div>";u.removeClass("ajax-loading").append(c)}this.parent.css("display","block");this.recEvent.trigger("refresh:success",[t])},dataNone:function(){var t=e("#ykRecommend"),n=t.closest(".mod");t.removeClass("ajax-loading").addClass("ajax-none");t.empty().append("<p>去<a href='//faxian.youku.com'>发现</a> 更多精彩吧</p>");e(".yk-rec-refresh").css("display","none");if(!n.is(":visible"))n.css("display","block")},oneDataNone:function(t){var n=t.vid||t;var i=e("#ykRecommend .yk-pack[data-vid="+n+"]");i.find(".deleting p").html("<div style='padding-top:27px'>&#40; ￣へ￣ &#41;<br/><br/>真的木有了哦~</div>");i.find(".deleting a").remove()},removeDom:function(t){var n=this,i=e(t.currentTarget),r=i.closest(".yk-pack").find(".feedback-cover");r.css("display","block");i.css("visibility","hidden")},refreshDom:function(){var t=this;e("#ykRecommend .yk-row").empty();e("#ykRecommend").addClass("ajax-loading");t.timer={};if("true"==t.config.hasNoData)var n=setTimeout(function(){t.dataNone();clearTimeout(n)},300);else t.data["getRecommendData"].call(t.data)},handleFeedback:function(n){n.preventDefault();var i=this,r=e(n.currentTarget),a={},o=r.parents(".yk-pack"),s=o.attr("data-vid");o.find(".p-close").css("visibility","visible");if(i.timer[s])clearTimeout(i.timer[s]);i.hasDrawback=false;o.find(".info-list").css("visibility","hidden");o.find(".deleting").fadeIn(500,function(){a.fb_id=s;a.fb_atype=r.hasClass("blue")?3:4;i.timer[s]=setTimeout(function(){clearTimeout(i.timer[s]);delete i.timer[s];if(i.hasDrawback)return;else{o.find(".deleting a").addClass("disabled");var e=decodeURIComponent(r.parent().attr("fblog"));t.getRequest(e+"&type="+a.fb_atype);if("true"==i.config.hasNoData)var n=setTimeout(function(){i.oneDataNone(s);clearTimeout(n)},300);else i.data["getOneData"].call(i.data,a)}},2e3)})},handleDrawback:function(t){if(e(t.currentTarget).hasClass("disabled"))return;var n=this,i=e(t.currentTarget).closest(".yk-pack"),r=i.find(".deleting"),a=i.attr("data-vid"),o=i.find(".info-list");n.hasDrawback=true;r.parent().hide();r.css("display","none");o.css("visibility","visible");if(n.timer[a])clearTimeout(n.timer[a])},recClickLog:function(n){var i=e(n.currentTarget).closest(".yk-pack").attr("log"),i=decodeURIComponent(i);t.getRequest(i)},login:function(){n.login(function(){window.location.reload()})}})});n("page/find/main/view/fixmod",["tui/view","tui/art","tui/util/num"],function(t,n,i){var r=e(window);var a=t.extend({el:e("#FixMod"),initialize:function(t){var n=this,i;a.superClass.initialize.call(n);this.mods=e(".mod-fix");this.modPos=[];this.curIndex=-1;this.clickEvent=false;n.check();this.render();this.setCenter();r.scroll(function(){if(!n.clickEvent)n.initStatus()});r.bind("scroll resize",function(){i&&clearTimeout(i);i=setTimeout(function(){n.check.call(n)},100)})},events:{"click li":"goIndex"},render:function(){var t,n,i="";t=this;e.each(this.mods,function(t,n){i+='<li class="gray" data-stat-role="ck"><i class="fix-tip">'+e(n).attr("title")+'</i><img  src="'+e(n).attr("src")+'"/></li>'});this.$el.html(i);this.$el.find(">li").hover(function(){e(this).removeClass("gray")},function(){if(!e(this).hasClass("current"))e(this).addClass("gray")});this.initStatus();e("#sideBar").css("display","block")},check:function(){var t=e("body")[0];var n=t.className.match(/w(\d+)/)[1];var i=r.width();if(i-n<125||r.scrollTop()<350)e(this.el).fadeOut("fast");else e(this.el).fadeIn("fast");this.setCenter()},initStatus:function(){this.getCurIndex();this.setCurrent()},goIndex:function(t){var n,i,r;this.getPos();r=this;n=this.items.index(e(t.currentTarget));i=this.mods.eq(n).offset().top-200;this.clickEvent=true;e("body,html").animate({scrollTop:i},600,function(){r.curIndex=n;r.setCurrent();r.clickEvent=false})},getPos:function(){var t=this,n;this.items=this.$el.find("li");t.modPos=[];e.each(this.mods,function(i,r){n=e(r).parents(".mod").offset().top;t.modPos.push(n)})},getCurIndex:function(){var t=this,n,i,a=true;i=r.scrollTop();this.getPos();t.curIndex=-1;e.each(this.mods,function(e,n){if(t.modPos[e]>=i&&t.modPos[e]<=i+r.height()&&a){t.curIndex=e;a=false}})},setCurrent:function(){this.items.removeClass("current").addClass("gray");if(this.curIndex>=0)this.items.eq(this.curIndex).addClass("current").removeClass("gray")},setCenter:function(){var t=e("#sideBar"),n=e(".yk-header"),i=r.height()-e(n).height(),a=e(this.el).height(),o=parseInt((i-a)/2);if(o>135&&e(this.el).is(":visible"))e(this.el).css({bottom:o+"px"});else e(this.el).css({bottom:"135px"})}});return a});t(["page/find/g","module/login/login","module/subscribe/subscribe","tui/slide2","page/find/main/view/fixmod","page/find/main/view/recommend","module/global","page/find/custom/custom"],function(t,n,i,r,a,o,s,l){t.init();var u=new a;var c=new o;c.bind("refresh:success",function(){u.initStatus()});var f=new i({box:e(".yk-content")});r();l.init();d();function d(){var t=e("body").width();if(t>1600){e("#btBannerDefault").css("left","-114px").parent().css("width","100%");e("#btBannerExpand").css("left",0)}e(window).resize(function(){var t=e("body").width();if(t>1600){e("#btBannerDefault").css("left","-114px").parent().css("width","100%");e("#btBannerExpand").css("left",0)}else{e("#btBannerDefault").css("left",0).parent().css("width","114px");e("#btBannerExpand").css("left","-"+e("body").width()+"px")}});e("#btBannerDefault").click(function(){e(this).animate({left:"-114px"},300,function(){e(this).parent().css("width","100%");e("#btBannerExpand").animate({left:"0"},300)})});e("#btBannerExpand .bt-close").click(function(){e("#btBannerExpand").animate({left:"-"+e("body").width()+"px"},300,function(){e(this).parent().css("width","114px");e("#btBannerDefault").animate({left:"0"},300)})})}})}(window.jQuery,window.oz.require,window.oz.define);;